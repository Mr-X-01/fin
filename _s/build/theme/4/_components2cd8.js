!function(){"use strict";const t=(t,e=0)=>(...i)=>new Promise((s=>{setTimeout((()=>s(t(...i))),e)})),e=(e,i=0)=>flexbe_cli.is_admin?e:t(e,i),i=(e,i=0,...s)=>t(e,i)(...s),s=(t,e=1)=>Array.from({length:Math.ceil(t.length/e)},((i,s)=>t.slice(s*e,s*e+e)));const n=document,a="a[href], [data-action]",o="[data-action-target]";let r,l;class h{static create(){return r||(r=new h,r)}constructor(){this.bindEvents()}bindEvents(){const t=t=>!!t.target.closest('[data-prevent-action], [data-flexbe-events="off"]');$(n).off("mousedown.component-links-fake",o).on("mousedown.component-links-fake",o,(t=>2!==t.which&&1!==t.button||(t.preventDefault(),!1))),$(n).off("click.component-links-fake auxclick.component-links-fake").on("click.component-links-fake auxclick.component-links-fake",o,(e=>{const i=e.originalEvent;return!(i&&i.isTrusted&&!e.target.closest(a)&&!t(e))||(e.stopPropagation(),e.stopImmediatePropagation(),function(t,e={}){if(!t)return;const i=new MouseEvent(e.type||"click",{bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,button:e.button,buttons:e.buttons,relatedTarget:e.relatedTarget});t.dispatchEvent(i)}($(e.currentTarget).children(a).get(0),i),!1)})),$(n).off("click.component-links auxclick.component-links",a).on("click.component-links auxclick.component-links",a,(e=>{const i=e.currentTarget,s=$(i);if(t(e))return!0;if(!flexbe_cli.run.is_preview&&!i.closest(".editor-focus, .b_block--global, .component-menu-dropdown"))return e.preventDefault(),!0;const n=s.closest("[data-action]").data("action")||("A"===i.tagName?"link":"none");return this.reachGoals(e),["link","app_link","phone","mail","anchor"].includes(n)?this.actionLink(e):"file"===n?this.actionFile():"button"===n?this.actionButton(e):"modal"===n?this.actionModal(e):"cart"===n?this.actionCart(e):"quiz"===n?this.actionQuiz(e):"close"===n?this.actionClose(e):"code"===n?this.actionCode(e):"modalOptions"===n?this.openOptionModal(e):"popup"===n?(e.preventDefault(),!1):void 0}))}openOptionModal(t){const e=t.currentTarget.id;t.preventDefault(),t.stopPropagation(),e&&flexbe_cli.run.is_preview&&flexbe_cli.ecommerce.productsStore.showOptionsModal(e)}actionCode(t){if(flexbe_cli.is_admin&&!flexbe_cli.run.is_preview)return;const e=t.currentTarget;return new(0,async function(){}.constructor)("event",e.getAttribute("data-code")||"")(t.originalEvent)}actionFile(){return!0}actionLink(t){const e=t.currentTarget,i=e.hasAttribute("href")?e.getAttribute("href"):"",s=2===t.button||3===t.which,n=1===t.button||2===t.which,a=t.metaKey||t.ctrlKey||n||"_blank"===e.getAttribute("target")||!1,o=e.hasAttribute("download"),r=flexbe_cli.is_admin;s||o||a&&!n&&!r||(t.preventDefault(),clearTimeout(l),l=setTimeout((()=>{flexbe_cli.helpers.links.gotoLink(i,a)}),15))}actionButton(t){t.stopPropagation();const e=$(t.currentTarget).closest(".content-zone, [data-item-id]").first().find(".component-button").not(".form-button").find(a);e[0]&&e[0].click()}actionModal(t){const e=$(t.currentTarget),i=this.getProductInfo(e[0]);let s=e.attr("data-modal-id");if(!flexbe_cli.modal.find(s)){s=flexbe_cli.modal.$list.find(`._anchor[name="${s}"]`).closest(".m_modal").attr("data-id")||s}if(/^(form|done)$/.test(s)&&!flexbe_cli.modal.find(s)){s=`${e.closest("[data-id]").attr("data-id").split("_")[0]}_${s}`}flexbe_cli.events.trigger("ui_mobilemenu_close"),flexbe_cli.events.trigger("ui_modal_open",{id:s,data:{items:i?[i]:[]}})}actionCart(t){const e=$(t.currentTarget),i=e.closest(".m_modal").length,s=e.closest(".disabled").length,n=this.getProductInfo(e[0]);let a=!1,r=e.closest(o);r.length||(r=e),n&&!s&&(a=r.is("button"),a&&(r.append('\n                <svg class="in-cart-icon" viewBox="0 0 18 14" width="18" height="18">\n                    <path d="M 2.205 5.77223L 0 7.92347L 6.3 14L 18 2.15124L 15.795 0L 6.3 9.74699L 2.205 5.77223Z"/>\n                </svg>\n            '),requestAnimationFrame((()=>{r.addClass("animate-add-to-cart")}))),setTimeout((()=>{i&&(flexbe_cli.events.trigger("ui_modal_close"),flexbe_cli.ecommerce.cartStore.dispatch("addItem",n)),a&&requestAnimationFrame((()=>{r.removeClass("animate-add-to-cart"),r.find(".in-cart-icon").remove()}))}),i?450:1600),i||flexbe_cli.ecommerce.cartStore.dispatch("addItem",n))}actionQuiz(t){const e=$(t.currentTarget).closest("[data-id]").attr("data-id");flexbe_cli.events.trigger("quiz_command",{command:"start",id:e})}actionClose(t){t.preventDefault(),flexbe_cli.events.trigger("ui_modal_close")}reachGoals(t){const e=$(t.currentTarget),i=e.attr("data-action"),s="modal"===i?e.attr("data-modal-id"):e.attr("href"),n=flexbe_cli.stat.getGoal(i,s),a=e.attr("data-goal"),o=e.attr("data-html-goal");flexbe_cli.stat.reachGoals({mainGoal:n,goal:a,htmlGoal:o})}getProductInfo(t){let e=flexbe_cli.ecommerce.getProductInfo(t)||{};return e&&e.title&&"-"!==e.title&&(null!=e.price||flexbe_cli.ecommerce.settings.allowPriceless)||(e=null),e}}const c="--elementHeightPx";class d{static create(){return new this}constructor(){flexbe_cli.is_admin&&flexbe_cli.events.off("entity_render.autoWidth").on("entity_render.autoWidth",(t=>{if(!t||!t.id||!t.templateRendered)return;const e=document.querySelector(`[data-id="${t.id}"]`);this.observeInArea(e)}));const t=t=>{const e=t._core;if(e&&e.inScreen)this.observeInArea(e.area);else{const e=new AbortController;t.addEventListener("screen",(t=>{const i=t.detail||{};i.state&&i.first&&(this.observeInArea(t.target),e.abort())}),{signal:e.signal})}};i((()=>document.querySelectorAll(".b_block").forEach((e=>t(e))))),i((()=>document.querySelectorAll(".m_modal").forEach((e=>t(e))))),i((()=>document.querySelectorAll(".w_widget").forEach((e=>t(e)))))}observeInArea(t=document){const e=(null==t?void 0:t.querySelectorAll(".autowidth-desktop:not(.autoheight-desktop) > .element-content, .autowidth-mobile:not(.autoheight-mobile) > .element-content"))||[];Array.from(e).forEach((t=>d.observer.observe(t)))}}var p;d.observer=new ResizeObserver((t=>{t.forEach((({target:t,contentRect:e})=>{const i=t&&t.offsetParent;if(!i)return;const s=getComputedStyle(i),n=`${e.height}px`;s.getPropertyValue(c)!==n&&requestAnimationFrame((()=>{i.style.setProperty(c,n)}))}))}));const u=150,m=2160,g=Math.min(2,window.devicePixelRatio);class f{static create(){return new this}constructor(){this.imageOptions={lazy:!0,lazy_priority:!1,...flexbe_cli.vars._project.images||{}},this.loadInArea(document,"inline"),this.initLazyLoading(),this.initLazyPriority()}initLazyLoading(){flexbe_cli.is_admin&&flexbe_cli.events.off(".lazyLoading").on("entity_render.lazyLoading",(t=>{if(!t||!t.id||!t.templateRendered)return;const e=document.querySelector(`[data-id="${t.id}"]`);this.loadInArea(e,"inline"),this.loadInArea(e,"lazy")}));const t=t=>{const e=t._core;if(e&&e.inScreen)this.loadInArea(e.area,"lazy");else{const e=new AbortController;t.addEventListener("screen",(t=>{const i=t.detail||{};i.state&&i.first&&(this.loadInArea(t.target,"lazy"),e.abort())}),{signal:e.signal})}};i((()=>document.querySelectorAll(".b_block").forEach((e=>t(e))))),i((()=>document.querySelectorAll(".m_modal").forEach((e=>t(e))))),i((()=>document.querySelectorAll(".w_widget").forEach((e=>t(e)))))}initLazyPriority(){const t=this.imageOptions.lazy,e=this.imageOptions.lazy_priority;t&&e&&$(window).one("load.lazyPriority",(()=>{const t=[".component-bg",'.bg-fill[data-type="image"]',".component-image",".component-icon"].join(",");this.loadInArea(document,"lazy"),Array.from(document.querySelectorAll(t)).forEach((t=>t.dispatchEvent(new CustomEvent("setImage",{detail:{reason:"lazyPriority"}}))))}))}loadInArea(t=document,e="inline"){if(!t)return;!function(t){if(!t.length)return;t.forEach((t=>{if("LINK"!==t.tagName&&"SCRIPT"!==t.tagName){var e;if("svg"===t.tagName||"use"===t.tagName)t=null==(e=t.closest("svg"))?void 0:e.parentElement;f.observer.observe(t)}else v(t)}))}(Array.from(t.querySelectorAll(`[data-${e}-src], [data-${e}-bg], [data-${e}-href]`)))}}function v(t){const e=t.dataset.inlineSrc||t.dataset.lazySrc,i=t.dataset.inlineBg||t.dataset.lazyBg,s=t.dataset.inlineHref||t.dataset.lazyHref,n=e||i||s,a="svg"===t.tagName?[t]:[...t.children].filter((t=>"svg"===t.tagName));if(a.length){const t=a[0].querySelector("use"),e=t&&(t.dataset.inlineHref||t.dataset.lazyHref);return e&&b(t,e),!0}if("LINK"===t.tagName)return b(t,n),!0;if("SCRIPT"===t.tagName)return w(t,n),!0;if(!n)return!0;if(!/%optimalWidth%/gi.test(n))return i?y(t,n):w(t,n),f.observer.unobserve(t),!0;const o=t.parentElement,r="fixed"===o.dataset.imgAttachment,l=t.dataset.imgProportion||100,h=r?window.innerWidth:o.offsetWidth,c=r?window.innerHeight:o.offsetHeight;if(!h&&!c)return!1;const d=l/100;let p;return p=(e?d:c/h)<=d?h:c/d,p=Math.max(u,Math.min(p*g,m)),p=Math.round(p),i?y(t,n.replace(/%optimalWidth%/gi,`${p}`)):w(t,n.replace(/%optimalWidth%/gi,`${p}`)),f.observer.unobserve(t),!0}function y(t,e){const i=t.parentElement.querySelector("img"),s=getComputedStyle(t).getPropertyValue("background-image");t.style.backgroundImage=[`url(${e})`,s].filter((t=>t)).join(","),i&&i.setAttribute("src",e),["data-inline-bg","data-lazy-bg"].forEach((e=>t.removeAttribute(e)))}function w(t,e){t.setAttribute("src",e),["data-inline-src","data-lazy-src"].forEach((e=>t.removeAttribute(e)))}function b(t,e){t.setAttribute("href",e),["data-inline-href","data-lazy-href"].forEach((e=>t.removeAttribute(e)))}let S;p=f,f.observer=new ResizeObserver((t=>{t.filter((t=>t.contentRect.width||t.contentRect.height)).forEach((t=>{v(t.target),p.observer.unobserve(t.target)}))}));let x={x:0,y:0};const C=".lightbox-container, .b_block, .m_modal, .w_widget",A="[data-lightbox]";class I{static create(){return new this}constructor(){this.loaded=!1,this.opened=!1,this.$lg=void 0,this.bindEvents(),window.history.state&&window.history.state.lg&&this.openGallery(window.history.state.lg)}require(t){this.loaded?"function"==typeof t&&t():flexbe_cli.require(["/_s/lib/jquery/lightGallery/css/lightgallery.min.css","/_s/lib/jquery/lightGallery/js/lightgallery.min.js"],(()=>{this.loaded=!0,"function"==typeof t&&t()}))}bindEvents(){$(window).one("load.lightbox",(()=>{$(A).length&&this.require()})),$(document).on("click.lightbox",A,(t=>{t.preventDefault()})),$(document).on("pointerdown.lightbox",A,(t=>{var e,i;flexbe_cli.run.is_preview&&(t.preventDefault(),t.stopPropagation(),S=t.target,x={x:null!=(e=t.clientX)?e:t.touches[0].clientX,y:null!=(i=t.clientY)?i:t.touches[0].clientY})})),$(document).on("pointerup.lightbox",A,(t=>{var e,i;const s=S===t.target,n=null!=(e=t.clientX)?e:t.changedTouches[0].clientX,a=null!=(i=t.clientY)?i:t.changedTouches[0].clientY,o=Math.sqrt((x.x-n)**2+(x.y-a)**2)<5;if(!s||!o||0!==t.button)return;const r=$(t.currentTarget),l=r.closest(C),h=r.attr("data-lightbox"),c="1"===r.closest("[data-loop]").attr("data-loop"),d=!l.attr("data-lightbox-single"),p=l.find(A).filter(((t,e)=>{const i=$(e).closest(C),s=i.is(l),n=i.closest(".swiper-slide-duplicate").length;return s&&!n})).toArray().map((t=>{let e;const i=$(t),s=i.attr("data-lightbox")||i.attr("src")||i.attr("href"),n=i.attr("data-sub-html");if(n){e=i.find(n).html()}else e=i.attr("alt")||i.find("img").attr("alt")||"";return c&&i.closest("[data-cloned]").length?null:{src:s,subHtml:e}})).filter((t=>t&&t.src)),u=p.findIndex((t=>t.src===h))||0;this.openGallery({index:u,dynamicEl:p,enableSlide:d,loop:c})})),$(window).on("popstate.lightbox",(()=>{const t=window.history.state||{};t.lg?this.openGallery(t.lg):this.closeGallery()}))}openGallery(t={}){if(0===t.dynamicEl.length||this.opened)return;this.opened=!0,this.$lg=$("<div/>");const e=this.$lg,i={index:0,dynamicEl:[],dynamic:!0,subHtmlSelectorRelative:!0,getCaptionFromTitleOrAlt:!0,slideEndAnimation:!1,swipeThreshold:30,counter:!0,closable:!0,download:!1,easing:"ease-out",hideBarsDelay:1e3,zoomIcons:!1,actualSize:!1,enableSlide:!0,loop:!0,...t};i.index<=0&&(i.index=0),e.on("onBeforeOpen.lg",(()=>{this.opened=!0,_(i)})),e.on("onBeforeSlide.lg",((t,e,s)=>{e!==s&&_({...i,index:s})})),e.on("onBeforeClose.lg",(()=>{window.history.state&&window.history.state.lg&&(flexbe_cli.lockPopstate=!0,window.history.back(),setTimeout((()=>{flexbe_cli.lockPopstate=!1}),20)),this.opened=!1})),this.require((()=>e.lightGallery(i)))}closeGallery(){this.opened=!1;const t=this.$lg&&this.$lg.data("lightGallery");t&&t.destroy()}}function _(t){const e=window.history.state||{};flexbe_cli.lockPopstate=!0,e.lg?window.history.replaceState({lg:t},null,"#image-popup"):window.history.pushState({lg:t},null,"#image-popup"),flexbe_cli.lockPopstate=!1}let E;class P{static create(){return E||(E=new P,E)}constructor(){this.bindEvents()}bindEvents(){const t=t=>{var e;return null==(e=$(t).find(".swiper")[0])?void 0:e.swiper};$("body").on("click",'a[href^="#prev"], a[href^="#next"], a[href^="#slide"]',(e=>{let i;const s=String(e.currentTarget.href).match(".*#(.*)")[1],[n,a]=s.split(":");if(a)i=t(`[data-id="${a}"]`);else{$(e.currentTarget).parents("[data-id]").toArray().some((e=>(i=t(e),i)))}if(i){if("prev"===n)i.slidePrev();else if("next"===n)i.slideNext();else if(n.includes("slide")){const t=+n.match(/\d+$/)[0];i.slideTo(t-1)}e.preventDefault(),e.stopPropagation()}}))}}const k=new Map,F=(t,e,i)=>Math.max(t,Math.min(e,i)),T=(t,[e,i])=>Math.min(e,i)<=t&&Math.max(e,i)>=t,D=(t,e=document,i)=>t?"string"==typeof t?/%closest%/.test(t)&&i?[i.closest(t.replace(/%closest%/,""))]:[...e.querySelectorAll(t)]:[t]:[],R=t=>+String(t).replace(/[^.\-\d]/g,""),M=(t,e)=>{const i=R(t);return e?i/e*100:i},L=(t,e)=>{const i=R(t);return e?e*i/100:i},B=t=>["%","vw","vh"].includes(t.toLowerCase()),z=(t,e,i)=>{t=String(t);const s=R(t);return"number"==typeof e&&t.includes(i)?L(s,e):s},O=(t,e,i)=>t*(1-i)+e*i,V=(t=6,{exclude:e=[],prefix:i="",suffix:s="",radix:n=10}={})=>{let a="";for(let e=0;e<t;e++){const t=(o=0===e?1:0,r=n-1,Math.floor(Math.random()*(r-o+1)+o));a+=t.toString(n).toUpperCase()}var o,r;return a=i+a+s,e.find((t=>t==a))?V(t,{exclude:e,prefix:i,suffix:s,radix:n}):a},H=t=>{const e={position:null,top:null,left:null,margin:null,width:null,"max-width":null,"min-width":null,height:null,"max-height":null,"min-height":null,"flex-basis":null,transform:null};Object.keys(e).forEach((i=>{t.style[i]&&(e[i]=t.style[i],t.style.removeProperty(i))}));let i=t,s=0,n=0;const a=i.getBoundingClientRect(),o=a.width,r=a.height;do{s+=i.offsetLeft,n+=i.offsetTop,i=i.offsetParent}while(i);return Object.keys(e).forEach((i=>{e[i]&&t.style.setProperty(i,e[i])})),{top:n,left:s,width:o,height:r}},W=t=>(t=t.split("round")[0]).match(/[+-]?([0-9]*[.])?[0-9]+/g).map((t=>+t)),q=t=>{const e=t.match(/round\s+([-.\d]+px)/);return e&&e[1]?+e[1].replace(/[^-.\d]/g,""):0},N=(t,e,i)=>O(t,e,i/100),j=t=>!!t.offsetParent||!t.parentElement,Y=t=>{const[e]=t.split("at").map((t=>W(t)));return(null==e?void 0:e[0])||0},X=t=>{const[e,i]=t.split("at").map((t=>W(t)));return i&&i.length?{x:i[0],y:i[1]}:{x:0,y:0}},G=(t,e,i)=>((t,e,i)=>{const s=/round\s+([-.\d]+(px|%))/,n=t.match(s);return n?t.replace(s,`round ${e}${i}`):`${t.replace(")","")} round ${e}${i})`})(`inset(${t.map((t=>`${t}%`)).join(" ")})`,e,i),U=(t,e=(t=>t))=>{if(t.includes("spring")){const[i]=t.match(/[+-]?([0-9]*[.])?[0-9]+/g).map((t=>+t)),s=7;return()=>t=>(t=e(t),1-Math.pow(Math.E,-s*t)*Math.cos(i*t))}if(t.includes("cubic-bezier")){const[i,s,n,a]=t.match(/[+-]?([0-9]*[.])?[0-9]+/g).map((t=>+t)),o=t=>Z(t,0,1,i,n);return()=>t=>(t=e(t),i===s&&n===a?t:K(o(t),s,a))}return()=>t=>t},K=(t,e,i)=>(((1-3*i+3*e)*t+(3*i-6*e))*t+3*e)*t,Z=(t,e,i,s,n)=>{let a,o,r=0;do{o=e+(i-e)/2,a=K(o,s,n)-t,a>0?i=o:e=o}while(Math.abs(a)>1e-7&&++r<12);return o};class J{get unitsValues(){return{}}get endFrame(){return this.iterationsMap[this.iterationsMap.length-1].frames[1]}get has3DTransformation(){return!1}static async loadLibs(){return new Promise((t=>{(async(t,e)=>{const i=t.map((async t=>{if(!k.has(t)){const e=new Promise(((e,i)=>{$.ajax({url:t,dataType:"script",cache:!0}).done(e).fail(i)}));k.set(t,e)}return k.get(t)})),s=await Promise.all(i);"function"==typeof e&&e(s)})(this.libs,(()=>{this.libsLoaded=!0,t(!0)}))}))}constructor(t){var e;this.defaultAnimationParams={playMode:"normal"},this.animationParams=void 0,this.iterationsMap=[],this.pureIterationsMap=[],this.progress=0,this.element=void 0,this.frames=[],this.onChange=void 0,this.initialAnimationFrame=void 0,this.animationParams={...this.defaultAnimationParams,...t.animationParams},this.element=t.element,this.onChange=null!=(e=t.onChange)?e:()=>{},this.initialAnimationFrame=t.initialAnimationFrame}static create(t){return new this(t)}buildIterationsMap(){const{playMode:t,loop:e}=this.animationParams;let[i,s]=this.frames;const n="bounce"===t,a=+e*(n?2:1),o=new Array(a).fill(null);o.reduce(((t,e,r)=>{const l=r+1,h=l/a*100,c=(l%2==0&&n?[s,i]:[i,s]).filter((t=>null!=t));return o[r]={iterationIndex:r,progressRange:[t,h],frames:c},h}),0),this.pureIterationsMap=o,this.iterationsMap=this.convertInteractionsToMainUnit(o)}getIntersectionWithIterationMap([t,e]){const i=t>e;let s=[];const n=this.iterationsMap.findIndex((e=>T(t,e.progressRange))),a=this.iterationsMap.findIndex((t=>T(e,t.progressRange)));if(-1!==n)for(let o=n;T(o,[0,this.iterationsMap.length-1]);i?o--:o++){const{progressRange:r}=this.iterationsMap[o];let l;if(o===n?(l=i?[t,r[0]]:[t,r[1]],n===a&&(l=[t,e])):l=o===a?i?[r[1],e]:[r[0],e]:i?[r[1],r[0]]:r,s.push({progressRange:l,iterationIndex:o}),o===a)break}return s}percentToIteration(t,e=this.iterationsMap,i=!1){var s;i=i||!T(t,[0,100]);const n=t>=0&&t<=100?1:t/100;if(t=F(0,t,100),!i){if(0===t)return{iteration:e[0],iterationIndex:e[0].iterationIndex,progressInIteration:0,frame:e[0].frames[0]};if(100===t){const t=e.length-1;return{iteration:e[t],iterationIndex:e[t].iterationIndex,progressInIteration:100,frame:e[t].frames[1]}}}const a=null!=(s=e.findIndex((e=>T(t,e.progressRange))))?s:0;if(-1===a)throw new Error(`It is impossible to determine iteration for ${t}% of progress. Probably the iterationsMap was builded incorrectly.`);const o=e[a];let r=0;const{frames:l,progressRange:h}=o;let c=l[0];if(l&&h)if(1===l.length)c=l[0];else if("object"==typeof l[0])c={},Object.keys(l[0]).forEach((e=>{let i=l[0][e],s=l[1][e];const a=Math.abs(h[1]-h[0]);r=(t-h[0])/a*100;let o=this.percentToFrame({frameField:e,fromFrame:i,toFrame:s,progressInIteration:r});if(null!=o)c[e]=o;else{const t=Object.keys(this.unitsValues[e]||{}),a=t.find((t=>String(i).includes(t))),l=t.find((t=>String(s).includes(t))),h=l||a;i=a?z(i,this.unitsValues[e][a],a):+String(i).replace(/[^.\-\d]/g,""),s=a?z(s,this.unitsValues[e][l],l):+String(s).replace(/[^.\-\d]/g,"");const d=Math.abs(s-i),p=r*d/100,u=r?p*n:p+d*n;o=i<s?i+u:i-u,c[e]=h?`${M(o,this.unitsValues[e][h])}${h}`:o}}));else{const e=Math.abs(l[1]-l[0]),i=Math.abs(h[1]-h[0]);r=(t-h[0])/i*100;let s=this.percentToFrame({frameField:null,fromFrame:l[0],toFrame:l[0],progressInIteration:r});if(null!=s)c=s;else{const t=r*e/100,i=r?t*n:t+e*n;c=l[0]<l[1]?l[0]+i:l[0]-i}}return{iteration:o,iterationIndex:a,progressInIteration:r,frame:c}}convertFrameToUnit(t,e,i){const s=Object.keys(this.unitsValues[e]||{}),n=R(t);if(s.length){const a=s.find((e=>String(t).includes(e))),o=this.unitsValues[e][a],r=this.unitsValues[e][i];if(o&&r){const t=n*o/100/r*100;return{value:`${t}${i}`,cleanValue:t}}}return{value:t,cleanValue:n}}convertInteractionsToMainUnit(t){return t.map((t=>{const e=t.frames[0],i=t.frames[1];return"object"==typeof i&&Object.keys(i).map((t=>{const s=Object.keys(this.unitsValues[t]||{}),n=s.length&&String(i[t]).includes("px")?"px":s.find((e=>String(i[t]).includes(e)));if(n){const{value:i}=this.convertFrameToUnit(e[t],t,n);e[t]=i}})),{...t,frames:[e,i]}}))}init(){}activateAnimation({fromSnapshot:t}){}destroy(){}play(t){}seek(t,e=0){}stop(){}percentToFrame(t){}}J.libsLoaded=!1,J.libs=[];class Q extends J{}Q.libs=["/_s/lib/lottie-player/lottie-player.min.js"];const tt=180/Math.PI;function et(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}function it(t,e){return[t[0]/e,t[1]/e,t[2]/e]}function st(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function nt(t,e,i,s){return[t[0]*i+e[0]*s,t[1]*i+e[1]*s,t[2]*i+e[2]*s]}function at(t){const e=t.toString().split("e");return.001*Math.round(e[0]+"e"+(e[1]?+e[1]-3:3))}function ot(t){const e=new Array(4),i=new Array(3),s=new Array(3),n=new Array(3);for(let e=0;e<3;e++)n[e]=t[3][e];const a=new Array(3);for(let e=0;e<3;e++)a[e]=t[e].slice(0,3);i[0]=et(a[0]),a[0]=it(a[0],i[0]),s[0]=st(a[0],a[1]),a[1]=nt(a[1],a[0],1,-s[0]),i[1]=et(a[1]),a[1]=it(a[1],i[1]),s[0]/=i[1],s[1]=st(a[0],a[2]),a[2]=nt(a[2],a[0],1,-s[1]),s[2]=st(a[1],a[2]),a[2]=nt(a[2],a[1],1,-s[2]),i[2]=et(a[2]),a[2]=it(a[2],i[2]),s[1]/=i[2],s[2]/=i[2];const o=(r=a[1],l=a[2],[r[1]*l[2]-r[2]*l[1],r[2]*l[0]-r[0]*l[2],r[0]*l[1]-r[1]*l[0]]);var r,l;if(st(a[0],o)<0)for(let t=0;t<3;t++)i[t]*=-1,a[t][0]*=-1,a[t][1]*=-1,a[t][2]*=-1;let h;return e[0]=.5*Math.sqrt(Math.max(1+a[0][0]-a[1][1]-a[2][2],0)),e[1]=.5*Math.sqrt(Math.max(1-a[0][0]+a[1][1]-a[2][2],0)),e[2]=.5*Math.sqrt(Math.max(1-a[0][0]-a[1][1]+a[2][2],0)),e[3]=.5*Math.sqrt(Math.max(1+a[0][0]+a[1][1]+a[2][2],0)),a[2][1]>a[1][2]&&(e[0]=-e[0]),a[0][2]>a[2][0]&&(e[1]=-e[1]),a[1][0]>a[0][1]&&(e[2]=-e[2]),h=e[0]<.001&&e[0]>=0&&e[1]<.001&&e[1]>=0?[0,0,at(180*Math.atan2(a[0][1],a[0][0])/Math.PI)]:function(t){const[e,i,s,n]=t,a=e*e,o=i*i,r=s*s,l=e*i+s*n,h=n*n+a+o+r;return l>.49999*h?[0,2*Math.atan2(e,n)*tt,90]:l<-.49999*h?[0,-2*Math.atan2(e,n)*tt,-90]:[at(Math.atan2(2*e*n-2*i*s,1-2*a-2*r)*tt),at(Math.atan2(2*i*n-2*e*s,1-2*o-2*r)*tt),at(Math.asin(2*e*i+2*s*n)*tt)]}(e),{rotateX:h[0],rotateY:h[1],rotateZ:h[2],scaleX:at(i[0]),scaleY:at(i[1]),scaleZ:at(i[2]),translateX:n[0],translateY:n[1],translateZ:n[2],skewXY:at(s[0])*tt,skewXZ:at(s[1])*tt,skewYZ:at(s[2]*tt)}}function rt(t){if(!t)return null;const e=getComputedStyle(t),i=new DOMMatrix(e.getPropertyValue("transform")),s=new Array(4);for(let t=1;t<5;t++){const e=s[t-1]=new Array(4);for(let s=1;s<5;s++)e[s-1]=i[`m${t}${s}`]}return ot(s)}const lt="800px",ht="50% 50%";class ct extends J{get valueForProgressFartor(){return this.animationParams.duration*this.iterationsMap.length}get has3DTransformation(){return[this.animationParams.rotateX,this.animationParams.rotateY].some((t=>"number"==typeof t))}get unitsValues(){return{translateX:{px:100,"%":this.element.offsetWidth,vh:this.element.ownerDocument.documentElement.clientHeight,vw:this.element.ownerDocument.documentElement.clientWidth},translateY:{px:100,"%":this.element.offsetHeight,vh:this.element.ownerDocument.documentElement.clientHeight,vw:this.element.ownerDocument.documentElement.clientWidth},perspective:{px:100,vh:this.element.ownerDocument.documentElement.clientHeight,vw:this.element.ownerDocument.documentElement.clientWidth}}}constructor(t){super(t),this.initialDomMatrix=void 0,this._delayTimeoutDisposer=void 0,this.initialDomMatrix=t.initialDomMatrix,this.animationParams=this.normalizeAnimationParams(this.animationParams);const e=this.getFrame(this.initialAnimationFrame);this.frames=[e,this.getFrame()],this.buildIterationsMap()}async activateAnimation({fromSnapshot:t}={fromSnapshot:!1}){if(t){const t=this.getSnapshotFrame(),e=this.getFrame();this.frames=[t,e],this.buildIterationsMap()}}async play({resetProgress:t,reverse:e,animationParams:i,onStart:s,onComplete:n,onLoopStart:a,onLoopComplete:o}){this.stop();const{duration:r,delay:l,easing:h,loop:c}={...this.animationParams,...i},d=e?100:0,p=e?0:100,u=t?d:this.progress,m=[u,p];let g=this.getIntersectionWithIterationMap(m),f=1e3*r*Math.abs(m[0]-m[1])/100;const v=u===d?1e3*(l||0):0;this.progress=u,v&&await new Promise((t=>{this._delayTimeoutDisposer=function(t,e){let i=e,s=Date.now(),n=null;const a=()=>{n=setTimeout(t,i)},o=()=>{document.hidden||"visible"!==document.visibilityState?(clearTimeout(n),i-=Date.now()-s,n=null):n||a()};return window.addEventListener("visibilitychange",o),window.addEventListener("blur",o),window.addEventListener("focus",o),a(),()=>{clearTimeout(n),window.removeEventListener("visibilitychange",o),window.removeEventListener("blur",o),window.removeEventListener("focus",o)}}((()=>t(!0)),v)}));let y=0;for(s(),a();;){if(y>0&&(f=1e3*r),y>=g.length||y<0){if(!0!==c)break;y=0,g=this.getIntersectionWithIterationMap([d,p]),f=1e3*r}const t="bounce"===this.animationParams.playMode&&(y+1)%2==0;t||a();const i=g[y],s=this.iterationsMap[i.iterationIndex].progressRange,n=this.iterationsMap[i.iterationIndex].frames,{translateX:l,translateY:u,translateZ:m,scaleX:v,scaleY:w,skewX:b,skewY:$,clipPath:S,...x}=this.buildAnimeParams(n);this.frames[0].clipPath||this.frames[1].clipPath?x.clipPath=S.map((t=>t||"inset(0% 0% 0% 0%)")):this.element.style.removeProperty("clip-path"),await new Promise((t=>{anime({targets:this.element,translateX:l,translateY:u,translateZ:m,...x,scaleX:[this.normalizeScale(v[0]),this.normalizeScale(v[1])],scaleY:[this.normalizeScale(w[0]),this.normalizeScale(w[1])],skewX:b,skewY:$,duration:f,easing:U(h,(t=>{return e=s[0],n=s[1],a=O(i.progressRange[0],i.progressRange[1],t),100*Math.abs((a-e)/(n-e))/100;var e,n,a})),update:t=>{this.progress=O(i.progressRange[0],i.progressRange[1],t.progress/100),this.onChange()},complete:()=>{t(!0)}})}));const C=e?n[0].clipPath:n[1].clipPath;C&&C.includes("circle")&&this.element.style.setProperty("clip-path",C),y+=1,t||o()}n()}seek(t,e=0){var i;let s=t=F(0,null!=(i=t)?i:this.progress,100);this.animationParams.seekEasing&&(s=100*U(this.animationParams.seekEasing)()(t/100));const{frame:n}=this.percentToIteration(s);let{translateX:a,translateY:o,translateZ:r,scaleX:l,scaleY:h,skewX:c,skewY:d,clipPath:p,perspective:u,...m}=n;if(e){o=`${(((t,e,i,s)=>{let n=R(t);if(isNaN(n))return 0;const a=B(e),o=B(i);if(a){const t=s[e];n=L(n,t)}if(o){const t=s[i];n=M(n,t)}return n})(o,((t,e="")=>{const i=String(t).trim().match(/\d+(\D+)$/);return i&&i[1]?i[1].trim():e})(o),"px",this.unitsValues.translateY)+e).toFixed(3)}px`}this.frames[0].clipPath||this.frames[1].clipPath?m.clipPath=null!=p?p:"inset(0% 0% 0% 0%)":this.element.style.removeProperty("clip-path"),this.element.style.setProperty("transform",`\n            perspective(${u})\n            translateX(${a})\n            translateY(${o})\n            rotateX(${m.rotateX}deg)\n            rotateY(${m.rotateY}deg)\n            rotateZ(${m.rotateZ}deg)\n            scaleX(${this.normalizeScale(l)})\n            scaleY(${this.normalizeScale(h)})\n            scaleZ(${m.scaleZ})\n            skewX(${c}deg)\n            skewY(${d}deg)\n        `),this.element.style.setProperty("opacity",`${m.opacity}`),this.element.style.setProperty("clip-path",`${m.clipPath}`),this.element.style.setProperty("transform-origin",`${m.transformOrigin}`),this.progress=t,this.onChange()}stop(){var t;anime.remove(this.element),null==(t=this._delayTimeoutDisposer)||t.call(this)}buildAnimeParams(t){const e={};return Object.keys(t[0]).forEach((i=>{e[i]="clipPath"===i?this.normalizeClipPath([t[0][i],t[1][i]]):[t[0][i],t[1][i]]})),e}getSnapshotFrame(){const t=getComputedStyle(this.element),e=+t.getPropertyValue("opacity"),i=t.getPropertyValue("clip-path"),s=this.element.style.getPropertyValue("transform-origin"),{rotateX:n,rotateY:a,rotateZ:o,translateX:r,translateY:l,scaleX:h,scaleY:c,skewXY:d,skewYZ:p}=rt(this.element);return this.getFrame({opacity:e,rotateX:n,rotateY:a,rotateZ:o,translateX:r,translateY:l,scaleX:h,scaleY:c,skewX:d,skewY:p,clipPath:i,transformOrigin:s,perspective:lt})}getFrame(t=null){var e,i,s,n,a,o;let{opacity:r,rotateX:l,rotateY:h,rotateZ:c,rotate:d,scale:p,scaleX:u,scaleY:m,skew:g,skewX:f,skewY:v,translateX:y,translateY:w,clipPath:b,transformOrigin:$,perspective:S}=null!=t?t:this.animationParams;const x=(t=>{let e={type:"unknown",value:t,sourceValue:t,clipPathValues:[],unitValues:[]};if(/inset/.test(t)){let i=W(t);i.length&&1===i.length&&(i=new Array(4).fill(i[0]));const s=i.map((t=>`${t}%`));e={type:"inset",value:`inset(${s.join(" ")} round ${q(t)}px)`,sourceValue:t,unitValues:s,clipPathValues:i}}return e})(b);let C=null!=(e=null!=c?c:d)?e:0,A=null!=r?r:1;var I,_;"auto"===C&&(C=null!=(I=getComputedStyle(this.element).getPropertyValue("--elementRotate"))?I:0);"auto"===A&&(A=null!=(_=getComputedStyle(this.element).getPropertyValue("--elementOpacity"))?_:1);return{opacity:null!=(i=A)?i:1,rotateX:null!=l?l:0,rotateY:null!=h?h:0,rotateZ:+String(C).replace(/[^-.\d]/g,""),scaleX:null!=(s=null!=p?p:u)?s:1,scaleY:null!=(n=null!=p?p:m)?n:1,skewX:+String(null!=(a=null!=g?g:f)?a:0).replace(/[^-.\d]/g,""),skewY:+String(null!=(o=null!=g?g:v)?o:0).replace(/[^-.\d]/g,""),scaleZ:1,translateX:null!=y?y:"0px",translateY:null!=w?w:"0px",translateZ:"0px",clipPath:x.value,transformOrigin:null!=$?$:ht,perspective:null!=S?S:lt}}normalizeEasing(t){return t||"cubic-bezier(0.455, 0.03, 0.515, 0.955)"}normalizeScale(t){return Math.max(t,1e-6)}normalizeAnimationParams(t){return{loop:1,playMode:"normal",opacity:1,rotate:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0,duration:.3,translateX:"0px",translateY:"0px",translateZ:"0px",clipPath:null,transformOrigin:ht,perspective:lt,...t,easing:this.normalizeEasing(t.easing)}}convertClipPathCircleToInset(t){const e=this.element.clientHeight,i=this.element.clientWidth,s=(e*i)**.5,n=Math.max(Y(t),1e-4),{x:a,y:o}=X(t),r=(e+i-s)*n/100,l=r/i*100,h=r/e*100;return G([o-h,100-a-l,100-o-h,a-l],Math.max(r,20),"px")}normalizeClipPathValue(t){return t&&"none"!==t?t:"inset(0% 0% 0% 0% round 0px)"}normalizeClipPath([t,e]){return t=this.normalizeClipPathValue(t),e=this.normalizeClipPathValue(e),t.includes("circle")&&e.includes("inset")&&(t=this.convertClipPathCircleToInset(t)),e.includes("circle")&&t.includes("inset")&&(e=this.convertClipPathCircleToInset(e)),[t,e]}percentToFrame({progressInIteration:t,fromFrame:e,toFrame:i,frameField:s}){if("clipPath"===s){const[s,a]=this.normalizeClipPath([e,i]);if(s.includes("inset")){const e=W(s),i=W(a),n=q(s),o=q(a),r=e.map(((s,n)=>N(e[n],i[n],t))),l=N(n,o,t);return G(r,l,"px")}if(s.includes("circle")){const{x:e,y:i}=X(s),{x:o,y:r}=X(a),l=Y(s),h=Y(a);return n={x:N(e,o,t),y:N(i,r,t)},`circle(${N(l,h,t)||30}% at ${(n={x:0,y:0,...n}).x}% ${n.y}%)`}}var n;if("transformOrigin"===s){const s=e.match(/[+-]?([0-9]*[.])?[0-9]+/g).map((t=>+t)),n=i.match(/[+-]?([0-9]*[.])?[0-9]+/g).map((t=>+t));return s.map(((e,i)=>`${O(s[i],n[i],t/100)}%`)).join(" ")}return null}destroy(){this.stop(),this.element.style.removeProperty("opacity"),this.element.style.removeProperty("clip-path"),this.element.style.removeProperty("transform"),this.element.style.removeProperty("transform-origin")}}var dt;ct.libs=["/_s/lib/anime/anime.min.js"];const pt=["opacity","clip-path","transform","transform-origin"],ut=["position","top","left","width","min-width","max-width","height","min-height","max-height","flex-basis","margin"];class mt{static get activeInteractions(){return this.list.filter((t=>!t.hasInteractivityState("isSuspended")))}static expectIntersection(t){this.checkIntersection(t),this.pendingIntersections.push(t)}static checkIntersection(t){if(null==t.intersectionLinePosition||!t.hasInteractivityState("scrollContainerInShow"))return;const{triggerElementOffsetBound:e,scrollContainer:i,intersectionLinePosition:s}=t,n=t.hasInteractivityState("wasIntersection");let a="out";s>=e.top-i.scrollTop&&(a="in"),"function"==typeof t.options.normalizeIntersectionState&&(a=t.options.normalizeIntersectionState(a,t)),n||"in"!==a?n&&"out"===a&&setTimeout((()=>{t.setInteractivityState({wasIntersection:!1}),t.triggerIntersection("out")}),1):setTimeout((()=>{t.setInteractivityState({wasIntersection:!0}),t.triggerIntersection("in")}),1)}static async init(){if(this.inited)return;this.inited=!0,document.addEventListener("documentresized",this.resizeHandler),window.addEventListener("resize",this.resizeHandler);const t=document.createElement("style");t.innerHTML=".interactivity-pointerless, .interactivity-pointerless * { pointer-events: none !important; user-select: none !important; } .interactivity-cursor-pointer { cursor: pointer !important; } .interactivity-user-select-none { user-select: none !important; -webkit-user-select: none !important; }",document.head.appendChild(t),this.intersectionObserver=new IntersectionObserver((t=>{t.forEach((t=>{const e=j(t.target);this.getInstances({scrollContainer:t.target}).forEach((async t=>{if(!("none"===t.interactionType||t.hasInteractivityState("scrollContainerInShow")&&e)){if(t.setInteractivityState({scrollContainerInShow:e}),e)return await new Promise((t=>setTimeout(t,120))),t.updateOffsetBound(),t.updateInsectionLinePosition(),await t.createSteps(),t.updateActivityDistanceRanges(),t.startAnimation(!0),await new Promise((t=>setTimeout(t,20))),this.checkIntersection(t);t.setProgress(0),t.setInteractivityState({wasIntersection:!1}),t.stopAnimation()}}))}))}),{rootMargin:"0px",threshold:1})}static listenScroll(t){let e=t;this.scrollContainers.includes(t)||(this.scrollContainers.push(t),"HTML"===e.nodeName&&(e=e.ownerDocument),e.addEventListener("scroll",(()=>{this.pendingIntersections.forEach((e=>{e.scrollContainer===t&&this.checkIntersection(e)})),this.activeInteractions.forEach((e=>{e.scrollContainer===t&&("scroll"!==e.interactionType||e.hasInteractivityState("inPlay")||e.scrollInteractionHandler())}))})),this.intersectionObserver.observe(t))}static async create(t,e={}){this.inited||this.init();const i=new vt(t);return await i.init(e),this.list.push(i),i}static remove({interaction:t,id:e}){var i,s,n;return!(!t&&!e)&&(e=null!=(i=e)?i:t.id,(t=null!=(s=t)?s:this.getInstances({id:e})[0]).stopAnimation(!0,!0),t.removePointerLess(),ut.forEach((e=>t.element.style.removeProperty(e))),null==(n=t.fixedReplacementElement)||n.remove(),t.steps.forEach((t=>t.animation.destroy())),this.list.splice(this.list.findIndex((t=>t.id===e)),1),!0)}static removeAnimationStyles(t){t&&pt.forEach((e=>t.style.removeProperty(e)))}static getInstances({id:t,element:e,scrollContainer:i}){return t?this.list.filter((e=>e.id===t))||[]:e?this.list.filter((t=>t.element===e))||[]:i&&this.list.filter((t=>t.scrollContainer===i))||[]}}dt=mt,mt.inited=!1,mt._resizeTimeout=null,mt.scrollContainers=[],mt.list=[],mt.pendingIntersections=[],mt.intersectionObserver=void 0,mt.resizeHandler=((t,e)=>{let i,s,n=!1;return function a(){if(n)return i=arguments,void(s=this);t.apply(this,arguments),n=!0,setTimeout((function(){n=!1,i&&(a.apply(s,i),i=s=null)}),e)}})((()=>{clearTimeout(dt._resizeTimeout),dt._resizeTimeout=setTimeout((()=>{dt.activeInteractions.forEach((t=>{t.updateOffsetBound(),t.interactionSettings.intersectionLine&&(t.updateInsectionLinePosition(),"scroll"!==t.interactionType||t.hasInteractivityState("inPlay")||(t.interactionSettings.fixed&&t.updateInitialValues(),t.scrollInteractionHandler(!0)))}))}),100)}),50);class gt{constructor(t){this.interaction=void 0,this.interaction=t}async setProgress(t,e=0,i=!1){return await this.interaction.setProgress(t,i,e),!0}async activateStep(t,e="start",i=!1){return await this.interaction.activateStep(t,e,i),!0}async play(t){return this.interaction.toggleFixed(!1),this.interaction.activeAnimationIteration=0,await this.interaction.chainedInteractionHandler(t,!1),!0}async playStep(t){return null!=t&&await this.activateStep(t),this.interaction.playStep()}stop(){return this.interaction.stopAnimation()}startSync(){return this.interaction.startPreview()}stopSync(){return this.interaction.stopPreview(!0)}}const ft={lottie:Q,css:ct};class vt extends mt{get skewIsNotAvailable(){return"css"===this.animationType&&"scroll"===this.interactionType&&"play"===this.interactionSettings.seekMode&&"reverse"===this.interactionSettings.retriggerBehavior}get progressMap(){return this.steps.map((t=>{var e;return(null==t||null==(e=t.progressRange)?void 0:e[1])||0}))}get allowFixed(){return"scroll"===this.interactionType&&"seek"===this.interactionSettings.seekMode}get allowNativePositionFixed(){var t;return null==(t=this.options.allowNativePositionFixed)||t}constructor(t){super(),this.isTouch="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,this._smoothingTimeout=null,this._maxElementOffsetTop=1/0,this._lastRetriggerBehavior=null,this._initialPositionType=null,this._initialTopValue=null,this.api=void 0,this.id=void 0,this.options=void 0,this.element=void 0,this.fixedReplacementElement=void 0,this.elementOffsetBound=void 0,this.triggerElementOffsetBound=void 0,this.scrollContainer=void 0,this.interactionType=void 0,this.interactionSettings=void 0,this.animationType=void 0,this.steps=[],this.animationModule=void 0,this.activeStep=void 0,this.activeStepIndex=void 0,this.activeAnimationIteration=0,this.state={inPlay:!1,inSeek:!1,isInited:!1,inFixed:!1,isCompleted:!1,isSuspended:!1,inReverse:!1,inReverseBehaviour:!1,scrollContainerInShow:!1,wasIntersection:!1,preventCursorPointer:!1},this.eventsAbortController=void 0,this.intersectionLinePosition=void 0,this.initialDomMatrix=void 0,this.progress=0,this.normalizeOptions=void 0,this.normalizeOptions=t.normalizeOptions||(t=>t),this.options=this.normalizeOptions(t)||t,this.id=this.options.id||V(6),this.updateInteractivityFields()}suspend(){this.hasInteractivityState("isSuspended")||(this.stopAnimation(),this.setInteractivityState({isSuspended:!0}))}go(){this.hasInteractivityState("isSuspended")&&(this.updateOptions(this.options),this.setInteractivityState({isSuspended:!1}),this.startAnimation())}updateInteractivityFields(){this.element=D(this.options.element)[0],this.scrollContainer=(t=>{const e=(t,i=[])=>null==t.parentNode?i:e(t.parentNode,i.concat([t])),i=t=>{const e=/(auto|scroll)/,i=getComputedStyle(t,null);return["overflow","overflow-y","overflow-x"].some((t=>e.test(i.getPropertyValue(t))))};if(!(t=$(t)[0])||!t.parentNode)return;const s=e(t.parentNode,[]);for(let t=0;t<s.length;t++)if(i(s[t]))return s[t];const n=t.ownerDocument||document;return n.scrollingElement||n.documentElement})(this.element),this.interactionType=this.options.interactionType,this.interactionSettings={seekAxis:"x",seekMode:"seek",retriggerBehavior:"restart",intersectionLineOffset:0,...this.options.interactionSettings},this.animationType=this.options.animationType,this.animationModule=ft[this.animationType]}async updateOptions(t,e=!1){let i="object"==typeof t.steps&&JSON.stringify(t.steps)!==JSON.stringify(this.options.steps);const s="object"==typeof t.interactionSettings&&JSON.stringify(t.interactionSettings)!==JSON.stringify(this.options.interactionSettings),n={...this.options,...t};return this.options.interactionSettings.seekMode===n.interactionSettings.seekMode&&this.options.interactionSettings.retriggerBehavior===n.interactionSettings.retriggerBehavior&&this.options.interactionType===n.interactionType||(i=!0),this.options=this.normalizeOptions(n)||n,this.updateInteractivityFields(),await this.createInteractivitySettings(),(s||e)&&(this.updateOffsetBound(),this.updateInsectionLinePosition()),(i||e)&&(await this.createSteps(),this.updateActivityDistanceRanges()),this.toggleFixed(T(this.progress,[0,100])&&this.interactionSettings.fixed,!0),this.updateScrollPosition(),this.updatePointerLess(),this.updateCursorPointer(),this.updateProgressRanges(),this.triggerChange(),this}updateStyles(){this.hasStepState("inPlay")||this.seek(),"scroll"===this.interactionType&&this.scrollInteractionHandler(!0)}async activateStep(t,e="end",i=!1){if(this.steps&&this.steps.length&&this.steps[t]){const s="string"==typeof t?this.steps.find((e=>e.name===t)):this.steps[t];if(s){const{animation:t,progressRange:n}=s,{animationParams:a,iterationsMap:o}=t;let r="end"===e?n[1]:n[0];if("end"===e&&"bounce"===a.playMode){const t=o[o.length-1];r-=(n[1]-n[0])*(t.progressRange[1]-t.progressRange[0])/100}return this.setProgress(r,i)}}return this.activeStep&&this.activeStep.animation.destroy(),this.activeStepIndex=-1,this.activeStep=null,this.progress=-1,this.triggerChange(),{progress:this.progress,progressInStep:0,step:this.activeStep,stepIndex:this.activeStepIndex}}async setProgress(t,e=!0,i=0){this.stopAnimationStep(),t=F(0,t,100);const s=this.steps.findIndex((e=>T(t,e.progressRange)));if(-1!==s){const{progressRange:n}=this.steps[s],a=(t-n[0])/(n[1]-n[0]||1)*100;return this.progress=t,await this.setActiveStep(s),i&&(clearTimeout(this._smoothingTimeout),this.startSmooting(i)),this.activeStep.animation.seek(a),i&&(await new Promise((t=>{this._smoothingTimeout=setTimeout((()=>t(!0)),1e3*i)})),"scroll"===this.interactionType&&this.interactionSettings.seekSmoothing?this.startSmooting(this.interactionSettings.seekSmoothing):this.resetTransition()),e&&(this.toggleFixed(T(t,[0,100])&&this.interactionSettings.fixed,!0),this.updateScrollPosition()),this.triggerChange(),{progress:t,progressInStep:a,step:this.steps[s],stepIndex:s}}return null}async startPreview(){return!!this.hasInteractivityState("isSuspended")&&(this._lastRetriggerBehavior=this.options.interactionSettings.retriggerBehavior,this._maxElementOffsetTop=1/0,this.updateOptions({...this.options,interactionSettings:{...this.options.interactionSettings,retriggerBehavior:"reverse"}},!0),this.setInteractivityState({isSuspended:!1}),await this.startAnimation(),this.seek(0),this.updateScrollPosition(),this.triggerStartPreview(),!0)}stopPreview(t){if(this.hasInteractivityState("isSuspended"))return!1;if(this.toggleFixed(!1,!0),t){const t=this.triggerElementOffsetBound.top-this.scrollContainer.scrollTop,{activityDistanceRange:e}=this.activeStep,i=100-100*((t-Math.min(...e))/Math.max(Math.abs(e[0]-e[1]),1)||0);this.seek(i,this.interactionSettings.fixed&&this.allowFixed&&!this.allowNativePositionFixed?this.getFixedOffsetTop(i):0)}return this.stopAnimation(),this._lastRetriggerBehavior&&(this.updateOptions({...this.options,interactionSettings:{...this.options.interactionSettings,retriggerBehavior:this._lastRetriggerBehavior}},!0),this._lastRetriggerBehavior=null),this.setInteractivityState({isSuspended:!0}),this.triggerStopPreview(),!0}async playStep(t){return!!this.activeStep&&(await this.activateStep(this.activeStepIndex),await this.play({forceRestart:!0,resetProgress:!0,animationParams:t}),!0)}async playAll(t=!1){return this.stopAnimation(),this.activeAnimationIteration=0,await this.setProgress(t?100:0,!1),await this.chainedInteractionHandler(t,!0),!0}stopAnimationStep(t=!0,e=!0){return!!this.activeStep&&(this.activeStep.animation.stop(),e&&this.hasStepState("inPlay")&&(this.triggerStepLoopComplete(),this.triggerStepComplete(),this.setStepState({inPlay:!1})),t&&this.setInteractivityState({inPlay:!1}),this.updatePointerLess(),!0)}stopAnimation(t=!1,e=!0){var i;(this.stopAnimationStep(!0,e),this.setInteractivityState({inPlay:!1}),this.resetTransition(),t)&&(null==(i=this.eventsAbortController)||i.abort());return!0}async init({suspended:t}={}){var e;t=null!=(e=t)&&e,this.createInteractivitySettings(),this.updateOffsetBound(),this.animationModule.libsLoaded||await this.animationModule.loadLibs(),vt.listenScroll(this.scrollContainer),await this.createSteps(),this.updateInsectionLinePosition(),this.updateCursorPointer(),this.setInteractivityState({isInited:!0,isSuspended:t,scrollContainerInShow:j(this.scrollContainer)}),this.initPublicApi(),this.triggerInited(),t||this.startAnimation(!0)}initPublicApi(){const t="css"===this.animationType?"animation":`${this.animationType}Animation`;this.api=new gt(this),this.element[t]=this.api}async createSteps(){this.updateInitialDomMatrix(),this.steps=this.options.steps.map((({animationParams:t,...e})=>({pointerEvents:!0,distance:0,...e,id:e.id||V(),state:{inSeek:!1,inPlay:!1,isCompleted:!1,isLoopCompleted:!1,isActive:!1}}))),this.steps.reduce(((t,e,i)=>{const s={...this.options.steps[i].animationParams};return s&&this.skewIsNotAvailable&&(s.skewX=0,s.skewY=0),"scroll"===this.interactionType&&"play"===this.interactionSettings.seekMode&&(s.loop=1,s.delay=0,s.playMode="normal"),e.animation=this.animationModule.create({element:this.element,animationParams:s,initialAnimationFrame:null!=t&&t.animation?t.animation.endFrame:null,initialDomMatrix:this.initialDomMatrix,onChange:()=>{this.updateTotalProgress(),this.triggerChange()}}),e}),null),await Promise.all(this.steps.map((t=>new Promise((async(e,i)=>{try{await t.animation.init(),e(!0)}catch(t){i(t)}}))))),this.updateProgressRanges()}createInteractivitySettings(){var t,e;let i=[];null!=(t=this.interactionSettings.triggerElements)&&t.length&&(i=(t=>{const e=new Map,i=[],s=t.length;let n=0;for(let a=0;a<s;a++){const s=t[a];e.has(s)||(e.set(s,1),i[n++]=s)}return e.clear(),i})(this.interactionSettings.triggerElements.map((t=>{return"%current%"===t?this.element:(e=t)instanceof Element||e instanceof HTMLDocument?t:D(t,this.scrollContainer,this.element);var e})).flat().filter((t=>t)))),null!=(e=this.interactionSettings.triggerElements)&&e.length&&i.length||(i=[this.element]),this.interactionSettings.triggerElements=i,"reverse"===this.interactionSettings.retriggerBehavior&&(this.interactionSettings.playMode="normal")}async startAnimation(t=!0){this.hasInteractivityState("isSuspended")||(this.stopAnimation(),this.updatePointerLess(),this.resetTransition(),this.eventsAbortController=new AbortController,t&&await this.setActiveStep(0),"none"===this.interactionType?requestAnimationFrame((()=>{this.chainedInteractionHandler()})):"click"===this.interactionType?this.startOnClick():"hold"===this.interactionType?this.startOnHold():"hover"===this.interactionType?this.isTouch?this.startOnHold():this.startOnHover():"screen"===this.interactionType?this.startOnScreen():"scroll"===this.interactionType?this.startOnScroll():"cursor"===this.interactionType?this.startOnCursor():"trigger"===this.interactionType&&this.startOnTrigger())}async setActiveStep(t,{fromSnapshot:e,force:i}={}){if(T(t,[0,this.steps.length-1])){const s=this.steps[t];return(i||this.activeStepIndex!==t)&&(this.activeStep&&(this.stopAnimationStep(!1),this.setStepState({inSeek:!1,inPlay:!1,isCompleted:!0,isLoopCompleted:!1,isActive:!1})),await s.animation.activateAnimation({fromSnapshot:e})),this.activeStepIndex=t,this.activeStep=s,this.setStepState({inSeek:!1,inPlay:!1,isCompleted:!1,isLoopCompleted:!1,isActive:!0}),!0}return!1}triggerHandler(t,e=null,i={}){e=e||t;const{triggerElements:s,retriggerBehavior:n}=this.interactionSettings,a=t===e;i={listenReverseOnDocument:!1,reverseTriggerRestart:!0,elements:s,...i};let o=!1,r=!0,l=!0;const h=t=>{!t.isTrusted&&(t instanceof MouseEvent||t instanceof PointerEvent)||(o=!a||!o,d(),r=!1,l=!1)},c=t=>{!t.isTrusted&&(t instanceof MouseEvent||t instanceof PointerEvent)||l||!i.reverseTriggerRestart&&"restart"===n||(o=!1,setTimeout((()=>{d()}),1))},d=()=>{if(r||"restart"===n)null==i.onStartHandler||i.onStartHandler(),this.chainedInteractionHandler(!1,!0);else if("pause"===n)this.hasInteractivityState("isCompleted")||(o?(this.chainedInteractionHandler(),this.triggerAnimationUnpause()):(this.stopAnimation(!1,!1),this.triggerAnimationPause(),this.triggerStepLoopComplete()));else if("reverse"===n){const t=!this.hasInteractivityState("inReverseBehaviour");!t&&o?(null==i.onStartHandler||i.onStartHandler(),this.chainedInteractionHandler()):t&&!o&&(null==i.onReverseHandler||i.onReverseHandler(),this.triggerStepLoopComplete(),this.chainedInteractionHandler(!0))}else"reset"===n&&(o?(null==i.onStartHandler||i.onStartHandler(),this.chainedInteractionHandler(!1,!0)):(this.stopAnimationStep(),this.activateStep(0),this.setInteractivityState({inReverseBehaviour:!1})))};i.elements.forEach((s=>{const n=/touch/.test(t)||/touch/.test(e);s.addEventListener(t,h,{signal:this.eventsAbortController.signal}),a||i.listenReverseOnDocument||s.addEventListener(e,c,{signal:this.eventsAbortController.signal}),n&&s.addEventListener("contextmenu",(t=>(t.preventDefault(),t.stopPropagation(),!1)),{signal:this.eventsAbortController.signal}),this.changeUserSelect(!n,s)})),i.listenReverseOnDocument&&document.addEventListener(e,c,{signal:this.eventsAbortController.signal})}startOnClick(){const t="none"===this.interactionSettings.retriggerBehavior,e=this.isTouch?"touchstart":"click";this.triggerHandler(e,e,{onStartHandler:()=>{t&&!this.hasInteractivityState("preventCursorPointer")&&(this.setInteractivityState({preventCursorPointer:!0}),this.updateCursorPointer())}})}startOnHold(){const t="none"===this.interactionSettings.retriggerBehavior,e=this.isTouch?"touchstart":"pointerdown",i=this.isTouch?"touchend":"pointerup";this.triggerHandler(e,i,{listenReverseOnDocument:!0,reverseTriggerRestart:!1,onStartHandler:()=>{t&&!this.hasInteractivityState("preventCursorPointer")&&(this.setInteractivityState({preventCursorPointer:!0}),this.updateCursorPointer())}})}startOnHover(){this.triggerHandler("pointerenter","pointerleave",{reverseTriggerRestart:!1})}startOnTrigger(){let{triggerEvent:t,triggerAnimationItem:e}=this.interactionSettings;e&&(t=`${e}:${t}`),this.triggerHandler(t,t)}async startOnScreen(){this.triggerHandler("intersection-in","intersection-out",{elements:[this.element]}),this.hasInteractivityState("wasIntersection")?this.chainedInteractionHandler():vt.expectIntersection(this)}async startOnScroll(){this.interactionSettings.fixed&&this.updateInitialValues(),await this.setActiveStep(0),this.scrollInteractionHandler(!0),"seek"===this.interactionSettings.seekMode&&setTimeout((()=>{this.startSmooting()}),20)}async startOnCursor(){this.cursorInteractionHandler(),this.element.ownerDocument.addEventListener("pointermove",(t=>this.cursorInteractionHandler(t)),{signal:this.eventsAbortController.signal}),"seek"===this.interactionSettings.seekMode&&setTimeout((()=>{this.startSmooting()}),20)}async cursorInteractionHandler(t={clientX:0,clientY:0}){const{seekAxis:e,seekMode:i}=this.interactionSettings,{left:s}=this.triggerElementOffsetBound,n=this.triggerElementOffsetBound.top,a="x"===e?t.clientX-s:t.clientY-n;let o=this.steps.findIndex((t=>T(a,t.activityDistanceRange)));if(o!==this.activeStepIndex&&await this.setActiveStep(o),"seek"===i){const{activityDistanceRange:t}=this.activeStep,e=a-Math.min(...t),i=Math.abs(t[0]-t[1]),s=F(0,100*(e/i||0),100);this.seek(s)}}async chainedInteractionHandler(t=!1,e=!1){this.stopAnimationStep(!1,!1),e&&(await this.setActiveStep(0),this.activeAnimationIteration=0),this.hasInteractivityState("inPlay")||this.triggerAnimationStart(),this.setInteractivityState({inPlay:!0,inReverseBehaviour:!!t,isCompleted:!1});const{loop:i,playMode:s}=this.interactionSettings,n=i&&"number"==typeof i?i:1/0,a=!0===i?-1/0:0;let o="bounce"===s?2*n:n,r=this.hasInteractivityState("inReverseBehaviour"),l=!0,h=!0;for(this.activeAnimationIteration=F(a,this.activeAnimationIteration||0,o-1);this.activeAnimationIteration>=a&&this.activeAnimationIteration<o;){this.setInteractivityState({inReverse:"bounce"===s?this.activeAnimationIteration%2!=0:r});const t=this.hasInteractivityState("inReverse");for(this.triggerAnimationLoopStart(),h||"normal"!==s||(r||this.activeStepIndex!==this.steps.length-1||await this.setActiveStep(0),r&&0===this.activeStepIndex&&await this.setActiveStep(this.steps.length-1));;){l||(e=!0),l=!1,await this.play({reverse:t,forceRestart:!0,resetProgress:e});const i=this.activeStepIndex+(t?-1:1);if(!await this.setActiveStep(i))break}this.triggerAnimationLoopComplete(),this.activeAnimationIteration+=r?-1:1,h=!1}this.setInteractivityState({inPlay:!1,inReverse:!1,isCompleted:!0}),this.triggerAnimationComplete()}async scrollInteractionHandler(t=!1){const{seekMode:e,fixed:i,reverseSeekBehavior:s}=this.interactionSettings;let n=this.triggerElementOffsetBound.top-this.scrollContainer.scrollTop;const a=n>this._maxElementOffsetTop,o=a&&"stop"===s;if(a?o&&(n=this._maxElementOffsetTop):this._maxElementOffsetTop=n,!this.steps[0].activityDistanceRange||!this.steps[0].activityDistanceRange.length)return;const r=this.steps[0].activityDistanceRange[0],l=this.steps[this.steps.length-1].activityDistanceRange[1];let h=this.steps.findIndex((t=>T(n,t.activityDistanceRange)));const c=this.activeStep,d=h<this.activeStepIndex?c.animation.animationParams:{};if(-1===h?(this.setInteractivityState({inSeek:!1}),n<l?(h=this.steps.length-1,this.hasInteractivityState("isCompleted")||(this.triggerAnimationLoopComplete(),this.triggerAnimationComplete(),this.setInteractivityState({isCompleted:!0})),"seek"===e&&(this.hasStepState("isCompleted")||(this.triggerStepComplete(),this.setStepState({isCompleted:!0})),this.hasStepState("isLoopCompleted")||(this.triggerStepLoopComplete(),this.setStepState({isLoopCompleted:!0})))):n>r&&(h=0)):this.hasInteractivityState("inSeek")||(this.setInteractivityState({inSeek:!0,isCompleted:!1}),h>this.activeStepIndex&&(this.triggerAnimationStart(),this.triggerAnimationLoopStart())),h===this.activeStepIndex){if("play"===e)return}else"seek"===e&&h>this.activeStepIndex&&(this.hasStepState("isLoopCompleted")||(this.triggerStepLoopComplete(),this.setStepState({isLoopCompleted:!0})),this.hasStepState("isCompleted")||(this.triggerStepComplete(),this.setStepState({isCompleted:!0}))),o||await this.setActiveStep(h,{fromSnapshot:"play"===e}),"seek"!==e||this.hasStepState("inSeek")||(this.triggerStepLoopStart(),this.triggerStepStart()),this.updatePointerLess();if(this.stopAnimationStep(),"seek"===e){const{activityDistanceRange:e}=this.activeStep,s=100-100*((n-Math.min(...e))/Math.max(Math.abs(e[0]-e[1]),1)||0),a=T(s,[1e-7,100])&&i,r=(!a&&!this.allowNativePositionFixed||!this.allowNativePositionFixed)&&this.allowFixed||o&&!this.allowNativePositionFixed?this.getFixedOffsetTop(s):0;this.seek(s,r),this.toggleFixed(a&&!o,t)}else"play"===e&&this.play({resetProgress:!0,forceRestart:!0,animationParams:{...this.activeStep.animation.animationParams,...d,transformOrigin:"center"}})}toggleFixed(t,e=!1){if(this.hasInteractivityState("isSuspended"))return;const i=this.hasInteractivityState("inFixed");var s;if(e=i!==t||e,t&&this.allowFixed&&this.allowNativePositionFixed){if(i||(this.setInteractivityState({inFixed:!0}),this.triggerFixed()),!i||e){const t=getComputedStyle(this.element),e=["relative","static"].includes(t.position),i=`${this.elementOffsetBound.width}px`,s=`${this.elementOffsetBound.height}px`,n=this.elementOffsetBound.top-this.triggerElementOffsetBound.top;if(e){const e=`${t.marginTop} ${t.marginRight} ${t.marginBottom} ${t.marginLeft}`;this.fixedReplacementElement||(this.fixedReplacementElement=document.createElement("div"),this.element.before(this.fixedReplacementElement)),this.fixedReplacementElement.style.setProperty("visibility","hidden"),this.fixedReplacementElement.style.setProperty("pointer-events","none"),this.fixedReplacementElement.style.setProperty("margin",e,"important"),this.fixedReplacementElement.style.setProperty("width",i,"important"),this.fixedReplacementElement.style.setProperty("height",s,"important")}this.element.style.setProperty("width",i,"important"),this.element.style.setProperty("min-width",i,"important"),this.element.style.setProperty("max-width",i,"important"),this.element.style.setProperty("height",s,"important"),this.element.style.setProperty("min-height",s,"important"),this.element.style.setProperty("max-height",s,"important"),this.element.style.setProperty("flex-basis","unset","important"),this.element.style.setProperty("margin","0","important"),this.element.style.setProperty("position","fixed","important"),this.element.style.setProperty("top",`${z(this.intersectionLinePosition,this.scrollContainer.clientHeight,"%")+n}px`,"important"),this.element.style.setProperty("left",`${this.elementOffsetBound.left}px`,"important")}}else i&&(this.setInteractivityState({inFixed:!1}),this.triggerUnfixed()),(i||e)&&(this.element.style.removeProperty("position"),this.element.style.removeProperty("top"),this.element.style.removeProperty("left"),this.element.style.removeProperty("width"),this.element.style.removeProperty("min-width"),this.element.style.removeProperty("max-width"),this.element.style.removeProperty("height"),this.element.style.removeProperty("min-height"),this.element.style.removeProperty("max-height"),this.element.style.removeProperty("flex-basis"),this.element.style.removeProperty("margin"),this.interactionSettings.fixed&&this.allowFixed&&this.allowNativePositionFixed&&(this.element.style.setProperty("position","absolute"===this._initialPositionType?"absolute":"relative","important"),this.element.style.setProperty("top",`${R(this._initialTopValue)+this.getFixedOffsetTop(this.progress)}px`))),this.fixedReplacementElement&&(null==(s=this.fixedReplacementElement)||s.remove(),this.fixedReplacementElement=null)}startSmooting(t=0,e="ease-out"){const{seekSmoothing:i}=this.interactionSettings;this.element.style.setProperty("transition",`transform ${t||i}s ${e}, opacity ${t||i}s ${e}, clip-path ${t||i}s ${e}`,"important")}resetTransition(){this.element.style.setProperty("transition","transform 0s linear, opacity 0s linear, clip-path 0s linear","important")}getFixedOffsetTop(t){const{activityDistanceRange:e}=this.activeStep||{},{fixed:i}=this.interactionSettings;return i&&e?-O(e[0],e[1],F(0,t/100,1))+this.intersectionLinePosition:0}getWindowClientHeight(){return this.scrollContainer.closest("html").clientHeight}async play({forceRestart:t,resetProgress:e,reverse:i,animationParams:s}={}){return!(!t&&this.hasStepState("inPlay"))&&(await this.activeStep.animation.play({resetProgress:e,reverse:i,animationParams:s,onStart:()=>{this.hasStepState("inPlay")||this.triggerStepStart(),this.setStepState({inPlay:!0,isCompleted:!1}),this.updatePointerLess()},onLoopStart:()=>{this.triggerStepLoopStart(),this.setStepState({isLoopCompleted:!1})},onLoopComplete:()=>{this.setStepState({isLoopCompleted:!0}),this.triggerStepLoopComplete()},onComplete:()=>{this.setStepState({inPlay:!1,isCompleted:!0}),this.triggerStepComplete()}}),!0)}async seek(t,e=0){requestAnimationFrame((()=>{this.setStepState({inSeek:!0}),this.activeStep.animation.seek(t,e)}))}updateProgressRanges(){const{seekMode:t}=this.interactionSettings,e=["scroll"].includes(this.interactionType)&&"seek"===t,i=this.getWindowClientHeight(),s=this.steps.reduce(((t,s)=>{if(e){const{height:e}=this.elementOffsetBound;return t+z(s.distance||1,i+e,"%")}return t+s.animation.valueForProgressFartor}),0);this.steps.reduce(((t,i,n)=>{let a=(n+1)/this.steps.length*(100+t),o=i.animation.valueForProgressFartor;const r=this.getWindowClientHeight();if(e){const{height:t}=this.elementOffsetBound;o=z(i.distance||1,r+t,"%")}return s&&(a=F(0,t+o/s*100,100)),this.steps.length-1===n&&(a=Math.round(a)),i.progressRange=[t,a],a}),0)}updateInsectionLinePosition(){const{intersectionLine:t,intersectionLineOffset:e}=this.interactionSettings,i=this.getWindowClientHeight(),s=z(e,i,"%");t&&(this.intersectionLinePosition=this.scrollContainer.clientHeight*{top:0,center:.5,bottom:1}[t]+s,this.intersectionLinePosition>this.triggerElementOffsetBound.top&&(this.intersectionLinePosition=this.triggerElementOffsetBound.top),this.updateActivityDistanceRanges())}updateActivityDistanceRanges(){if("scroll"===this.interactionType||"screen"===this.interactionType){const t=this.getWindowClientHeight();this.steps.forEach(((e,i,s)=>{const n=s[i-1];let a=this.intersectionLinePosition;const o=z(e.distance,t,"%");n&&n.activityDistanceRange&&(a=n.activityDistanceRange[1]),e.activityDistanceRange=[a,a-o]}))}else if("cursor"===this.interactionType){const{seekAxis:t}=this.interactionSettings,{height:e,width:i}=this.triggerElementOffsetBound,s="x"===t?i:e;this.steps.forEach(((t,e,i)=>{const n=i[e-1];let a=0;const o=z(t.distance,s,"%");n&&n.activityDistanceRange&&(a=n.activityDistanceRange[1]),t.activityDistanceRange=[a,a+o]}))}}updateInitialDomMatrix(){this.initialDomMatrix=function(t){var e;if(!t)return null;const i=null==(e=t.style)?void 0:e.transform;i&&t.style.removeProperty("transform");const s=rt(t);return t.style.transform=i,s}(this.element)}updateScrollPosition(){if("scroll"!==this.interactionType||this.hasInteractivityState("isSuspended"))return;const t=this.activeStep.animation.progress,{activityDistanceRange:e}=this.activeStep;if(!e)return;const i=-O(e[0],e[1],t/100),s=this.triggerElementOffsetBound.top+i;s>0&&requestAnimationFrame((()=>{this.scrollContainer.scrollTop=s}))}updateOffsetBound(){var t,e;const i=this.interactionSettings.triggerElements[0];var s;(this.fixedReplacementElement&&this.fixedReplacementElement.style.setProperty("display","none"),null!=i&&null!=(t=i.animation)&&null!=(t=t.interaction)&&t.fixedReplacementElement)&&(null==i||null==(s=i.animation)||null==(s=s.interaction)||s.fixedReplacementElement.style.setProperty("display","none"));const n=H(this.element),a=i&&i!==this.element?H(i):n;var o;(this.elementOffsetBound=n,this.triggerElementOffsetBound=a,null!=i&&null!=(e=i.animation)&&null!=(e=e.interaction)&&e.fixedReplacementElement)&&(null==i||null==(o=i.animation)||null==(o=o.interaction)||o.fixedReplacementElement.style.removeProperty("display"));this.fixedReplacementElement&&this.fixedReplacementElement.style.removeProperty("display")}updateInitialValues(){const t=this.element.style.top,e=this.element.style.position;this.element.style.removeProperty("top"),this.element.style.removeProperty("position");const i=getComputedStyle(this.element);this._initialTopValue=i.top,this._initialPositionType=i.position,this.element.style.setProperty("top",t),this.element.style.setProperty("position",e)}updatePointerLess(){this.activeStep&&this.element.classList.toggle("interactivity-pointerless",!this.activeStep.pointerEvents)}removePointerLess(){this.element.classList.remove("interactivity-pointerless")}changeUserSelect(t,e=this.element){e.classList.toggle("interactivity-user-select-none",!t)}updateCursorPointer(){const t=["click","hold"].includes(this.interactionType)&&!this.hasInteractivityState("preventCursorPointer");this.interactionSettings.triggerElements.forEach((e=>{e.classList.toggle("interactivity-cursor-pointer",t)}))}updateTotalProgress(){if(!this.activeStep)return;const{progressRange:t,animation:e}=this.activeStep;this.progress=O(t[0],t[1],e.progress/100)}setStepState(t,e=this.activeStep){e.state={...e.state,...t}}hasStepState(t,e=this.activeStep){return e.state[t]}setInteractivityState(t){this.state={...this.state,...t}}hasInteractivityState(t){return this.state[t]}triggerChange(){var t,e,i;null==(t=(e=this.options).onChange)||t.call(e,{progress:this.progress,progressInStep:null==(i=this.activeStep)||null==(i=i.animation)?void 0:i.progress,step:this.activeStep,stepIndex:this.activeStepIndex,elementOffsetBound:this.elementOffsetBound}),this.element.dispatchEvent(new Event("interactivity_change"))}triggerStartPreview(){var t,e;null==(t=(e=this.options).onStartPreview)||t.call(e),this.element.dispatchEvent(new Event("interactivity_start_preview"))}triggerStopPreview(){var t,e;null==(t=(e=this.options).onStopPreview)||t.call(e),this.element.dispatchEvent(new Event("interactivity_stop_preview"))}triggerStepStart(){var t,e;this.activeStep&&(null==(t=(e=this.options).onStepStart)||t.call(e,{progress:this.progress,progressInStep:this.activeStep.animation.progress,step:this.activeStep,stepIndex:this.activeStepIndex}),this.element.dispatchEvent(new Event(`${this.id}:${this.activeStep.id}:start`,{bubbles:!0})))}triggerStepLoopStart(){var t,e;this.activeStep&&(null==(t=(e=this.options).onStepLoopStart)||t.call(e,{progress:this.progress,progressInStep:this.activeStep.animation.progress,step:this.activeStep,stepIndex:this.activeStepIndex}),this.element.dispatchEvent(new Event(`${this.id}:${this.activeStep.id}:loopstart`,{bubbles:!0})))}triggerStepComplete(){var t,e;this.activeStep&&(null==(t=(e=this.options).onStepComplete)||t.call(e,{progress:this.progress,progressInStep:this.activeStep.animation.progress,step:this.activeStep,stepIndex:this.activeStepIndex}),this.element.dispatchEvent(new Event(`${this.id}:${this.activeStep.id}:complete`,{bubbles:!0})))}triggerStepLoopComplete(){var t,e;this.activeStep&&(null==(t=(e=this.options).onStepLoopComplete)||t.call(e,{progress:this.progress,progressInStep:this.activeStep.animation.progress,step:this.activeStep,stepIndex:this.activeStepIndex}),this.element.dispatchEvent(new Event(`${this.id}:${this.activeStep.id}:loopcomplete`,{bubbles:!0})))}triggerAnimationStart(){var t,e;null==(t=(e=this.options).onAnimationStart)||t.call(e,{progress:this.progress,progressInStep:this.activeStep.animation.progress,step:this.activeStep,stepIndex:this.activeStepIndex}),this.element.dispatchEvent(new Event(`${this.id}:start`,{bubbles:!0}))}triggerAnimationPause(){var t,e;null==(t=(e=this.options).onAnimationPause)||t.call(e,{progress:this.progress,progressInStep:this.activeStep.animation.progress,step:this.activeStep,stepIndex:this.activeStepIndex}),this.element.dispatchEvent(new Event(`${this.id}:pause`,{bubbles:!0})),this.element.dispatchEvent(new Event(`${this.id}:${this.activeStep.id}:pause`,{bubbles:!0}))}triggerAnimationUnpause(){var t,e;null==(t=(e=this.options).onAnimationPause)||t.call(e,{progress:this.progress,progressInStep:this.activeStep.animation.progress,step:this.activeStep,stepIndex:this.activeStepIndex}),this.element.dispatchEvent(new Event(`${this.id}:unpause`,{bubbles:!0})),this.element.dispatchEvent(new Event(`${this.id}:${this.activeStep.id}:unpause`,{bubbles:!0}))}triggerAnimationLoopStart(){var t,e;null==(t=(e=this.options).onAnimationLoopStart)||t.call(e,{progress:this.progress,progressInStep:this.activeStep.animation.progress,step:this.activeStep,stepIndex:this.activeStepIndex}),this.element.dispatchEvent(new Event(`${this.id}:loopstart`,{bubbles:!0}))}triggerAnimationComplete(){var t,e;null==(t=(e=this.options).onAnimationComplete)||t.call(e,{progress:this.progress,progressInStep:this.activeStep.animation.progress,step:this.activeStep,stepIndex:this.activeStepIndex}),this.element.dispatchEvent(new Event(`${this.id}:complete`,{bubbles:!0}))}triggerAnimationLoopComplete(){var t,e;null==(t=(e=this.options).onAnimationLoopComplete)||t.call(e,{progress:this.progress,progressInStep:this.activeStep.animation.progress,step:this.activeStep,stepIndex:this.activeStepIndex}),this.element.dispatchEvent(new Event(`${this.id}:loopcomplete`,{bubbles:!0}))}triggerFixed(){var t,e;null==(t=(e=this.options).onFixed)||t.call(e),this.element.dispatchEvent(new Event(`${this.id}:fixed`,{bubbles:!0}))}triggerUnfixed(){var t,e;null==(t=(e=this.options).onUnfixed)||t.call(e),this.element.dispatchEvent(new Event(`${this.id}:unfixed`,{bubbles:!0}))}triggerInited(){var t,e;null==(t=(e=this.options).onInited)||t.call(e),this.element.dispatchEvent(new Event(`${this.id}:inited`,{bubbles:!0})),this.element.dispatchEvent(new Event("onAnimationInited"))}triggerIntersection(t="in"){var e,i;null==(e=(i=this.options).onIntersection)||e.call(i,t),this.element.dispatchEvent(new Event("intersection",{bubbles:!1})),this.element.dispatchEvent(new Event(`intersection-${t}`,{bubbles:!1}))}}window.Interactivity||(window.Interactivity=vt);const yt=[".layout-type-header",".layout-type-tabs",".layout-type-column",".layout-type-product",".flexbe-cards-container.mode-slider",".content-zone--vertical.bg-element",".content-zone--vertical:not(.bg-element) .element-item--static",".flexbe-card:not(.swiper-slide)",".quiz-progress",".step-title",".quiz-fields"].join(","),wt=[".free-area .element-item"].join(",");var bt={startTransitions(t){const e=$(t);if(flexbe_cli.is_admin)return e.addClass("was-view"),void e.removeClass("wait-animation");const i=e.find(wt);let s=e.find(yt);s=s.filter(((t,e)=>0===$(e).find(s).length));const n=Math.min(80,1e3/s.length),a=1e3+s.length*n;s.css("--transitionDelay",(t=>t*n+"ms")),s.addClass("transition-target"),i.addClass("transition-target"),setTimeout((()=>{e.addClass("was-view")}),200),setTimeout((()=>{this.stopTransition(e,s)}),200+a)},stopTransition(t,e){const i=$(t);let s=$(e);s.length||(s=i.find(e),s=s.filter(((t,e)=>0===$(e).find(s).length))),i.removeClass("wait-animation"),s.removeClass("transition-target"),s.css("--transitionDelay",""),i.trigger("flexbe-transition-end")}};class $t{static create(){return new this}constructor(){this.animationsData=[],this.interactionInstances=[],this.responsiveMode=flexbe_cli.resize.responsiveMode,this.observableLoopSliderElements=[],this.observableTabs=[],this.slidersEventsMap=new Map,this.init()}async init(){this.findAnimations(),this.animationsData.length&&(await this.require(),this.createAnimations()),this.bindEvents()}bindEvents(){window.addEventListener("resized",(()=>{const t=flexbe_cli.resize.responsiveMode;t!==this.responsiveMode&&(this.responsiveMode=t,this.updateAnimations())})),flexbe_cli.is_admin&&flexbe_cli.events.off("hideShowUI.global-animation-component").on("hideShowUI.global-animation-component",(t=>{"preview"===t?(this.findAnimations(),this.createAnimations()):this.destroyAnimations()}))}findAnimations(){this.animationsData=[],$("[data-flexbe-animations]").each(((t,e)=>{const i=JSON.parse(e.getAttribute("data-flexbe-animations"));i.forEach((t=>{t.element=e})),i&&i.length&&this.animationsData.push(...i),e.animationsOptions=i,e.removeAttribute("data-flexbe-animations")}))}async require(){await new Promise((t=>flexbe_cli.require(["/_s/lib/interactivity/index.min.js"],(()=>t(!0)))))}async createAnimation(t){var e;const i=null==t||null==(e=t.responsive)?void 0:e[this.responsiveMode];if(i)if(i.enabled){var s;const e=(null==t||null==(s=t.responsive)?void 0:s[i.inherit])||i,n=t.element.closest(".swiper-slide"),a=t.element.closest(".wait-animation"),o=t.element.parentNode.closest(".has-animation"),r=t.element.closest(".animation--slide_up"),l="scroll"===e.interactionType&&e.interactionSettings.fixed;r&&l&&bt.stopTransition(a);const h=await vt.create({id:t.id,element:t.element,allowNativePositionFixed:!n&&!o,normalizeIntersectionState:(t,e)=>{if("screen"===e.interactionType){const n=e.interactionSettings.triggerElements[0],a=n.closest(".swiper-slide"),o=n.closest(".tab-content");if(a||o){let e=!0;if(o&&(e=e&&o.classList.contains("active")),a){var i,s;const t=a.getAttribute("data-item-id"),n=null!=(i=null==(s=a.closest(".swiper"))||null==(s=s.swiper)?void 0:s.slides)?i:[],o=[a,...n.filter((e=>e.getAttribute("data-item-id")===t))];e=e&&o.some((t=>t.classList.contains("swiper-slide-visible")))}return e&&"in"===t?"in":"out"}}return t},...e,normalizeOptions:t=>({...t,steps:t.steps.map((t=>{const e={...t};return t.animationParams.skewEnabled||(delete e.animationParams.skewX,delete e.animationParams.skewY),t.animationParams.clipPathEnabled||delete e.animationParams.clipPath,e}))})});h.setProgress(0,!1),this.interactionInstances.push(h),this.walkTriggerElements({interaction:h}),$(a).off("flexbe-transition-end").one("flexbe-transition-end",(async()=>{h.updateOffsetBound()}))}else vt.removeAnimationStyles(t.element)}createAnimations(){flexbe_cli.run.is_preview&&this.animationsData.forEach((t=>this.createAnimation(t)))}walkTriggerElements({interaction:t}){t.interactionSettings.triggerElements.forEach((e=>{const i=e.closest(".swiper"),s=e.closest(".tab-content");i&&(i.swiper?this.sliderNormalizationsInit({swiper:i.swiper,triggerElement:e,interaction:t}):i.addEventListener("swiper:init",(()=>{setTimeout((()=>{this.sliderNormalizationsInit({swiper:i.swiper,triggerElement:e,interaction:t})}),50)}))),s&&this.tabNormalizationsInit({tabEl:s,interaction:t})}))}bindSliderEvents(t,e){this.slidersEventsMap.get(t)||this.slidersEventsMap.set(t,{});const i=this.slidersEventsMap.get(t);Object.entries(e).forEach((([e,s])=>{i[e]||(i[e]=[],t.on(e,(t=>{i[e].forEach((e=>e(t)))}))),i[e].push(s)}))}sliderNormalizationsInit({swiper:t,triggerElement:e,interaction:i}){if(!t||!i)return;const s=e.classList.contains("swiper-slide"),n=e.closest(".swiper-slide");if("screen"===i.interactionType&&n&&(this.bindSliderEvents(t,{slideChange:()=>{requestAnimationFrame((()=>{mt.checkIntersection(i)}))}}),mt.checkIntersection(i)),s&&(i.updateStyles(),this.bindSliderEvents(t,{setTranslate:()=>{requestAnimationFrame((()=>{i.updateStyles()}))},update:()=>i.updateStyles()})),t.params.loop){if(this.observableLoopSliderElements.includes(t.el))return;this.observableLoopSliderElements.push(t.el);const e=Array.from(t.slides||[]);e.filter((t=>t.classList.contains("swiper-slide-duplicate"))).forEach((t=>{const i=t.getAttribute("data-item-id"),s=e.find((t=>t.getAttribute("data-item-id")===i&&!t.hasAttribute("data-cloned"))),n=Array.from(t.querySelectorAll(".has-animation"));s.animationsOptions&&this.createAnimation({...s.animationsOptions[0],element:t}),n.forEach((t=>{var e;const i=t.getAttribute("data-id")||(null==(e=t.closest("[data-id]"))?void 0:e.getAttribute("data-id")),n=s.querySelector(`[data-id="${i}"].has-animation, [data-id="${i}"] .has-animation`);n&&n.animationsOptions&&this.createAnimation({...n.animationsOptions[0],element:t})}))}))}}tabNormalizationsInit({tabEl:t,interaction:e}){this.observableTabs.includes(t)||(this.observableTabs.push(t),t.addEventListener("element-become-visible",(()=>mt.checkIntersection(e))),t.addEventListener("element-become-hidden",(()=>mt.checkIntersection(e))))}updateAnimations(){flexbe_cli.run.is_preview&&(this.destroyAnimations(),this.createAnimations())}destroyAnimations(){this.interactionInstances.forEach((t=>vt.remove(t))),this.interactionInstances=[]}}const St={},xt=new Map,Ct={},At=t=>{const e=$(t),i=e.find("[data-component]").toArray();return e.each(((t,e)=>{$(e).is("[data-component]")&&i.unshift(e)})),i},It=(t,e)=>{xt.has(t)||xt.set(t,e),t.componentInstance=e},_t={registerComponent(t){St[t.is]=t},getComponentClass:t=>St[t],getInstances:t=>At(t).map((t=>xt.get(t))).filter(Boolean),getGlobalInstance:t=>Ct[t],setGlobalInstance(t,e){Ct[t]=e},init(){this.setGlobalInstance("autoWidth",d.create()),this.setGlobalInstance("lazyLoading",f.create()),this.setGlobalInstance("links",h.create()),this.setGlobalInstance("lightbox",I.create()),this.setGlobalInstance("sliderControl",P.create()),this.setGlobalInstance("animation",$t.create()),flexbe_cli.events.off(".core_components").on("hideShowUI.core_components",(t=>{Array.from(xt.values()).forEach((e=>e._onHideShowUI(t)))})),$(window).off(".core_components").on("resized.core_components",(()=>{Array.from(xt.values()).forEach((t=>t._onWindowResize()))}))},initInArea(t,i){s(At(t),10).forEach(e((t=>t.forEach((t=>this.initComponent(t,i))))))},destroyInArea(t){s(At(t),10).forEach(e((t=>t.forEach((t=>this.destroyComponent(t))))))},initComponent(t,e,i){if(e=e||"init",!(i=i||flexbe_cli.entity.closestCore(t)))return null;let s=t.componentInstance;if(s){if("update"!==e)return It(t,s),s;s.destroy()}const n=String(t.getAttribute("data-component")).trim(),a=i.components.find((t=>(null==t?void 0:t.is)===n))||this.getComponentClass(n);return"function"==typeof a&&(s=new a({component:t,core:i,reason:e}),s._onInit(),It(t,s)),s},destroyComponent(t){const e=t.componentInstance;e&&e.destroy(),(t=>{t.componentInstance=null,xt.delete(t)})(t)}};flexbe_cli.components=_t;const Et=2160;function Pt(){var t;const e="object"==typeof flexbe_cli&&(null==(t=flexbe_cli.vars)?void 0:t._project.images)||{};return{lazy:!0,lazy_priority:!1,avif:!1,webp:!1,avif_support:e.avif_support,webp_support:e.webp_support,slow_network:!1,quality_map:{jpg:70,webp:70,avif:55}}}async function kt(t){return new Promise(((e,i)=>{const s=new Image,n=()=>{e(s),setTimeout((()=>{"function"==typeof s.remove&&s.remove()}),10)};"decode"in s&&!/\.svg/.test(t)?(s.src=t,s.decode().then(n).catch(i)):(s.onerror=i,s.onload=n,s.src=t)}))}function Ft(t,e){const i=e.avif_support,s=e.webp_support,n=e.avif,a=e.webp;let o=t.ext;return i&&n?o="avif":s&&a?o="webp":"webp"===t.ext&&(o=s?"webp":t.transparent?"png":"jpg"),o}function Tt(t){if("string"==typeof t&&(t=function(t){if("string"!=typeof t)return t;t=t.replace(/(\/img\/[\d_q]+)\/[\w-]+(\.\w{3,4})/i,"$1$2");let[,e,i,s,n]=t.match(/\/img\/(\d+)_?(\d+)?_?q?(\d+)?\.(\w{3,4})/i)||[];return i=i?+i:0,s=s?+s:"none",{id:e,ext:n,name:`${e}.${n}`,size:i,quality:s}}(t)),!t||"object"!=typeof t)return{};let e=t.img_ext||t.ext;const i=t.img_id||t.id,s=t.img_name||t.name;e&&"false"!==e||(e=s?function(t){const e=String(t).match(/\.(jpg|jpeg|png|gif|svg|bmp|webp)$/i);return e&&e[1]?e[1]:""}(s):"jpg");const n=t.img_border||t.border;return{id:i,ext:e,average:function(t){return"transparent"!==t?t:"#000000"}(t.img_average||t.average),preview:t.img_preview||t.preview||"",width:t.img_width||t.width||0,height:t.img_height||t.height||0,proportion:+(+t.img_proportion||+t.proportion||0).toFixed(2),border:n,animated:t.img_animated||t.animated||"gif"===e,transparent:t.img_transparent||t.transparent||0}}function Dt(t,e=0,i){return function(t,e=null,i=null){var s;i={...Pt(),...i};const{id:n,ext:a}=t;if(!n)return"";e||"webp"!==t.ext||i.webp_support||(e=Math.min(t.width||Et,Et));const o=null!=(s=t.animated)?s:"gif"===a,r=`/img/${n}.${a}`;if(!e||o||"svg"===a)return r;const l=Ft(t,i),h=i.slow_network&&Mt();let c=i.quality_map;switch(h&&(c={jpg:50,webp:50,avif:45}),l){case"png":return`/img/${n}_${e}.png`;case"avif":case"webp":case"jpg":return`/img/${n}_${e}_q${c[l]}.${l}`;default:return r}}(Tt(t),"number"==typeof e?Math.round(e):e,i)}async function Rt(t){let e=t,i=+t.proportion;if(i&&(i<2||i<5&&i%1>0)&&(i*=100),"string"==typeof e||!i){"object"==typeof e&&(e=Dt(t,50));const s=await kt(e);i=s.naturalHeight/s.naturalWidth*100}return i}function Mt(){var t;if("undefined"==typeof navigator)return!1;return"4g"!==((null==(t=navigator.connection)?void 0:t.effectiveType)||"4g")}async function Lt(t,e,i){i={...Pt(),...i};const s=t.width||0,n=t.img_scale||t.scale||"cover",a=t.img_type||t.type||"background",o=e.height/e.width,r=await Rt(t)/100,l=i.slow_network&&Mt()?Math.min(1.5,self.devicePixelRatio):Math.min(2,self.devicePixelRatio),h=Ft(t,i);let c,d;return"image"===a||o>r&&"contain"===n||o<r&&"cover"===n?(c=e.width,d=c*r):(d=e.height,c=d/r),l>1&&(c*=l,d*=l),i.sizes&&(c=function(t,e){let i=(e=e.sort(((t,e)=>e-t)))[0];return e.forEach((e=>{t<i&&t<=e&&(i=e)})),i}(c,i.sizes),d=c*r),c<=150&&/webp|jpg/.test(h)&&(c=c/l*2,d=c*r),s&&c>s&&(c=s,d=c*r),c>Et&&(c=Et,d=c*r),{width:Math.ceil(c),height:Math.ceil(d)}}function Bt(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var zt=0;function Ot(t){return"__private_"+zt+++"_"+t}const Vt=new WeakMap,Ht=t=>{const{is:e,component:i}=t;Vt.has(i)||Vt.set(i,Math.floor(999999999*Math.random()));return`.component-${e}-${Vt.get(i)}`};var Wt=Ot("inheritEvents"),qt=Ot("syncStates");class Nt{get is(){return this.constructor.is}constructor({component:t,core:e,reason:i}){Object.defineProperty(this,qt,{value:Yt}),Object.defineProperty(this,Wt,{value:jt}),this.require=[],this.core=null,this.owner=null,this.root=null,this.component=null,this.$component=null,this.componentWidth=null,this.componentHeight=null,this.isInited=!1,this.isLoaded=!1,this.isUpdated=!1,this.isOpen=null,this.isVisible=null,this.inScreen=!1,this.inBeside=!1,this.inView=!1,this.inFocus=!1,this.wasVisible=null,this.wasScreen=!1,this.wasBeside=!1,this.wasView=!1,this.wasFocus=!1,this.core=e,this.owner=e.area,this.root=e.root,this.component=t,this.$component=$(t),this.isUpdated="update"===i}onInit(){}onLoad(){}onVisible(t){}onScreen(t){}onBeside(t){}onView(t){}onFocus(t){}onResize(t){}onOpen(t){}onClose(t){}onHideShowUI(t){}onDestroy(){}_clearEvents(){const t=Ht(this);$(this.owner).off(t),$(this.root).off(t)}_onInit(){this.isInited=!0,"function"==typeof this.onInit&&this.onInit(),Bt(this,qt)[qt](),Bt(this,Wt)[Wt](),flexbe_cli.require(this.require,(()=>this._onLoad()))}_onLoad(){this.isLoaded=!0,"function"==typeof this.onLoad&&this.onLoad(),this.require.length&&Bt(this,qt)[qt]()}_onVisible({state:t}){if(null==this.isVisible)return this.isVisible=t,void(this.wasVisible=t);const e=t&&!this.wasVisible;this.isVisible=t,this.onVisible({state:t,first:e}),t&&(this.wasVisible=!0)}_onScreen({state:t}){const e=t&&!this.wasScreen;this.inScreen=t,this.onScreen({state:t,first:e}),t&&(this.wasScreen=!0)}_onView({state:t}){const e=t&&!this.wasView;this.inView=t,this.onView({state:t,first:e}),t&&(this.wasView=!0)}_onBeside({state:t}){const e=t&&!this.wasBeside;this.inBeside=t,this.onBeside({state:t,first:e}),t&&(this.wasBeside=!0)}_onFocus({state:t}){const e=t&&!this.wasFocus;this.inFocus=t,this.onFocus({state:t,first:e}),t&&(this.wasFocus=!0)}_onResize(t){this.onResize(t)}_onOpen(t){this.isOpen=!0,Bt(this,qt)[qt](),this.onOpen(t)}_onClose(t){this.isOpen=!1,Bt(this,qt)[qt](),this.onClose(t)}_onWindowResize(){this.onWindowResize&&(Bt(this,qt)[qt](),this.onWindowResize())}_onHideShowUI(t){this.onHideShowUI(t)}destroy(){this._clearEvents(),this.onDestroy()}}function jt(){this._clearEvents();const t=Ht(this);$(this.owner).on(`tween${t}`,(t=>Bt(this,qt)[qt](t.detail))),$(this.root).on(`open${t}`,(t=>this._onOpen(t.detail))),$(this.root).on(`close${t}`,(t=>this._onClose(t.detail)))}function Yt({force:t=!1}={}){const e=null==this.componentWidth||null==this.componentHeight,i=this.core.isVisible,s=i&&this.component.offsetWidth||0,n=i&&this.component.offsetHeight||0,a=!(!s&&!n),o=a&&this.core.inBeside,r=a&&this.core.inScreen,l=a&&this.core.inView,h=a&&this.core.inFocus,c=this.componentWidth!==s,d=this.componentHeight!==n,p=t||a&&!e&&(c||d);a&&(this.componentWidth=s,this.componentHeight=n),a!==this.isVisible&&this._onVisible({state:a}),p&&this._onResize({force:t}),o!==this.inBeside&&this._onBeside({state:o}),r!==this.inScreen&&this._onScreen({state:r}),l!==this.inView&&this._onView({state:l}),h!==this.inFocus&&this._onFocus({state:h})}function Xt(t,e,i=1){return 1-t>i&&(t=i),(1-Math.cos(Math.PI*t*e))/2}Nt.is=null;const Gt=[0,"parallax","parallax-fade","zoom","zoom-return"];class Ut{constructor(t,e,i="parallax",s=null){this.imgParams={w:0,h:0,r:1,x:.5,y:.5},this.canvasSize={w:0,h:0,y:0},this.winSize={w:0,h:0},this.overlayOpacity=1,this.id=t,this.shouldRender=!1,this.mode="number"==typeof i?Gt[i]:i,this.fadeAnimation=this.mode.includes("fade"),this.parallaxFactor=this.mode.includes("fixed")?1:this.mode.includes("parallax")?.4:0,this.zoomFactor=this.mode.includes("zoom")?.2:0,this.zoomLimit="zoom"===this.mode?.5:"zoom-return"===this.mode?1:0,this.offCanvas=document.createElement("canvas"),this.offCtx=this.offCanvas.getContext("2d",{alpha:!1}),this.component=e[0],this.canvas=this.component.querySelector("canvas"),this.overlay=this.component.querySelector(".overlay"),this.ctx=this.canvas.getContext("2d",{alpha:!1}),this.init(s),this.reflow()}init(t){t&&t.url&&(this.img=document.createElement("img"),this.img.onload=()=>{this.ready=!0,this.imgParams={w:this.img.width,h:this.img.height,r:this.img.height/this.img.width,x:+t.x.replace("%","")/100,y:+t.y.replace("%","")/100},this.dispatchEvents(),this.draw(),requestAnimationFrame((()=>{$(this.canvas).addClass("ready")}))},this.img.src=t.url)}dispatchEvents(){flexbe_cli.events.off(`.bg_${this.id}`),$(window).off(`.bg_${this.id}`),$(window).on(`scroll.bg_${this.id}`,(()=>{this.draw()})),$(window).on(`resize.bg_${this.id}`,(()=>{this.reflow()})),flexbe_cli.is_admin&&(flexbe_cli.events.on(`entity_render.bg_${this.id}`,(t=>{t.styleRendered&&t.entity&&t.entity.id===this.id&&this.reflow()})),flexbe_cli.events.on(`layout_change.bg_${this.id}`,(()=>{this.reflow()})))}toggleRendering(t){this.shouldRender=t}getZoomCoords(t){let e=1;if(this.zoomFactor){const i=100-100*Xt(.01*t,2,this.zoomLimit);e=1+this.zoomFactor/100*i}const i={w:0,h:0,x:0,y:0};return i.w=this.canvasSize.w*e,i.h=this.canvasSize.h*e,i.x=(i.w-this.canvas.width)/2,i.y=(i.h-this.canvasSize.h)/2,i}reflow(){const t=this.canvas.getBoundingClientRect();this.canvasSize={w:t.width,h:t.height,y:t.top+window.pageYOffset};const{viewportWidth:e,viewportHeight:i}=flexbe_cli.resize;this.winSize.h=flexbe_cli.run.is_mobile?Math.max(this.winSize.h,i):i,this.winSize.w=e,this.fadeAnimation&&(this.overlayOpacity=parseFloat(getComputedStyle(this.component).getPropertyValue("--componentBgOpacity")||1)),this.draw()}draw(){if(!this.shouldRender||!this.ready||this.pending)return;this.pending=!0;const t=flexbe_cli.scroll.latest+this.winSize.h-this.canvasSize.y,e=100-t/(this.canvasSize.h+this.winSize.h)*100;this.drawOffscreen(),this.drawCanvas(t,e),this.drawOverlay(e),this.pending=!1}drawOffscreen(){const{canvasSize:t,zoomFactor:e,winSize:i,parallaxFactor:s,imgParams:n,offCanvas:a,offCtx:o,img:r}=this,l=e?t.h:t.h+(i.h-t.h)*s,h=t.w;let c=h,d=h*n.r,p=0,u=(d-l)*n.y*-1;l/h>n.r&&(c=l/n.r,d=l,p=(c-h)*n.x*-1,u=0),a.width!==h&&(a.width=h),a.height!==l&&(a.height=l),o.drawImage(r,p,u,c,d)}drawCanvas(t,e){if(this.canvas.width!==this.canvasSize.w&&(this.canvas.width=this.canvasSize.w),this.canvas.height!==this.canvasSize.h&&(this.canvas.height=this.canvasSize.h),this.zoomFactor){const i=this.getZoomCoords(e);try{this.ctx.drawImage(this.offCanvas,Math.ceil(-1*i.x),Math.ceil(t*this.parallaxFactor-this.winSize.h*this.parallaxFactor-i.y),i.w,i.h)}catch(t){}}else try{this.ctx.drawImage(this.offCanvas,0,Math.ceil((t-this.winSize.h)*this.parallaxFactor))}catch(t){}}drawOverlay(t){if(this.fadeAnimation&&this.overlay){const e=1-(1-this.overlayOpacity)*Xt(.01*t,2,1);this.overlay.style.setProperty("--componentBgOpacity",e)}}destroy(){var t,e;this.destroyed=!0,cancelAnimationFrame(this._raf),flexbe_cli.events.off(`.bg_${this.id}`),$(window).off(`.bg_${this.id}`),$(this.canvas).removeClass("ready"),null==(t=this.offCanvas)||t.remove(),null==(e=this.img)||e.remove()}}function Kt(t,e,i){let s;return"function"==typeof e&&"function"==typeof t&&(t()?e():(i&&setTimeout((()=>{clearInterval(s),e()}),i),s=setInterval((()=>{t()&&(clearInterval(s),e())}),25))),()=>clearInterval(s)}class Zt{constructor(t,e,i){this.destroyed=!1,this.background=t,this.core=t.core,this.$component=t.$component,this.video=e,"function"==typeof i&&(this.onInited=i),this.initVideo()}initVideo(){this.$container=$('<div class="layer video-holder"></div>'),this.insertVideo(),"custom"===this.video.type?this.initMP4():"vimeo"===this.video.type?this.initVimeo():"youtube"===this.video.type?this.initYoutube():"kinescope"===this.video.type?this.initKinescope():this.initEmbed(),$(document).on(`visibilitychange.bg_effect_${this.core.id}`,(()=>{this.background.onscreen&&!document.hidden&&setTimeout((()=>{this.play()}),50)}))}initVimeo(){let t=0;const e=()=>{const i=this.vPlayer;return Promise.all([i.getVideoWidth(),i.getVideoHeight()]).then((i=>{const[s,n]=i;return s/n<2.5&&s/n>.4||3===t?{width:s,height:n}:(t+=1,e())}))};flexbe_cli.require(["https://player.vimeo.com/api/player.js"],(()=>{this.destroyed||(this.vPlayer=new window.Vimeo.Player(this.$videoElement[0]),e().then((t=>(this.video.width=t.width,this.video.height=t.height,this.fitToSize(),this.play(),null))).catch((()=>{})))}))}initYoutube(){const t=()=>{this.yPlayer=new window.YT.Player(this.$videoElement[0],{events:{onReady:()=>{this.fitToSize(),this.play()}}})};window.YT||window.onYouTubeIframeAPIReady?window.onYouTubeIframeAPIReady?window.youtubeBGQueue.push(t):t():(window.onYouTubeIframeAPIReady=()=>{window.youtubeBGQueue.forEach((t=>t())),window.youtubeBGQueue=null,window.onYouTubeIframeAPIReady=null},window.youtubeBGQueue=[],window.youtubeBGQueue.push(t),flexbe_cli.require(["https://www.youtube.com/iframe_api"]))}initKinescope(){this.fitToSize(),this.ready(),flexbe_cli.require(["https://player.kinescope.io/latest/iframe.player.js"],(async()=>{this.destroyed||(this.kPlayer=await window.Kinescope.IframePlayer.create(this.$videoElement.attr("id"),{url:this.video.link,behavior:{background:!0,preload:"auto",loop:!0,muted:!0,autoPlay:"viewable",autoPause:!1}}),this.play())}))}initEmbed(){this.fitToSize(),this.play()}initMP4(){this.$videoElement[0].oncanplay=()=>{this.play()},this.$videoElement[0].onloadeddata=()=>{this.video.width=this.$videoElement[0].videoWidth,this.video.height=this.$videoElement[0].videoHeight,this.fitToSize(),this.ready()}}insertVideo(){"custom"===this.video.type?(this.$videoElement=$(`<video src="${this.video.link}"\n                       controlslist="nodownload"\n                       loop="true"\n                       muted="true"\n                       autoplay="true"\n                       playsinline="true"\n                       disablePictureInPicture\n                       disableRemotePlayback\n                       pip="false"\n                ></video>`),this.$videoElement[0].disablePictureInPicture=!0,this.$videoElement[0].disableRemotePlayback=!0):this.$videoElement=$(`<iframe \n                id="${crypto.randomUUID()}"\n                src="${this.video.link}"\n                width="${this.video.width}" \n                height="${this.video.height}" \n                allow="autoplay; encrypted-media; fullscreen; screen-wake-lock; accelerometer; clipboard-write;"\n            ></iframe>`),this.$container.append(this.$videoElement),this.$component.prepend(this.$container),this.onInited&&this.onInited(this.$container)}fitToSize(){if(this.video){const t=this.$container.width(),e=this.$container.height(),i=this.video.width/this.video.height;i>t/e?this.$videoElement.css({width:e*i+"px",height:"100%"}):this.$videoElement.css({width:"100%",height:t/i+"px"})}this.videoIsResized=!0}ready(){Kt((()=>this.videoIsResized),(()=>{this.$component.addClass("video-loaded")}),5e3)}play(){this.$videoElement&&this.$videoElement[0]&&this.$videoElement[0].play?(this.$videoElement[0].play(),$(document).one("touchstart.video-bg",(()=>{this.$videoElement[0].play()})),this.ready()):"vimeo"===this.video.type?Kt((()=>this.vPlayer&&this.vPlayer.play),(()=>{setTimeout((()=>{this.vPlayer.play(),this.ready()}),50)}),5e3):"youtube"===this.video.type?Kt((()=>this.yPlayer&&this.yPlayer.playVideo),(()=>{this.yPlayer.playVideo(),this.ready()}),5e3):"kinescope"===this.video.type?Kt((()=>this.kPlayer&&this.kPlayer.play),(()=>{this.kPlayer.play(),this.ready()}),5e3):this.ready()}pause(){var t;"vimeo"===this.video.type&&this.vPlayer?this.vPlayer.pause():"youtube"===this.video.type&&this.yPlayer&&this.yPlayer.pauseVideo?this.yPlayer.pauseVideo():"kinescope"===this.video.type&&null!=(t=this.kPlayer)&&t.pause?this.kPlayer.pause():this.$videoElement&&this.$videoElement[0]&&this.$videoElement[0].pause&&this.$videoElement[0].pause()}destroy(){this.destroyed=!0,this.pause(),this.kPlayer&&this.kPlayer.destroy(),$(document).off(`.bg_effect_${this.core.id}`)}}const Jt=[800,1366,1920,2160];class Qt extends Nt{constructor(...t){var e,i;super(...t);const{$component:s}=this,n=s.data();this.data={type:n.type||"color",hasImagePlaceholder:!!n.hasPlaceholder,imageLoadingOptions:flexbe_cli.vars._project.images,isLazyLoading:!!n.lazy,isImgLoaded:!!n.loaded,effect:n.effect,effectMobile:null!=(e=n.effectMobile)?e:n.effect,videoId:n.videoId||null,videoType:n.videoType||null,videoLink:n.videoLink||null,videoWidth:n.videoWidth||640,videoHeight:n.videoHeight||360,videoPreview:n.videoPreview||"color",infinityVideo:null!=(i=n.infinityVideo)&&i,mobileVideoEnabled:n.mobileVideoEnabled||!1,videoParallaxFactor:.4},this.image={url:null,id:n.imgId,ext:n.imgExt,x:n.imgX,y:n.imgY,proportion:n.imgProportion,width:n.imgWidth,animated:n.imgAnimated,transparent:n.imgTransparent,scale:"cover",type:"background",original:!!n.imgOriginal}}async onInit(){this.data.isLazyLoading||await this.loadImage(),this.$component.on("setImage",(async()=>{!this.isVisible||this.isImgLoading||this.data.isImgLoaded||await this.loadImage()}))}onScreen({state:t}){this.videoInstance&&(this.data.infinityVideo||(t?this.videoInstance.play():this.videoInstance.pause())),this.onscreen=t,t&&!this.played&&this.playVideo()}async onBeside({state:t,first:e}){t&&e&&(await this.loadImage(),this.imageEffectInit(),this.videoEffectInit()),this.played||this.playVideo(),this.bgEffect&&(this.bgEffect.toggleRendering(t),this.bgEffect.draw())}onResize(){this.bgEffect&&requestAnimationFrame((()=>{this.bgEffect.reflow()})),"video"===this.data.type&&(this.videoInstance?(this.videoInstance.fitToSize(),this.data.effect&&this.fixHolder&&this.setParallax&&setTimeout((()=>{this.fixHolder(),this.setParallax()}),100),setTimeout((()=>{this.videoInstance.fitToSize()}),150)):this.fixHolder&&this.fixHolder())}async loadImage(){if(!(this.image.id&&("image"===this.data.type||"video"===this.data.type&&"image"===this.data.videoPreview)))return;this.isImgLoading=!0;const t={width:this.componentWidth||this.component.offsetWidth,height:this.componentHeight||this.component.offsetHeight},{width:e}=this.image.original?{width:0}:await Lt(this.image,t,{...this.data.imageLoadingOptions,sizes:Jt});if(this.image.url=Dt(this.image,e,this.data.imageLoadingOptions),!this.data.isImgLoaded){if(this.data.hasImagePlaceholder)try{await kt(this.image.url)}catch(t){return void console.error("Background preload error",t)}this.setImage(this.image.url)}this.isImgLoading=!1}setImage(t){this.$component.find(".image-holder").css("background-image",`url(${t})`),this.$component.addClass("image-loaded"),this.isImgLoading=!1,this.data.isImgLoaded=!0}imageEffectInit(){var t;if("image"!==this.data.type||!this.data.effect||flexbe_cli.vars._globals.isScreenshot)return;const{owner:e,$component:i,data:s,image:n}=this,a=(null==(t=e._core)?void 0:t.id)||e.getAttribute("data-id");"object"==typeof e._bgEffects&&e._bgEffects.destroy();let o="fixed"!==s.effect;o&&"off"===s.effectMobile&&flexbe_cli.run.is_screen_mobile&&(o=!1),o&&(this.bgEffect=new Ut(a,i,s.effect,n),e._bgEffects=this.bgEffect)}videoEffectInit(){if("video"!==this.data.type||"parallax"!==this.data.effect||flexbe_cli.vars._globals.isScreenshot)return;const t=this.$component.find(".video-holder, .image-holder"),e=this.owner._core,i=this.data,s=()=>{t.css("height",`${e.tween.height+(flexbe_cli.resize.viewportHeight-e.tween.height)*i.videoParallaxFactor}px`)},n=()=>{if("off"===this.data.effectMobile&&flexbe_cli.run.is_screen_mobile)return void t.css("top","");const i=1-this.data.videoParallaxFactor,s=Math.floor((flexbe_cli.scroll.latest-e.tween.start)*-i)||0;t.css("top",`${s}px`)};s(),n(),e.$area.off(`fixHeaderHeight.component-bg-${e.id}`).on(`fixHeaderHeight.component-bg-${e.id}`,(()=>{n()})),$(window).off(`scroll.component-bg-${e.id}`).on(`scroll.component-bg-${e.id}`,(()=>{this.onscreen&&n()})),this.fixHolder=s,this.setParallax=n}playVideo(){if(flexbe_cli.run.is_screen_mobile&&!this.data.mobileVideoEnabled)return!1;if(flexbe_cli.vars._globals.isCriticalCss||flexbe_cli.vars._globals.isScreenshot||flexbe_cli.vars._globals.isBot)return!1;const t=this.data,e={id:t.videoId,type:t.videoType,link:t.videoLink,width:t.videoWidth,height:t.videoHeight};return!("video"!==this.data.type||!e.id&&!e.link)&&(this.played=!0,this.videoInstance||(this.videoInstance=new Zt(this,e,(()=>{this.videoEffectInit()}))),!0)}onDestroy(){this.core.$area.off(`fixHeaderHeight.component-bg-${this.core.id}`),$(window).off(`scroll.component-bg-${this.core.id}`),this.bgEffect&&this.bgEffect.destroy(),this.videoInstance&&this.videoInstance.destroy()}}Qt.is="background";class te extends Nt{constructor(...t){super(...t),this.$glareElement=this.$component.find("> .bg-glare-hover").eq(0),this.$bgElement=this.$component.find(".bg-fill").eq(0),this.$hoverElement=this.$component.find(".bg-fill-hover").eq(0),this.lazy=this.$bgElement.data("img-lazy"),this.isImgLoaded=this.$bgElement.data("img-loaded"),this.bgType=this.$bgElement.data("type"),this.hoverType=this.$hoverElement.data("hover-type"),this.hasImagePlaceholder=!!this.$bgElement.data("img-has-placeholder"),this.imageLoadingOptions=flexbe_cli.vars._project.images}async onInit(){this.$bgElement.on("setImage",(async()=>{!this.isVisible||this.isImgLoading||this.isImgLoaded||(this.setImageParams(),await this.loadImage())})),this.$glareElement.length&&this.$component.off("mousemove.bg-glare").on("mousemove.bg-glare",(t=>{const{x:e,y:i}=function(t,e){const i=t.getBoundingClientRect();return{x:e.clientX-i.left,y:e.clientY-i.top}}(this.$component[0],t);this.$glareElement.css({"--bgGlareX":`${e}px`,"--bgGlareY":`${i}px`})}))}async onBeside({state:t,first:e}){t&&e&&(this.lazy&&"image"===this.bgType&&!this.isImgLoaded&&(this.setImageParams(),await this.loadImage()),"image"===this.hoverType&&(this.setHoverImageParams(),await this.loadHoverImage()),this.dispatchEffects())}onWindowResize(){this.dispatchEffects()}getComponentSize(){return{width:this.componentWidth,height:this.componentHeight}}dispatchEffects(){const t="mobile"===flexbe_cli.resize.responsiveMode,e=this.$component.hasClass("hover-trigger"),i=this.$component.hasClass("hover-trigger-am"),s=t?i:e;this.$component.toggleClass("js-hover",s)}async loadImage(){this.isImgLoading=!0;const{width:t}=await Lt(this.image,this.getComponentSize(),this.imageLoadingOptions),e=Dt(this.image,t,this.imageLoadingOptions);this.hasImagePlaceholder&&await kt(e),this.setImage(this.$bgElement,e),this.isImgLoading=!1,this.isImgLoaded=!0}async loadHoverImage(){const{width:t}=await Lt(this.hoverImage,this.getComponentSize(),this.imageLoadingOptions),e=Dt(this.hoverImage,t,this.imageLoadingOptions);this.setImage(this.$hoverElement,e)}setImage(t,e){t.css("background-image",`url(${e})`),this.$component.find(".bg-preview").eq(0).addClass("invisible")}setImageParams(){const{$bgElement:t}=this;this.image={id:t.data("img-id"),ext:t.data("img-ext"),width:t.data("img-width"),animated:t.data("img-animated"),transparent:t.data("img-transparent"),proportion:t.data("img-proportion"),type:"background",scale:"cover"}}setHoverImageParams(){const{$hoverElement:t}=this;this.hoverImage={id:t.data("img-id"),ext:t.data("img-ext"),width:t.data("img-width"),animated:t.data("img-animated"),transparent:t.data("img-transparent"),proportion:t.data("img-proportion"),type:"background",scale:"cover"}}}te.is="backgroundElement";class ee{constructor(t,e){e={init:!0,targets:"span",...e},this.options=e,this.pagination=t,this.tag=this.options.tag,this.filled=!1,this.states=["hidden","prev-prev","prev","main","next","next-next","hidden"],this.init()}init(){this.bindEvents(),this.options.init&&this.render({states:this.states,force:!0})}bindEvents(){const{tag:t,pagination:e,options:i}=this,s=$(e);"function"==typeof i.onClick&&s.off("click").on("click",t,(t=>{const e=$(t.currentTarget),s=+e.siblings('[data-state="main"]').attr("data-index"),n=+e.attr("data-index")-s;i.onClick(n)}))}move(t){const e=this.states,i=this.filled&&t;if((!i||this.inAnimate!==t)&&(this.render({states:e,force:!0}),i)){const i=e.map(((i,s)=>e[s+("prev"===t?1:-1)]||"hidden"));this.inAnimate=t,clearTimeout(this._anim),this._anim=setTimeout((()=>{this.inAnimate=!1}),200),requestAnimationFrame((()=>{this.render({states:i})}))}}render({states:t,force:e}={}){const i=$(this.pagination),s=this.tag;if(this.filled=!0,e){const e=t.reduce((t=>`${t}<${s}></${s}>`),"");i.html(e)}i.addClass("swiper-pagination-bullets-dynamic"),i.find(s).each(((e,i)=>{const s=$(i),n=t[e]||"hidden",a=["swiper-pagination-bullet"];"main"===n&&a.push("swiper-pagination-bullet-active"),"hidden"===n?a.push("swiper-pagination-bullet-hidden"):a.push(`swiper-pagination-bullet-active-${n}`),s.attr("class",a.join(" ")),s.attr("data-state",n),s.attr("data-index",e)}))}}const ie=Symbol("ref"),se="detached";function ne(t,e,i,s={}){const n=$(t),a=e?`[data-component="${e}"]`:"[data-component]";n.is(a)&&n.trigger(i,s),$(t).find(a).each(((t,e)=>{$(e).trigger(i,s)}))}function ae(e=[]){e.forEach(t((t=>{ne(t,"image","setImage")})))}function oe(e){e.params.virtualTranslate=!0,e.params.cssMode=!1,e.params.slidesPerGroup=1,e.params.spaceBetween=0,e.on("init",t((()=>{$(e.el).addClass("swiper-effect-fade")}))),e.on("setTranslate",((t,e)=>{const{slides:i,size:s,slidesSizesGrid:n}=t;if("fade"!==t.params.effect||Number.isNaN(e))return;$(t.wrapperEl).css("transform","");for(let s=0;s<i.length;s+=1){const i=t.slides.eq(s),a=n.slice(0,s).reduce(((t,e)=>t+e),0),o=-(a+e)/n[s];i.css({left:`-${100*s}%`,opacity:Math.min(Math.max(1-Math.abs(o),0),1)})}let a=!1;t.slides.transitionEnd((()=>{a||!t||t.destroyed||(a=!0,t.animating=!1,$(t.wrapperEl).trigger("transitionend"))}))}))}const re={};class le extends Nt{constructor(...t){super(...t);const{component:e,$component:i}=this;if(this.id=this.core.id,this.mode=e.getAttribute("data-mode"),"slider"===this.mode){let t;this.require=["/_s/lib/swiper8/dist/swiper-bundle.min.js?v847"],this.$cardsRoot=i.closest(".flexbe-cards-root"),this.$slider=this.$cardsRoot.find(".swiper"),this.$pagination=this.$cardsRoot.find(".slider-pagination--cards"),this.$navigation=this.$cardsRoot.find(".slider-button--cards"),this.$swiperHelper=this.$cardsRoot.find(".swiper-mobile-helper"),this.$flexbeCardsSlider=this.$cardsRoot.find(".flexbe-cards-slider"),this.$flexbeCards=this.$cardsRoot.find(".flexbe-cards"),this.$flexbeCard=this.$cardsRoot.find(".flexbe-card"),this.sliderResponsive=this.$slider.attr("data-slider-responsive-mode"),this.$slider.on("bringIntoView",(e=>{const i=this.swiper,s=$(e.target).closest(this.$flexbeCard)[0],n=this.$flexbeCard.index(s);t!==n&&(t=n,i?-1!==n&&i.slideTo(n):re[this.id]=n)}))}}onLoad(){this.sliderDisposer(),this.core.inView&&this.initSwipeAnimation()}onBeside({state:t}){t&&this.sliderDisposer()}onScreen({state:t}){t?this.sliderDisposer():this.destroySwipeAnimation()}onView({state:t}){t&&!this.wasView&&this.swiper&&this.swiper.inited&&(this.swiper.update(),this.checkSlidesVisibility(),this.checkNavigationState()),this.toggleAutoplay(t),t&&this.isLoaded&&this.initSwipeAnimation()}onResize(){if(this.sliderDisposer(),this.swiper){const t=this.getViewportSpecificSettings();this.settings={...this.settings,...t},this.swiper.params={...this.swiper.params,...t},setTimeout((()=>{this.swiper.update(),this.checkSlidesVisibility()}),10)}}onHideShowUI(){this.destroySlider(),this.initSlider()}sliderDisposer(){if("slider"!==this.mode||!this.isLoaded||!this.core.isVisible)return;this.responsiveMode=flexbe_cli.resize.responsiveMode;const t="mobile"===flexbe_cli.resize.responsiveMode,e=this.sliderResponsive,i=t?"desktop"!==e:"mobile"!==e;this.$cardsRoot.toggleClass("slider-enabled",i),this.$cardsRoot.toggleClass("slider-disabled",!i),i&&!this.swiper?this.initSlider():!i&&this.swiper&&this.destroySlider()}initSlider(){if("slider"===this.mode&&!this.swiper&&"undefined"!=typeof Swiper)try{this.savePropsFromAttributes(),this.createSwiperSettings(),this.createSwiperInstance(),this.createSwiperNavigation(),this.createSwiperLoopPagination(),this.createSwiperEditorFixes(),i((()=>{this.swiper.init(),i((()=>this.toggleAutoplay(this.core.inView)))}))}catch(t){console.warn(t)}}destroySlider(){"slider"===this.mode&&(this.swiper&&this.swiper.destroy(),this.swiper=null,this.$cardsRoot.removeClass("slider-inited slider-enabled"),this.$cardsRoot.addClass("slider-disabled"),this.$flexbeCardsSlider.removeClass("swiper-active"),this.$flexbeCards.removeClass("swiper-wrapper"),this.$flexbeCard.removeClass("swiper-slide-hidden"))}initSwipeAnimation(){if("slider"!==this.mode)return;"mobile"===flexbe_cli.resize.responsiveMode&&"desktop"!==this.sliderResponsive&&!this.$swiperHelper.hasClass("show")&&setTimeout((()=>{this.core.inView&&(this.$swiperHelper.addClass("show"),this.swiper.once("sliderMove",(()=>{this.destroySwipeAnimation()})))}),500)}destroySwipeAnimation(){"slider"===this.mode&&this.$swiperHelper.hasClass("show")&&this.$swiperHelper.removeClass("show")}savePropsFromAttributes(){this.props={totalSlides:+this.$slider.attr("data-count"),isOverflow:+this.$slider.attr("data-overflow"),autoplayDelay:flexbe_cli.run.is_preview&&Math.floor(1e3*+this.$slider.attr("data-autoplay"))||0,pagination:this.$pagination.attr("data-type")||!1,loop:flexbe_cli.run.is_preview&&!!+this.$slider.attr("data-loop"),effectDesktop:this.$slider.attr("data-effect"),effectMobile:this.$slider.attr("data-effect-mobile"),inRowDesktop:+this.$slider.attr("data-cards"),inRowMobile:+this.$slider.attr("data-cards-mobile")||1}}createSwiperSettings(){const t=this.getViewportSpecificSettings(),{totalSlides:e,isOverflow:i,autoplayDelay:s,pagination:n}=this.props,a=!(e<=t.slidesPerView)&&this.props.loop,o=Math.max(0,Math.min(e-1,re[this.id]||0));if(this.freeSlides=0,a&&!i){const e=this.$slider[0].offsetWidth,i=e/t.slidesPerView,s=(flexbe_cli.resize.viewportWidth-e)/2;this.freeSlides=Math.ceil(s/i)}this.settings={autoHeight:0===this.$slider.find(".align-items-stretch").length,preloadImages:!1,allowClick:!0,preventClicks:!1,preventClicksPropagation:!1,touchStartPreventDefault:!1,touchMoveStopPropagation:!1,preventInteractionOnTransition:!1,loopPreventsSlide:!1,simulateTouch:!flexbe_cli.run.isTouch&&flexbe_cli.run.is_preview,longSwipesRatio:.1,longSwipesMs:100,initialSlide:o,loop:a,autoplay:!!s&&{delay:s,stopOnLastSlide:!a,disableOnInteraction:!0,waitForTransition:!0},navigation:{},pagination:{clickable:!0,type:a&&"bullets"===n?"custom":n,el:this.$pagination[0],dynamicBullets:this.$flexbeCard.length>7,dynamicMainBullets:t.slidesPerView,renderCustom:()=>{},formatFractionCurrent:()=>this.getGroupIndex()+1,formatFractionTotal:()=>Math.ceil(this.props.totalSlides/this.swiper.params.slidesPerView)},watchSlidesProgress:!0,loopedSlides:t.slidesPerView+this.freeSlides,...t}}getViewportSpecificSettings(){const t="mobile"===flexbe_cli.resize.responsiveMode,e=t?this.props.inRowMobile:this.props.inRowDesktop;let i=t?this.props.effectMobile:this.props.effectDesktop;return e>1&&(i="slide"),{effect:i,speed:flexbe_cli.run.is_preview&&"fade"===i?450:300,slidesPerView:e}}createSwiperInstance(){this.swiper&&(this.swiper.destroy(),this.swiper=null);let e,i=!1;const s=new Swiper(this.$slider[0],{init:!1,wrapperClass:"flexbe-cards",slideClass:"flexbe-card",...this.settings});var n;"fade"===s.params.effect?oe(s):((n=s).params.virtualTranslate=!0,n.params.cssMode=!1,n.on("init",t((()=>{$(n.el).addClass("swiper-effect-slide")}))),n.on("setTranslate",((t,e)=>{if("slide"!==t.params.effect||Number.isNaN(e))return;const i=$(t.wrapperEl),s=$(t.slides),n=t.isHorizontal(),a=n?e:0,o=n?0:e;flexbe_cli.is_admin?i.css({position:"relative",top:`${o}px`,left:`${a}px`,transform:""}):i.css({transform:`translate3d(${a}px, ${o}px, 0px)`}),s.css({opacity:"",transform:""})})));const a=()=>{i||(i=!0,this.$cardsRoot.addClass("slider-inited"),this.$slider.addClass("swiper-inited"));const t=this.props.totalSlides>s.params.slidesPerView;e!==t&&(e=t,this.$cardsRoot.toggleClass("slider-enabled",t),this.$cardsRoot.toggleClass("slider-disabled",!t),this.$slider.toggleClass("swiper-active",t),s.update())};flexbe_cli.is_admin||(s.on("beforeInit",(()=>{!function(t){const e=flexbe_cli.resize.responsiveMode;$(t).find(`[data-hidden="all"], [data-hidden="${e}"]`).toArray().forEach((t=>{const e=$(`\x3c!--${se}--\x3e`)[0];e[ie]=t,$(t).before(e).detach()}))}(this.swiper.el)})),s.on("destroy",(()=>{!function(t){const e=document.createNodeIterator(t,NodeFilter.SHOW_COMMENT),i=[];for(;e.nextNode();){const t=e.referenceNode;t.textContent===se&&t[ie]&&i.push(t)}i.forEach((t=>{const e=t[ie];t.parentNode.replaceChild(e,t)}))}(this.swiper.el)}))),s.onAny(((t,e)=>{s.el.dispatchEvent(new CustomEvent(`swiper:${t}`,{detail:e,bubbles:!1,cancelable:!0}))})),s.on("init",t((()=>{a(),(()=>{if(s.loopedSlides){const t=$(s.slides).filter(`.${s.params.slideDuplicateClass}`),e={};t.each(((t,i)=>{const n=$(i),a=n.attr("data-swiper-slide-index"),o=$(s.slides).eq(s.loopedSlides+ +a);e[a]=e[a]?e[a]+1:1,n.attr("data-cloned",e[a]);const r=o.find("[data-action]"),l=n.find("[data-action]");r.each(((t,e)=>{const i=$(e).data();l.eq(t).data(i)}))})),flexbe_cli.entity.initArea(t)}})(),(()=>{if(s.params.autoHeight){const t=new ResizeObserver((()=>{s.updateAutoHeight()}));s.slides.forEach((e=>t.observe(e))),s.on("destroy",(()=>{t.disconnect()})),s.on("slideChange",(()=>{s.updateAutoHeight()}))}})(),this.checkSlidesVisibility()}))),s.on("slideChange",t((()=>{this.checkSlidesVisibility()}))),s.on("resize",$.debounce((()=>{this.swiper&&(a(),this.checkSlidesVisibility())}),50));let o=!1;const r=()=>{this.$cardsRoot.addClass("swiper-in-interacting"),this.checkSlidesVisibility()},l=()=>{this.$cardsRoot.removeClass("swiper-in-interacting"),this.checkSlidesVisibility()};s.on("sliderFirstMove",(()=>{o=!0,r()})),s.on("touchEnd",(()=>{o=!1,l()})),s.on("transitionStart",(()=>{o||r()})),s.on("transitionEnd",(()=>{o||l(),s.realIndex+s.loopedSlides!==s.activeIndex&&s.loopFix()})),this.$slider.on("reduceSliderControls",((t,{state:e=!0})=>{this.preventAutoplay=!!e,this.preventAutoplay&&this.toggleAutoplay({state:!1}),this.$cardsRoot.toggleClass("swiper-reduce-controls",!!e)})),this.$slider.on("preventSliderMove",((t,{state:e=!0})=>{s.allowTouchMove=!e})),this.swiper=s}createSwiperNavigation(){const t=this.swiper;t.on("init",(()=>{this.checkNavigationState()})),t.on("resize",$.debounce((()=>{this.swiper&&this.checkNavigationState()}),50)),t.on("slideChange",(()=>{this._skipSlide||this.checkNavigationState()})),this.$navigation.on("click",(t=>{this["prev"===t.currentTarget.getAttribute("data-direction")?"prevSlide":"nextSlide"]()})),this.$slider.on("click.swiper-hidden",".swiper-slide-hidden",(t=>{t.preventDefault(),t.stopPropagation();const e=this.swiper;if(e.animating)return;const i=t.currentTarget,s=Array.from(e.slides||[]).findIndex((t=>t===i)),n=e.activeIndex,a=n-s,o=s-(n+e.params.slidesPerView-1);a>0?this.prevSlide(a):o>0&&this.nextSlide(o)}))}createSwiperLoopPagination(){const t=this.swiper;let e=!1;t.on("paginationRender",(()=>{if(this.$pagination.toggleClass("disabled",this.props.totalSlides<=t.params.slidesPerView),this._skipSlide||"custom"!==t.params.pagination.type)return;this.customPagination||(this.customPagination=new ee(this.$pagination[0],{init:!1,tag:"span",onClick:t=>{t<0?this.prevSlide():t>0&&this.nextSlide()}}));const i=t.previousIndex,s=t.activeIndex,n=this.props.totalSlides,a=i<s?"next":"prev";!!(i===s||"next"===a&&i===s-n||"prev"===a&&i===s+n)&&e||this.customPagination.move(a),e=!0}))}createSwiperEditorFixes(){if(!flexbe_cli.is_admin)return;const t=this.swiper;t.on("slideChange",(()=>{re[this.id]=t.realIndex}))}checkSlidesVisibility(){const t=this.swiper;t.updateSlides();const e=$(t.slides),i=e.slice(t.activeIndex,t.activeIndex+t.params.slidesPerView),s=e.not(i);s.removeClass("swiper-slide-visible").addClass("swiper-slide-hidden"),i.removeClass("swiper-slide-hidden").addClass("swiper-slide-visible"),ne(s,!1,"sliderDeactivate"),ne(i,!1,"sliderActivate")}checkNavigationState(){const t=this.swiper,e=t.params.navigation.disabledClass,i=this.$navigation,s=i.eq(0),n=i.eq(1);let{isBeginning:a,isEnd:o}=t;t.loopedSlides&&(a=!1,o=!1),i.toggleClass("disabled",this.props.totalSlides<=t.params.slidesPerView),s.toggleClass(e,a),n.toggleClass(e,o)}getGroupIndex(t,e,i=!0){const s=this.swiper;null==t&&(t=s.realIndex),e||(e=s.params.slidesPerView||1),i&&(s.loopedSlides||e<=1)&&(i=!1);const n=Math.ceil(this.props.totalSlides/e);let a=Math.floor(t/e);if(i){const i=a*e,s=t-i>i+e-1-t,n=t%e!=0&&t+e>=this.props.totalSlides;(s||n)&&(a+=1)}return Math.max(0,Math.min(n,a))}getSlideIndex(t,e){return null==e&&(e=this.swiper.params.slidesPerView||1),t*e}toSlide(t,e){const i=this.swiper,s=this.getSlideIndex(t,e);return i.loopedSlides?i.slideToLoop(s):i.slideTo(s)}prevSlide(t){let e;const i=this.swiper;t=t?Math.abs(t):1;const s=i.activeIndex;if(i.loopedSlides){const n=s,a=this.props.isOverflow?t:t+this.freeSlides;s+this.props.totalSlides<=i.slides.length&&!(n>=a)&&(this.toggleSkip(!0),i.slideTo(s+this.props.totalSlides,0)),e=i.activeIndex-t}else e=i.activeIndex-t;setTimeout((()=>{this.toggleSkip(!1),i.slideTo(e)}),5)}nextSlide(t){let e;const i=this.swiper,s=i.params.slidesPerView;t=t?Math.abs(t):1;const n=i.activeIndex,a=n+s-1;if(i.loopedSlides){const s=i.slides.length-a-1,o=this.props.isOverflow?t:t+this.freeSlides;n-this.props.totalSlides>=0&&!(s>=o)&&(this.toggleSkip(!0),i.slideTo(n-this.props.totalSlides,0)),e=i.activeIndex+t}else e=i.activeIndex+t;setTimeout((()=>{this.toggleSkip(!1),i.slideTo(e)}),5)}toggleSkip(t=!this._skipSlide){this._skipSlide=!!t,this.$slider.toggleClass("noanimate",this._skipSlide)}toggleAutoplay(t){if(!this.swiper)return;this.preventAutoplay&&(t=!1);const e=this.swiper,i=e.autoplay,s=e.params.autoplay||{};i&&s.enabled&&(t&&!i.running?i.start():t||i.stop())}}le.is="cards";class he{constructor(t){if(this.$legend=t.find(".range-legend"),this.$component=t.find(".range-outer"),this.$input=t.find("input"),this.startEdge=this.$component.data("start"),this.isDouble=!!this.$component.data("double"),this.endEdge=this.$component.data("end"),this.range=this.endEdge-this.startEdge,this.barWidth=this.$component.width(),this.step=this.$component.data("step")||1,this.steps=Math.round(this.range/this.step),this.legendType=this.$legend.data("type"),this.legendText=1==+this.$legend.data("text"),this.animated=!0,this.duration=this.steps<10&&1/this.steps*300,this.fractExponent=Math.max(this.getFract(this.startEdge),this.getFract(this.endEdge),this.getFract(this.step)),this.fractDevider=10**this.fractExponent,this.$value=$(".range-value",this.$component),this.$endRunner=$(".range-runner-right",this.$component),this.$endRunnerTip=$(".runner-tip",this.$endRunner),this.$endRunnerValue=$(".value",this.$endRunner),this.endRunnerWidth=this.$endRunner.width(),this.$startRunner=$(".range-runner-left",this.$component),this.$startRunnerValue=$(".value",this.$startRunner),this.$startRunnerTip=$(".runner-tip",this.$startRunner),this.startRunnerWidth=this.$startRunner.width(),this.maxAllowedLeft=20,this.maxAllowedRight=flexbe_cli.resize.viewportWidth-20,this.defaultShift=this.$endRunner.width()/2,this.activeRunner=!1,this.isDouble){const t=this.$input.data("value").split(" — ");this.startValue=+t[0],this.endValue=+t[1]}else this.endValue=+this.$input.data("value"),this.startValue=+this.startEdge;this.endParams={},this.drawLegend(),this.updateTooltip(this.$startRunnerTip),this.updateTooltip(this.$endRunnerTip),this.setEvents(),this.setRunnersValue()}formatN(t){return`${t<0?"-":""}${flexbe_cli.locale.formatNumber(t,this.fractExponent)}`}getFract(t){const e=`${t}`.split(".");return e[1]&&e[1].length||0}drawLegend(){if(this.legendText)return!1;const t=this.$legend.find(".from"),e=this.$legend.find(".to");if(t.text(this.formatN(this.startEdge)),e.text(this.formatN(this.endEdge)),"complex"!==this.legendType)return!1;this.$legend.find(".legend-point:not(.from, .to)").off("click").remove(),this.$legend.removeClass("complex").addClass("limits");const i=[`${this.formatN(this.startEdge)}`.length,`${this.formatN(this.endEdge)}`.length,`${this.formatN(this.step)}`.length],s=(i[0]+i[1]+i[2])/3,n=Math.max(this.startEdge,this.endEdge),a=[5*this.step*this.fractDevider/this.fractDevider];for(let t=1;t<=12;t++){const e=10**t*this.step;e<n&&p(a,e,this.fractDevider)}let o;const r=Math.ceil(this.$legend.find(i[0]>i[1]?".from":".to").width()/Math.max(i[1],i[0])),l=Math.round(.83*this.barWidth/(r*s)),h=this.range>0?1:-1;for(let t=Math.min(l,10);t>=3;t--){const e=d(this.step,Math.abs(this.steps),t,a);if(e&&Number.isInteger(e/this.step)&&Number.isInteger(this.range/e)){o=e;break}}if(!o||!Number.isInteger(this.range/(o*h))||this.range/(o*h)<3)for(let t=Math.min(Math.round(this.range/this.step),l,10);t>=2;t-=1){const e=this.roundFraction(this.range/t);if(e%this.step==0){o=e*h;break}}const c=this.roundFraction(this.range/(o*h));if(o&&Number.isInteger(c)){const t=[];for(let e=1;e<c;e+=1){const i=Math.round((this.startEdge+o*e*h)*this.fractDevider)/this.fractDevider;t.push(`<div class="legend-point" data-value="${i}">${this.formatN(i)}</div>`)}c>2&&(this.$legend.attr("data-count",c),this.$legend.removeClass("limits").addClass("complex"));const e=$(t.join(""));this.$legend.find(".from").after(e)}else this.$legend.removeClass("complex").addClass("limits");function d(t,e,i,s){return s.includes(e/i*t)?e/i*t:s.includes((e+1)/i*t)?(e+1)/i*t:s.includes((e+2)/i*t)?(e+2)/i*t:s.includes((e+3)/i*t)?(e+3)/i*t:s.includes((e+4)/i*t)?(e+4)/i*t:s.includes((e+5)/i*t)?(e+5)/i*t:s.includes((e+6)/i*t)?(e+6)/i*t:s.includes((e+7)/i*t)?(e+7)/i*t:s.includes((e+8)/i*t)?(e+8)/i*t:!!s.includes((e+9)/i*t)&&(e+9)/i*t}function p(t,e,i){for(let s=1;s<10;s+=1)t.push(Math.round(e*s*i)/i),t.push(Math.round(e*s*i+e/2)/i)}this.$legend.find(".legend-point:not(.to), .legend-point:not(.from)").each(((t,e)=>{$(e).on("click",(()=>{if(this.updateBarWidth(),this.isDouble){const t=(this.startValue+this.endValue)/2,i=+$(e).data("value"),s=this.startEdge<this.endEdge?1:-1;i*s>=t*s?this.endValue=i:this.startValue=i}else this.endValue=$(e).data("value");this.setRunnersValue()}))}))}roundFraction(t){return Math.round(1e10*t)/1e10}setRunnersValue(t=!1){if(!Number.isFinite(this.endValue)||!Number.isFinite(this.range)||this.isDouble&&!Number.isFinite(this.startValue))return!1;const e=this.startEdge<this.endEdge?1:-1;"start"===this.activeRunner?this.startValue*e<=this.startEdge*e?this.startValue=this.startEdge:this.startValue*e>=this.endValue*e&&(this.startValue=this.endValue):this.endValue*e>=this.endEdge*e?this.endValue=this.endEdge:this.endValue*e<=this.startValue*e&&(this.endValue=this.startValue);const i=this.isDouble?this.startValue:this.startEdge,s=this.isDouble?(this.startValue-this.startEdge)/(this.range/100):0,n=(this.endValue-i)/(this.range/100);this.endValue=Math.round(this.endValue*this.fractDevider)/this.fractDevider,this.startValue=Math.round(this.startValue*this.fractDevider)/this.fractDevider,requestAnimationFrame((()=>{this.$endRunnerValue.text(this.formatN(this.endValue)),this.$startRunnerValue.text(this.formatN(this.startValue))})),"end"===this.activeRunner?this.updateTooltip(this.$endRunnerTip):this.updateTooltip(this.$startRunnerTip),this.$value.css({width:`${n}%`,marginLeft:`${s}%`}),t||(this.isDouble?this.$input.val(`${this.startValue} — ${this.endValue}`):this.$input.val(this.endValue))}updateTooltip(t){const e=t.closest(".range-runner");if(e&&e.length){const e=t.innerWidth(),i=t.closest(".range-runner")[0].getBoundingClientRect().left+this.startRunnerWidth/2;let s;s=e/2>i+this.maxAllowedLeft?e/2-(i-this.maxAllowedLeft):e/2+i>this.maxAllowedRight?this.maxAllowedRight-i-e/2:0,t.css({transform:`translateX(${s}px)`})}}getValueFromLength(t){const e=this.range/(this.barWidth/t);return(Math.round(e/this.step)+this.startEdge/this.step)*this.step}applyEndPosition(t){return this["start"===this.activeRunner?"startValue":"endValue"]=this.getValueFromLength(t),this.setRunnersValue(),!0}touchHendler(t){if(!this.endParams.active||1!==t.touches.length)return $("body")[0].removeEventListener("touchmove",this.touchHendler),!1;this.toggleAnimation(!1),t.preventDefault(),t.stopPropagation();const e=t.touches[0].pageX-this.endParams.left-this.endParams.shift;this.applyEndPosition(e)}startWatchingEvents(t=this.defaultShift){this.endParams={active:!0,left:this.$component.offset().left,shift:t},clearTimeout(this.calmRunnersTimeout),"end"===this.activeRunner?this.$endRunner.addClass("active"):this.$startRunner.addClass("active")}toggleAnimation(t){t?Math.abs(this.barWidth/this.steps)<15?this.$component.addClass("animated"):(this.$component.removeClass("active-animation"),this.duration&&this.$component.removeClass("animation-speed-"+(12-Math.abs(Math.round(this.steps))))):Math.abs(this.barWidth/this.steps)<15?this.$component.removeClass("animated"):(this.$component.addClass("active-animation"),this.duration&&this.$component.addClass("animation-speed-"+(12-Math.abs(Math.round(this.steps)))))}afterRunnerReleased(){this.endParams.active&&("start"===this.activeRunner?this.$startRunner.focus():this.$endRunner.focus()),this.endParams.active=!1,this.debounceActive(),this.barWidth/this.steps<15?this.$component.addClass("animated"):this.$component.removeClass("active-animation"),this.toggleAnimation(!0)}updateBarWidth(){const t=this.$component.width();t!==this.barWidth&&(this.barWidth=t,"complex"===this.legendType&&this.drawLegend())}setEvents(){const t=$(window),e=this;function i(i){if(!e.endParams.active)return t.off("mousemove.dragRange"),!1;e.toggleAnimation(!1);const s=i.pageX-e.endParams.left-e.endParams.shift;return e.applyEndPosition(s),!0}this.$component.on("resize",(()=>{this.updateBarWidth()})),this.$component.on("touchstart",(e=>{if(1!==e.touches.length)return!1;if(this.isDouble){const t=(this.$endRunner.offset().left+this.$startRunner.offset().left)/2;this.activeRunner=e.touches[0].pageX>=t?"end":"start","start"===this.activeRunner?(this.$startRunner.addClass("upper-runner"),this.$endRunner.removeClass("upper-runner")):(this.$endRunner.addClass("upper-runner"),this.$startRunner.removeClass("upper-runner"))}else this.activeRunner="end";e.stopPropagation(),this.updateBarWidth();const i=e.touches[0].pageX-this.$value.offset().left;this.startWatchingEvents(),this.applyEndPosition(i-this.defaultShift),t[0].addEventListener("touchmove",this.touchHendler.bind(this),{passive:!1}),t.on("touchend.range",(()=>{this.afterRunnerReleased(),t[0].removeEventListener("touchmove",this.touchHendler),t.off("touchend.range")}))})),this.$component.on("mousedown",(e=>{const s=e.pageX-this.$component.offset().left;if(this.isDouble){const t=(this.$endRunner.offset().left+this.$startRunner.offset().left)/2;this.activeRunner=e.pageX>=t?"end":"start","start"===this.activeRunner?(this.$startRunner.addClass("upper-runner"),this.$endRunner.removeClass("upper-runner")):(this.$endRunner.addClass("upper-runner"),this.$startRunner.removeClass("upper-runner"))}this.updateBarWidth(),this.startWatchingEvents(),this.applyEndPosition(s-this.defaultShift),"start"===this.activeRunner?this.$startRunner.focus():this.$endRunner.focus(),t.on("mousemove.dragRange",i),t.on("mouseup.range",(()=>{this.afterRunnerReleased(),t.off("mousemove.dragRange"),t.off("mouseup.range")}))})),this.$endRunner.on("touchstart",(e=>{if(1!==e.touches.length)return!1;e.stopPropagation(),this.updateBarWidth(),this.activeRunner="end",this.$startRunner.removeClass("upper-runner"),this.$endRunner.addClass("upper-runner"),e.stopPropagation(),this.startWatchingEvents(e.touches[0].pageX-this.$endRunner.offset().left),this.toggleAnimation(!1),t[0].addEventListener("touchmove",this.touchHendler.bind(this),{passive:!1}),t.on("touchend.range",(()=>{this.afterRunnerReleased(),t[0].removeEventListener("touchmove",this.touchHendler),t.off("touchend.range")}))})),this.$startRunner.on("touchstart",(e=>{if(1!==e.touches.length)return!1;e.stopPropagation(),this.updateBarWidth(),this.activeRunner="start",this.$startRunner.addClass("upper-runner"),this.$endRunner.removeClass("upper-runner"),e.stopPropagation(),this.startWatchingEvents(e.touches[0].pageX-this.$startRunner.offset().left),this.toggleAnimation(!1),t[0].addEventListener("touchmove",this.touchHendler.bind(this),{passive:!1}),t.on("touchend.range",(()=>{this.afterRunnerReleased(),t[0].removeEventListener("touchmove",this.touchHendler),t.off("touchend.range")}))})),this.$endRunner.on("mousedown",(e=>{e.stopPropagation(),this.activeRunner="end",this.$startRunner.removeClass("upper-runner"),this.$endRunner.addClass("upper-runner"),this.updateBarWidth(),this.$endRunner.focus(),this.startWatchingEvents(e.pageX-this.$endRunner.offset().left),this.toggleAnimation(!1),t.on("mousemove.dragRange",i),t.on("mouseup.range",(()=>{this.afterRunnerReleased(),t.off("mousemove.dragRange"),t.off("mouseup.range")}))})),this.$startRunner.on("mousedown",(e=>{e.stopPropagation(),this.activeRunner="start",this.$startRunner.addClass("upper-runner"),this.$endRunner.removeClass("upper-runner"),this.updateBarWidth(),this.$startRunner.focus(),this.startWatchingEvents(e.pageX-this.$startRunner.offset().left),this.toggleAnimation(!1),t.on("mousemove.dragRange",i),t.on("mouseup.range",(()=>{this.afterRunnerReleased(),t.off("mousemove.dragRange"),t.off("mouseup.range")}))})),this.$legend.find(".legend-point.to, .legend-point.from").each(((t,e)=>{$(e).on("click",(()=>{if(this.updateBarWidth(),this.isDouble){const t=this.startEdge<this.endEdge?1:-1,i=(this.startValue+this.endValue)/2,s=+$(e).data("value");s*t>=i*t?this.endValue=s:this.startValue=s}else this.endValue=$(e).data("value");this.setRunnersValue()}))})),this.$input.on("change",(()=>{if(this.isDouble){const t=this.$input.val().split(" — ");this.startValue=+t[0],this.endValue=+t[1]}else this.endValue=+this.$input.val();this.setRunnersValue(!0)})),this.$startRunner.on("keyup",(t=>{t.preventDefault(),this.activeRunner="start",this.handleKeydown(t,this.$startRunner)})),this.$endRunner.on("keyup",(t=>{t.preventDefault(),this.activeRunner="end",this.handleKeydown(t,this.$endRunner)})),this.$startRunner.on("keydown",(t=>{this.activeRunner="start",this.handleKeyup(t,this.$startRunner)})),this.$endRunner.on("keydown",(t=>{this.activeRunner="end",this.handleKeyup(t,this.$endRunner)})),this.$startRunner.on("blur",(()=>{this.handleBlur()}))}handleBlur(){this.movingInterval&&(clearInterval(this.movingInterval),this.movingInterval=!1),this.movingDebounceTimeout&&(clearTimeout(this.movingDebounceTimeout),this.movingDebounceTimeout=!1)}handleKeydown(t,e){if(this.movingInterval&&(clearInterval(this.movingInterval),this.movingInterval=!1),this.movingDebounceTimeout&&(clearTimeout(this.movingDebounceTimeout),this.movingDebounceTimeout=!1),[37,38,39,40].includes(t.keyCode)){const i=t.shiftKey?10:1,s="start"===this.activeRunner?"startValue":"endValue";38===t.keyCode||39===t.keyCode?this[s]=(this[s]/this.step+i)*this.step:37!==t.keyCode&&40!==t.keyCode||(this[s]=(this[s]/this.step-i)*this.step),e.addClass("active"),this.debounceActive(),this.setRunnersValue()}}handleKeyup(t,e){9!==t.keyCode&&[37,38,39,40].includes(t.keyCode)&&(t.preventDefault(),e.addClass("active"),this.debounceActive(),this.startDebouncedMove(t))}startDebouncedMove(t){this.movingDebounceTimeout&&(clearTimeout(this.movingDebounceTimeout),this.movingDebounceTimeout=!1),this.movingDebounceTimeout=setTimeout((()=>{this.movingInterval=setInterval((()=>{this.debounceActive();const e=t.shiftKey?10:1,i="start"===this.activeRunner?"startValue":"endValue";38===t.keyCode||39===t.keyCode?this[i]=(Math.round(this[i]/this.step)+e)*this.step:37!==t.keyCode&&40!==t.keyCode||(this[i]=(Math.round(this[i]/this.step)-e)*this.step),this.setRunnersValue()}),50)}),300)}debounceActive(){this.calmRunnersTimeout&&clearTimeout(this.calmRunnersTimeout),this.calmRunnersTimeout=setTimeout((()=>{this.$endRunner.removeClass("active"),this.$startRunner.removeClass("active")}),500)}}const ce={selectClass:"",dropdownClass:"",selectedClass:"selected",optionSelector:"option",attrValue:"value",position:"over",padding:10,title:!1};class de{static create(t){return new this(t)}constructor(t){this.opts=t,this.config={...ce,...t.config},this.element=t.element,this.$select=$(this.element),this.isNativeSelect=this.$select.is("select"),this.selectAllDevice="select"===this.$select.data("type"),this.blurTimeOut=!1,this.blurListTimeOut=!1,this.focused=!1,this.active=!1,this.createSelect()}createSelect(){this.$customSelect=$(`\n            <div class="dropdown-container ${this.config.selectClass}">\n                <div tabindex="0" class="dropdown-select">\n                    <span class="dropdown-select__content selected"></span>\n\n                    <span class="arrow">\n                        <svg viewBox="0 0 10 6" xmlns="http://www.w3.org/2000/svg">\n                            <path fill="currentColor" d="M 1.4 6.99441e-15L 0 1.34043L 5 6L 10 1.34043L 8.6 0L 5 3.34998L 1.4 6.99441e-15Z"/>\n                        </svg>\n                    </span>\n                </div>\n            </div>\n        `),this.$customSelect__content=this.$customSelect.find(".dropdown-select__content"),this.$select.after(this.$customSelect),this.syncSelect(),this.selectAllDevice||flexbe_cli.run.is_screen_desktop?(this.$customSelect.off("click.selected").on("click.selected",".dropdown-select",(t=>{clearTimeout(this.blurListTimeOut),this.active?this.collapse():this.activate(t)})),this.$customSelect.off("focus.selectFocus").on("focus.selectFocus",".dropdown-select",(()=>{this.focused=!0,this.$listWrapper||this.createList()})),this.isNativeSelect&&this.$select.off("change.changeSelect").on("change.changeSelect",(t=>{const e=this.$listWrapper.find(".dropdown-select-ul li"),i=t.currentTarget.value;e.removeClass(this.config.selectedClass),e.filter(((t,e)=>e.getAttribute(this.config.attrValue)===i)).addClass(this.config.selectedClass),this.$customSelect__content.text(i),"function"==typeof this.opts.onChange&&this.opts.onChange(t)})),this.$customSelect.off("keydown.selectKeydown").on("keydown.selectKeydown",".dropdown-select",(t=>{if(this.focused&&[13,27,32,38,40].includes(t.keyCode)){t.preventDefault();const e=this.$list.find(`.option-e.${this.config.selectedClass}`).filter((t=>!$(t).attr("disabled")));if(40===t.keyCode)t.preventDefault(),this.select(e.next(),!1),this.scrollToSelected();else if(38===t.keyCode)t.preventDefault(),this.select(e.prev(),!1),this.scrollToSelected();else if(this.active||32!==t.keyCode){if(this.active&&[13,27,32].includes(t.keyCode))return t.preventDefault(),this.collapse(),!1}else t.preventDefault(),this.activate(t)}}))):this.$select.off("change.selected").on("change.selected",(t=>{const e=t.target.value;this.$customSelect__content.text(e)}))}syncSelect(){const t=this.$select.children(this.config.optionSelector).filter(((t,e)=>{var i;return(null!=(i=e.selected)?i:$(e).attr("selected"))||$(e).hasClass(this.config.selectedClass)})).eq(0),e=t.html()||"—";this.$customSelect__content.attr(this.config.attrValue,t.attr(this.config.attrValue)),this.$customSelect__content.html(e)}createList(){const t=this.$select.children(this.config.optionSelector);this.$listWrapper=$(`\n            <div class="select-container-in-body">\n                <div class="overlay"></div>\n                <ul class="dropdown-select-ul scrollable ${this.config.dropdownClass}" tabindex="0"></ul>\n            </div>\n        `),this.$list=this.$listWrapper.find(".dropdown-select-ul"),t.each(((t,e)=>{var i,s,n;const a=$(e),o=(null!=(i=e.selected)?i:a.attr("selected"))||a.hasClass(this.config.selectedClass),r=(null!=(s=e.disabled)?s:a.attr("disabled"))||a.hasClass("disabled"),l=(null!=(n=e.locked)?n:a.attr("locked"))||a.hasClass("locked"),h=this.isNativeSelect?a.val():a.attr(this.config.attrValue),c=a.html().trim()||"—";let d="";this.config.title&&(d=a.attr("data-title"));const p=$(`<li title='${d}' class="option-e"></li>`);o&&!r&&p.addClass(this.config.selectedClass),r&&p.attr("disabled","disabled"),l&&p.attr("locked","locked"),p.attr(this.config.attrValue,h),p.html(c),this.$list.append(p)}))}select(t,e){if(!t[0])return;if(t.attr("disabled"))return clearTimeout(this.blurTimeOut),void this.$list.off("blur.listBlur").on("blur.listBlur",(()=>{this.focused=!1,this.blurListTimeOut=setTimeout((()=>{this.$listWrapper&&this.collapse()}),200)}));const i=t.attr(this.config.attrValue);if(t.siblings("li").removeClass(this.config.selectedClass),t.addClass(this.config.selectedClass),this.isNativeSelect)this.$select.val(i);else{const t=this.$select.children(this.config.optionSelector);t.removeAttr("selected").removeClass(this.config.selectedClass),t.filter(`[${this.config.attrValue}=${i}]`).addClass(this.config.selectedClass).attr("selected","selected")}this.syncSelect(),e&&this.collapse()}scrollToSelected(){const t=this.$list[0].offsetHeight;if(this.$list[0].scrollHeight<=t)return!1;const e=this.$list.children(".option-e").find(`.${this.config.selectedClass}`)[0];e&&e.scrollIntoView()}collapse(){clearTimeout(this.blurTimeOut),this.active=!1,this.$listWrapper.removeClass("active rise"),this.$listWrapper.detach(),"function"==typeof this.opts.onCollapse&&this.opts.onCollapse()}activate(t){if(this.active)return!1;this.active=!0,this.createList();const e=this.config.padding||0,i={...flexbe_cli.helpers.dom.getElOffset(this.$customSelect[0]),width:this.$customSelect.width(),height:this.$customSelect.height()};"under"===this.config.position&&(i.top=i.top+i.height+e),this.$listWrapper.off("click.closeSelect").on("click.closeSelect",".overlay",(t=>{this.collapse();const e=document.elementFromPoint(t.clientX,t.clientY);e&&e.focus()})),this.$listWrapper.off("click.selectLi").on("click.selectLi",".dropdown-select-ul li",(t=>{const e=$(t.currentTarget);this.select(e,!0),"function"==typeof this.opts.onSelect&&this.opts.onSelect(t)})),this.$listWrapper.off("mousewheel.selectUl").on("mousewheel.selectUl",".dropdown-select-ul",(t=>{const e=t.currentTarget.scrollHeight,i=t.currentTarget.clientHeight;return!(t.currentTarget.scrollTop===e-i&&t.deltaY>0||0===t.currentTarget.scrollTop&&t.deltaY<0)})),$("body").append(this.$listWrapper),clearTimeout(this.blurTimeOut),this.$list.css({left:`${i.left}px`,top:`${i.top}px`,width:`${i.width}px`}),this.$listWrapper.outerWidth(),this.$listWrapper.toggleClass("rise",!!this.$select.closest(".m_modal, .w_widget").length),this.$listWrapper.addClass("active"),this.scrollToSelected(),"function"==typeof this.opts.onActivate&&this.opts.onActivate(t)}}class pe{static getRecaptchaSettings(){const t={env:{},...flexbe_cli.vars._project.flood&&flexbe_cli.vars._project.flood.captcha||{}};return!t.visible&&flexbe_cli.is_admin&&(t.enabled=0),t}constructor(t,e=pe.getRecaptchaSettings()){this.id=t.id,this.options=t,this.$form=t.$form,this.enabled=e.enabled,this.isOptional=e.ttl>0,this.isVisible=e.visible,this.isInvisible=!e.visible,this.inModal=!(!this.isVisible||!this.isOptional&&!t.inModal),this._widgetId=null,this._token=null}get loaded(){return"undefined"!=typeof grecaptcha}get recaptchaSiteKey(){const{env:t}=pe.getRecaptchaSettings();return this.isVisible?t.RECAPTCHA_VISIBLE_SITE_KEY:t.RECAPTCHA_INVISIBLE_SITE_KEY}init(){if(!this.enabled||!this.loaded||this._inited)return;this._inited=!0;const t=this.$form.find(".g-recaptcha-"+(this.isVisible?"visible":"invisible"));t[0]&&this.render(t[0])}getToken(){return this._token}render(t){if(!this.enabled||!this.loaded)return;let e=flexbe_cli.run.is_screen_mobile_s?"compact":"normal";this.isInvisible&&(e="invisible");const i={size:e,sitekey:this.recaptchaSiteKey,callback:t=>{this._token=t,this.closeModal(),this._onSuccess(t)},"expired-callback":()=>{this.reset(),this._onExpired()},"error-callback":()=>{this.reset(),this._onError()}};grecaptcha.ready((()=>{try{this._widgetId=grecaptcha.render(t,i)}catch(t){}"function"==typeof this.options.onRecaptchaRendered&&this.options.onRecaptchaRendered(this)}))}async runModalCaptcha(){const t=`captcha-${this.id}`;if(!this._modal){const e=$(`\n                <div class="m_modal m_${t}" data-is="modal" data-id="${t}" data-m-id="CAPTCHA">\n                    <div class="modal-data" data-overlay="true">\n                        <div class="component-bg"><div class="layer overlay"></div></div>\n                    \n                        <div class="modal-content" data-contrast="dark" data-v="1" data-as="1">\n                            <div class="close close-times"></div>\n\n                            <div class="recaptcha-title">\n                                ${flexbe_cli.locale.tr("quiz::captcha_label")}\n                            </div>\n\n                            <div id="recaptcha-${this.id}" class="g-recaptcha g-recaptcha-visible"></div>\n                        </div>\n                    </div>\n                </div>\n            `);flexbe_cli.modal.$list.append(e);const i=await flexbe_cli.entity.initArea(e);this._modal=i[0]}flexbe_cli.events.trigger("ui_modal_open",{id:t,options:{hash:!1,rise:!0,onClose:()=>{this._token||this._onError()}}});const e=this._modal.$area.find(".g-recaptcha");null!=this._widgetId?this.reset():this.render(e[0])}closeModal(){this._modal&&flexbe_cli.events.trigger("ui_modal_close",{id:this._modal.id})}runInvisibleChallenge(){this.enabled&&this.loaded&&!this.isVisible&&(grecaptcha.ready((()=>grecaptcha.execute(this._widgetId))),$('iframe[title="recaptcha challenge"]').parent().parent().css("z-index",2e3))}reset(){this.enabled&&this.loaded&&(this._token=null,null!=this._widgetId&&grecaptcha.ready((()=>grecaptcha.reset(this._widgetId))),"function"==typeof this.options.onReset&&this.options.onReset(this))}_onError(...t){"function"==typeof this.options.onError&&this.options.onError(this,...t)}_onSuccess(...t){"function"==typeof this.options.onSuccess&&this.options.onSuccess(this,...t)}_onExpired(...t){"function"==typeof this.options.onExpired&&this.options.onExpired(this,...t)}}const ue={phone:{RU:["+7 (***) ***-**-**","8 (***) ***-**-**"],KZ:["+7 (***) ***-**-**","8 (***) ***-**-**"],UA:["+38 (***) ***-****"],BY:["+375 ** *******"],US:["+1 (***) ***-****"]}};function me(t){if(void 0===window.IMask)return;const e={signed:!0,lazy:!0,padFractionalZeros:!0,definitions:"tel"===t.getAttribute("type")?{"*":/\d/,"#":/\d/}:{"#":/\d/,"@":/[A-Za-z\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./}},i=t.required;let s=t.getAttribute("data-mask");s=s&&!/[ #()*@{}]/.test(s)?function(t){const e=String(t).toLowerCase(),i=flexbe_cli.locale.country;let s=ue[e]&&ue[e][i];return s&&"string"==typeof s&&(s=[s]),Object.assign([],s)}(s):[s];try{if(s=s.filter((t=>/[ #()*@_{}]/.test(t))),s=s.map((t=>t.replace(/0/g,"\\0"))),0===s.length)throw{message:"Mask is empty"};s=1===s.length?String(s[0]):s.map((t=>({...e,mask:t})));const n=new window.IMask(t,{...e,mask:s,dispatch:(t,e)=>{const i=e.compiledMasks;if(1===i.length)return i[0];const s=(e.value+t).replace(/\W/g,"");return i.find((t=>{const e=t.mask.replace(/\W/g,"")[0];return s[0]===e}))||i[0]}}),a=()=>{n.masked.isComplete||!i&&!n.value?t.setAttribute("data-mask-complete",!0):t.removeAttribute("data-mask-complete"),t.setAttribute("value",n.value)};t.value&&a(),n.on("accept",a),$(t).on("focus",(e=>{requestAnimationFrame((()=>{$(t).trigger("click")}))})),t._mask=n}catch(e){e instanceof Error&&console.error("MASK ERROR:",{masks:s,errorMessage:e.message}),t.removeAttribute("data-mask")}}const ge="default";var fe=Ot("listeners"),ve=Ot("context"),ye=Ot("addEventListeners");class we{constructor(t,e=!1){Object.defineProperty(this,ye,{value:be}),Object.defineProperty(this,fe,{writable:!0,value:new Map}),Object.defineProperty(this,ve,{writable:!0,value:null}),this.strict=!1,Bt(this,ve)[ve]=t||this,this.strict=e}on(t,e){return Bt(this,ye)[ye](t,e,!1),this}one(t,e){return Bt(this,ye)[ye](t,e,!0),this}off(t,e){return(Array.isArray(t)?t:t.split(" ")).forEach((t=>{const[i,...s]=t.includes(".")?t.split("."):[t,ge],n=s.join(".")||ge;(i?[Bt(this,fe)[fe].get(i)]:[...Bt(this,fe)[fe].values()]).filter(Boolean).forEach((t=>{Array.from(t.entries()).forEach((([i,s])=>{e&&e!==i||s.namespace!==n||t.delete(i)})),0===t.size&&Bt(this,fe)[fe].delete(i)}))})),this}clear(){return Bt(this,fe)[fe].clear(),this}async trigger(t,...e){const[i,...s]=t.split("."),n=s.join("."),a=Bt(this,fe)[fe].get(i),o=Bt(this,fe)[fe].get("*"),r=[];return a&&a.forEach(((t,i)=>{n&&!t.namespace.startsWith(n)||(r.push(Promise.resolve(i.call(Bt(this,ve)[ve],...e))),t.once&&a.delete(i))})),o&&o.forEach(((i,s)=>{r.push(Promise.resolve(s.call(Bt(this,ve)[ve],t,...e)))})),this.strict&&0===r.length&&console.warn(`No listeners for event: ${t}`),Promise.all(r)}async emit(t,...e){return this.trigger(t,...e)}}function be(t,e,i){(Array.isArray(t)?t:t.split(" ")).forEach((t=>{const[s,...n]=t.includes(".")?t.split("."):[t,ge],a=n.join(".")||ge;Bt(this,fe)[fe].has(s)||Bt(this,fe)[fe].set(s,new Map),Bt(this,fe)[fe].get(s).set(e,{once:i,namespace:a})}))}const $e=0,Se=1,xe=2,Ce=3,Ae=4;class Ie extends we{static async getFileHash(t){const e=t.name,i=await async function(t){return new Promise((e=>{const i=new FileReader;i.addEventListener("load",(t=>{e(t.target.result)})),i.readAsBinaryString(t)}))}(t);return flexbe_cli.helpers.utils.hashCode(e+i.slice(0,4194304))}constructor(t){super(),this.request=void 0,this.id=void 0,this.file=void 0,this.status=$e,this.name=void 0,this.uri=void 0,this.progress=0,this.file=t,this.name=t.name}async init(){this.id=await Ie.getFileHash(this.file)}upload(){this.trigger("start");const t=flexbe_cli.helpers.upload(this.file,{onProgress:(t,e)=>{e.lengthComputable&&(this.progress=e.loaded/e.total),this.trigger("progress",{jqXhr:t,progress:this.progress})},onSuccess:(t,e)=>{this.uri=t.fileUri,this.status=xe,this.trigger("success",{jqXHR:t,textStatus:e})},onError:(t,e)=>{this.progress=1,this.status="abort"===e?Ae:Ce,this.trigger("error",{jqXHR:t,textStatus:e})},onComplete:(t,e)=>{this.trigger("complete",{jqXHR:t,textStatus:e})}});return this.request=t,this.status=Se,t}async abort(){this.request&&this.status===Se&&(this.status=Ae,this.request.abort())}}let _e={};function Ee(t,e,i){const s=(t,e,i)=>{const s=t.find(".form-field-hidden"),n=Array.from(e).map((t=>t.uri)).filter((t=>t));$(`input[name="fields[${i}][value][]"]`).remove(),n.forEach((t=>s.append($(`<input class="value" type="hidden" name="fields[${i}][value][]" value="${t}">`))))};t.on(`change${e}`,".file-input--original",(async t=>{const e=Object.values(t.currentTarget.files);if(!e.length)return;const n=$(t.currentTarget),a=n.closest("[data-field-id]"),o=a.find(".file-list"),r=a.attr("data-field-id"),l=(t,e)=>function(t,e={}){const i=Object.keys(e),s=Object.values(e);return new Function(...i,`return \`${t}\`;`)(...s)}(i,{id:e,fileName:t});_e[r]||(_e[r]=[]);let h=e.map((t=>new Ie(t)));await Promise.all(h.map((t=>t.init()))),h=h.filter((t=>!_e[r].find((e=>e.id===t.id)))),h.forEach((t=>{const e=$(l(t.name,t.id));t.on("start",(()=>{a.addClass("loading"),a.removeClass("is_error"),o.append(e)})),t.on("progress",(({progress:t})=>{const i=124.853-124.853*t;e.find(".circular-loader--path").css({"stroke-dashoffset":`${i}`})})),t.on("success",(()=>{s(a,_e[r],r)})),t.on("error",((t,i)=>{"abort"!==i.textStatus&&(e.addClass("is-error"),a.addClass("is_error"),a.find(".error-text").text(flexbe_cli.locale.tr("form::error_file")))})),t.on("complete",(()=>{e.removeClass("loading"),_e[r].every((t=>1===t.progress))&&a.removeClass("loading")})),t.upload()})),_e[r].push(...h),n.val("")})),t.on(`click${e}`,".clear-files",(t=>{const e=$(t.currentTarget).parents(".file-item"),i=$(t.currentTarget).closest("[data-field-id]"),n=i.attr("data-field-id"),a=e.attr("data-id"),o=_e[n].find((t=>t.id===a));i.removeClass("is_error"),_e[n]=_e[n].filter((t=>t!==o)),e.remove(),o.abort(),s(i,_e[n],n)}))}class Pe extends Nt{constructor(...t){super(...t),this.id=this.core.id,this.eventId=`.${this.id}`,this.busy=!1,this.submitDisabled=!1,this.products=null,this.paymentData=null,this.formInited=!1,this.$form=this.$component.is("form")?this.$component:this.$component.find("form"),this.$formSubmit=this.$component.find(".form-submit"),this.$button=this.$formSubmit.find(".component-button"),this.$fields=this.$component.find(".form-fields"),this.action=this.$component.find('input[name="action"]').val(),this.payProducts=this.$component.find('input[name="products"]').val(),this.isInline=this.$component.attr("data-inline")?1:0,this.inCart=this.$component.closest(".w_widget").length>0,this.inModal=this.$component.closest(".m_modal").length>0,this.$masked=this.$component.find("[data-mask]"),this.$calendars=this.$component.find(".form-field-date__input"),this.$file=this.$component.find(".file-input-outer"),this.$file.length&&(this.$itemTemplateFile=this.$itemTemplateFile||this.$file.find("template").clone()),this.$masked.length&&(this.hasMaskedField=!0,this.require.push("/_s/lib/imask/imask.min.js?v1")),this.$calendars.length&&(this.hasCalendarField=!0,this.require.push("/_s/lib/scroll-lock/scroll-lock.min.js"),this.require.push("/_s/lib/calendar/dist/js/calendar.js?v2.3.4","/_s/lib/calendar/dist/css/calendar.min.css?v2.3.4"))}onLoad(){(this.core.wasScreen||this.core.wasBeside)&&(this.hasMaskedField&&this.inputMask(),this.hasCalendarField&&this.inputDate())}onScreen({state:t}){if(!t)return!1;this.formInit()}onBeside({state:t}){if(!t)return!1;this.formInit()}onOpen(t={}){const{top:e}=this.component.getBoundingClientRect();!flexbe_cli.run.is_screen_mobile&&flexbe_cli.run.is_preview&&flexbe_cli.resize.viewportHeight>e+100&&this.$component.find(".form-field").eq(0).find("input, textarea").eq(0).focus(),t&&t.data&&this.setData(t.data)}onResize(){this.$component.find(".range-outer").trigger("resize")}formInit(){if(this.formInited)return!1;this.formInited=!0,this.$form.attr("action",`/mod/project/${flexbe_cli.group_id}/lead/send/`),this.unbindEvents(),this.bindEvents(),this.initCaptcha(),this.customize()}customize(){this.fileInput(),this.customSelect(),this.textResize(),this.inputRange(),this.deliveryField(),this.hasMaskedField&&this.isLoaded&&this.inputMask(),this.hasCalendarField&&this.isLoaded&&this.inputDate(),this.$component.find(".form-field-range").trigger("resize")}unbindEvents(){this.$component.off(this.eventId),this.$form.off(this.eventId)}bindEvents(){const t=this.$component.find('.form-field-text__input, .form-field-text__textarea, input[type="checkbox"]'),e=this.$component.closest(".scroller");t.on(`keydown${this.eventId}`,(e=>{const i=e.key||"",s="Enter"===i,n=e.ctrlKey||e.metaKey,a=e.currentTarget,o=a.getAttribute("data-check");if(s){e.preventDefault();const i=t.index(e.currentTarget),s=t.eq(i+1);s.length?s.trigger("focus"):this.$form.trigger("submit")}return!("phone"===o&&!a._mask&&!n&&1===i.length&&/[^\d ()+-]/.test(i))&&(("email"!==o||!/[\s,]/.test(i))&&void 0)})),t.on(`input${this.eventId} change${this.eventId}`,(t=>{const e=t.currentTarget,i=$(e);i.attr("value",e.value),i.closest(".is_error").removeClass("is_error")})),this.hasCalendarField&&(this.inModal||this.inCart)&&setTimeout((()=>{const t=this.$calendars.toArray().map((t=>$(t).data("calendar"))).filter((t=>t));e.on(`scroll${this.eventId}`,(()=>{t.forEach((t=>t.main.toPosition()))}))}),150),this.$formSubmit.find('button[type="button"]').on(`click${this.eventId}`,(()=>{this.$form.trigger("submit")})),this.$form.off("submit").on(`submit${this.eventId}`,(t=>((async()=>{if("function"==typeof this.beforeSend){if(!1===await this.beforeSend())return!1}try{await this.sendForm()}catch(t){alert(t.message)}})(),t.preventDefault(),t.stopPropagation(),!1)))}setData(t){if(!t)return!1;t&&t.fields&&this.addFields(t.fields),t&&t.items&&this.addItems(t.items)}defineBeforeSend(t){"function"==typeof t&&(this.beforeSend=t)}defineAfterSent(t){"function"==typeof t&&(this.afterSent=t)}defineOnRequestError(t){"function"==typeof t&&(this.onRequestError=t)}addFields(t,e=!0){const i=this.$component.find(".form-fields-advanced");t.length&&i[0]&&(e&&this.resetFields(),t.forEach((t=>{i.find(`input[name="${t.name}"]`).remove();const e=$("<input>").attr("type",t.type).attr("name",t.name).attr("value",t.value);i.append(e)})))}resetFields(){const t=this.$component.find(".form-fields-advanced");t[0]&&t.empty()}addItems(t=[]){if(!t||!t.length)return;let e=0;t=t.map((t=>{var i;return"object"!=typeof t?{}:(t.price=null==t.price?null:parseFloat(t.price)||0,t.title="string"==typeof t.title&&t.title.trim()||t.title||"",e+=(null!=(i=t.price)?i:0)*t.count||0,t)})),this.products=t||[],e&&(this.pays={price:e,desc:""})}async sendForm(t){if(this.submitDisabled)return void setTimeout((()=>{this.$formSubmit.addClass("shake"),setTimeout((()=>{this.$formSubmit.removeClass("shake")}),500)}),30);if(this.busy||!this.validateForm())return!1;this.captcha&&t&&this.captcha.reset();const e=this.captcha&&this.captcha.getToken();if(this.captcha&&this.captcha.enabled&&!this.captcha.isOptional&&!e){if(this.captcha.inModal)return void this.captchaModalRun();if(this.captcha.isInvisible)return void this.captchaInvisibleRun()}this.addSubmitting();const i=new FormData(this.$form.get(0)),s=i.get("id");if(i.append("is_ajax","true"),i.delete("fileOriginal"),s.includes("cart_")||i.append("forceUpdateProduct","true"),this.products)i.append("products",JSON.stringify(this.products));else if("pay"===this.action&&this.payProducts){let t,e=JSON.parse(this.payProducts);if(e=Array.isArray(e)?e[0]:e,e.productId){const[i]=flexbe_cli.ecommerce.productsStore.getProducts([e.productId]);if(i){const s=i.currentVariant(e.variantId).getCartData("image");s.img=Tt(s.img[0]),t=JSON.stringify([{...s,count:1,strict:e.strict,id:`product_${e.productId}:${e.variantId||"default"}`}])}}else e.title&&e.price&&(t=JSON.stringify([{id:`${flexbe_cli.p_id}_${flexbe_cli.s_id}`,title:e.title,img:e.img&&Tt(e.img),price:e.price,count:1}]));i.delete("products"),t&&i.append("products",t),this.pays={price:t.price,desc:t.desc}}this.pays&&(i.append("pay[price]",this.pays.price),i.append("pay[desc]",this.pays.desc)),i.append("pageId",flexbe_cli.p_id),i.append("jsform",JSON.stringify(parseInt(448312,10))),flexbe_cli.stat.u_id&&i.append("userId",flexbe_cli.stat.u_id),i.append("utmData",JSON.stringify(flexbe_cli.utm.data)),"roistat"in window&&i.append("roistatVisit",window.roistat.visit);const n=flexbe_cli.stat.AB.getCookie();i.append("abTest",JSON.stringify(n)),i.delete("g-recaptcha-response"),e&&i.append("captcha-token",e),flexbe_cli.run.is_OSX&&"function"==typeof i.entries&&i.forEach(((t,e)=>{"object"==typeof t&&t instanceof File&&0===t.size&&"function"==typeof i.delete&&i.delete(e)}));const a=this.$form.attr("action"),o={type:"POST",dataType:"json",processData:!1,contentType:!1,data:i};try{const t=await flexbe_cli.helpers.fetch(a,o);t.send_formdata=!0,null!=t.pay&&(this.paymentData=t.pay),this.showDone(i),this.captchaRemoveError(),"redirect"!==this.action&&this.clearSubmitting(!0)}catch(t){const i=t.data;if(i&&i.captcha){if(this.captcha)e?this.captchaAddError():this.captcha.inModal?this.captchaModalRun():this.captcha.isInvisible&&(this.captcha.isOptional=!1,this.captchaInvisibleRun());else{const t="visible"===i.captcha;await this.initCaptcha({...pe.getRecaptchaSettings(),enabled:!0,visible:t,ttl:1}),t?this.captchaModalRun():(this.captcha.isOptional=!1,this.captchaInvisibleRun())}return}await this.sendFormError(t)}}async sendFormError(t){this.clearSubmitting(),console.error("sendForm error: ",t),"function"==typeof this.onRequestError?await this.onRequestError(t,this):t.status&&500===t.status&&alert("Network error")}addSubmitting(){this.busy=+Date.now(),this.$component.addClass("submitting"),this.$button.addClass("submitting")}clearSubmitting(t=!1){this.busy&&(this.$component.removeClass("submitting"),this.$button.removeClass("submitting"),t?(this.$component.addClass("success"),this.$button.addClass("success"),this.$component.find(".file-list").empty(),this.$component.find("input.value").remove(),setTimeout((()=>{this.busy=!1,this.$component.removeClass("success"),this.$button.removeClass("success")}),1e3)):this.busy=!1)}showDone(t){if("function"==typeof this.afterSent&&this.afterSent(),flexbe_cli.stat.reachGoals({mainGoal:flexbe_cli.stat.getGoal("order_done"),goal:this.$component.find('input[name="goal"]').val(),htmlGoal:this.$component.find('textarea[name="goal_html"]').val()}),"pay"===this.action)if(void 0!==this.paymentData&&null!==this.paymentData){if(this.paymentData.pay_link.length>0){const t=`${window.location.origin+window.location.pathname+(window.location.search?`${window.location.search}&`:"?")}pay_id=${this.paymentData.pay_id}&h=${this.paymentData.pay_hash}`;try{window.history.pushState(null,null,t),setTimeout((()=>{flexbe_cli.events.trigger("pay",{action:"init"})}),200)}catch(e){setTimeout((()=>{document.location=t}),500)}}}else window.location.hash="pay",flexbe_cli.events.trigger("pay",{action:"success",withoutPay:!0});else if("redirect"===this.action){const t=this.$component.find('input[name="action_redirect"]');let e;t&&t.length&&(e=t.val()),e&&setTimeout((()=>{flexbe_cli.helpers.links.gotoLink(e),this.clearSubmitting(!0)}),500)}else if("code"===this.action){if(!flexbe_cli.run.is_preview)return;const e=t=>{const e={...t,fields:[]};for(const i in t)if(i.startsWith("fields[")){const s=i.match(/^fields\[(\d+)\]\[(\w+)\]$/);if(s){const n=s[1],a=s[2];let o=e.fields.find((t=>t.id===n));o||(o={id:n},e.fields.push(o)),o[a]=t[i],delete e[i]}else{const s=i.match(/^fields\[(\d+)\]\[(\w+)\]\[\]$/);if(s){const n=s[1],a=s[2];let o=e.fields.find((t=>t.id===n));o||(o={id:n},e.fields.push(o)),o[a]||(o[a]=[]),o[a].push(t[i]),delete e[i]}}}return e.abTest=JSON.parse(t.abTest),e.utmData=JSON.parse(t.utmData),e},i=t=>{const i={};return t.forEach(((t,e)=>{i.hasOwnProperty(e)?Array.isArray(i[e])?i[e].push(t):i[e]=[i[e],t]:i[e]=t})),e(i)};new(0,async function(){}.constructor)("formData",this.$component.data("code")||"")(i(t))}else{let t=this.$component.find("[data-modal-id]").attr("data-modal-id");if(/^(form|done)$/.test(t)&&!flexbe_cli.modal.find(t)){t=`${String(this.id).split("_")[0]}_${t}`}flexbe_cli.events.trigger("ui_modal_open",{id:t})}const e=new Event("submitted",{bubbles:!0});this.$form.get(0).dispatchEvent(e),this.resetForm()}resetForm(){this.$component.find(".file-input-outer").removeClass("active");const t=this.$fields.find("input, textarea, select"),e=t.not("select").not('[type="hidden"]').not(".form-field-range__input").not(".g-recaptcha-response"),i=t.filter("select"),s=t.filter(".form-field-range__input");i.each(((t,e)=>{const i=e.querySelector("option"),s=i&&i.value||"";e.value!==s&&(e.value=s,e.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0})))})),s.each(((t,e)=>{e.value=e.getAttribute("data-value"),e.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))})),e.each(((t,e)=>{const i=e.defaultChecked;if(["radio","checkbox"].includes(e.type))i?e.setAttribute("checked",!0):e.removeAttribute("checked"),e.checked=i;else{e.removeAttribute("value"),e.value="",e.removeAttribute("data-mask-complete");const t=e._mask;t&&t.updateValue()}e.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))})),this.captcha&&this.captcha.enabled&&(this.captcha.reset(),this.captchaRemoveError()),this.paymentData=null,_e={},this.$form.get(0).reset(),this.resetFields()}validateForm(){let t=!0,e=!0,i=!0;this.removeFieldsErrors();const s=this.$component.find(".policy-data-warning--checkbox"),n=s.find("input")[0];n&&!n.checked&&(t=!1,s.addClass("is_error")),this.$component.find(".form-field[data-type]").each(((t,s)=>{let n;const a=$(s),o=a.find("input, textarea, select").not('[type="hidden"]')[0],r=a.attr("data-type");if(!o&&"captcha"!==r)return;const l=o.type,h="checkbox"===l?o.checked:"file"===l?a.find("input.value"):o.value;if("captcha"===r){if(!this.captcha)return;n=!this.captcha.getToken()&&flexbe_cli.locale.tr("form::captcha_not_checked")}else n=this.checkField(a,o);if(n){const t=a.attr("data-type"),i=a.find(".error");a.outerWidth(),a.addClass("is_error"),i.length&&(i.attr("title",n),i.find(".error-text").text(n)),"checkbox"===t&&a.find(".form-field-checkbox__box").attr("title",n),e=!1}i&&h&&"captcha"!==r&&(i=!1)})),this.$fields.removeClass("all-fields-empty"),this.$fields.outerWidth(),e||this.$fields.addClass("has-error");const a=this.$component.find(".is_error");return a.addClass("animate"),setTimeout((()=>{a.removeClass("animate")}),500),i&&(this.$fields.toggleClass("all-fields-empty",i),e=!1),e&&t}checkField(t,e){if(e.disabled||e.hidden)return!1;const i=e.type,s="checkbox"===i?e.checked:"file"===i?t.find("input.value"):e.value,n=e.required,a=e.getAttribute("data-check")||!1;let o=!(!n||s)&&"form.required";if(e._mask&&e.getAttribute("data-mask")||!1){!n&&!s||e.getAttribute("data-mask-complete")||(o="tel"===i&&s?"form.phone":"text"===i&&s?"form.text":"form.required")}else if(a)if("date"===a||"datetime"===a){const t=$(e).data("calendar"),i=t&&t.input.checkError();i&&(o=i)}else if(s.length&&"email"===i){/^(([^\s"(),.:;<>@[\\\]]+(\.[^\s"(),.:;<>@[\\\]]+)*)|(".+"))@((\[(?:\d{1,3}\.){3}\d{1,3}])|(([\wЁА-яё-]+\.)+[A-Za-zЁА-яё]{2,}))$/.test(s)||(o="form.email")}else if(s.length&&"tel"===i)if(/[^\d\s()+-]/.test(s))o="form.digits";else{s.replace(/\D/g,"").length<5&&(o="form.minlength")}else"file"===i&&(o=n&&!s.length?"form.required":!!t.hasClass("loading")&&"form.loading");return o=o&&flexbe_cli.locale.tr(o)||!1,o}removeFieldsErrors(){this.$fields.removeClass("has-error"),this.$component.find(".is_error").removeClass("is_error animate"),this.$fields.outerWidth()}disableSubmit(t){this.submitDisabled=!0,this.$formSubmit.attr("data-tip",t||""),this.$button.attr("disabled","disabled"),flexbe_cli.tip.init(this.$formSubmit)}enableSubmit(){this.submitDisabled=!1,this.$formSubmit.removeAttr("data-tip"),this.$button.removeAttr("disabled"),flexbe_cli.tip.destroy(this.$formSubmit)}async initCaptcha(t){return null==t&&(t=pe.getRecaptchaSettings()),new Promise(((e,i)=>{!this.captcha&&t.enabled&&(this.captcha=new pe({id:this.id,$form:this.$component,inModal:this.isInline,onSuccess:t=>{this.captchaRemoveError(),this.clearSubmitting(),(t.inModal||t.isInvisible)&&this.sendForm()},onError:()=>{this.captchaAddError()}},t),flexbe_cli.require(`https://www.google.com/recaptcha/api.js?render=explicit&hl=${flexbe_cli.vars._project.language}`,(()=>{let t=150;const s=setInterval((()=>{t-=1,this.captcha.loaded?(this.captcha.init(),clearInterval(s),e()):0===t&&i(new Error("Can not load grecaptcha"))}),10)})))}))}captchaAddError(t){if(!this.captcha||!this.captcha.enabled)return;null==t&&(t=flexbe_cli.locale.tr("form::captcha_error"));const e=this.$component.find(".captcha-global-error");e.find(".error-text").text(t),e.addClass("show"),this.busy&&this.clearSubmitting()}captchaRemoveError(){if(!this.captcha||!this.captcha.enabled)return;const t=this.$component.find('.form-field[data-type="captcha"]'),e=this.$component.find(".captcha-global-error");t.removeClass("is_error"),e.removeClass("show")}captchaModalRun(){this.captcha&&this.captcha.enabled&&this.captcha.loaded&&this.captcha.runModalCaptcha()}captchaInvisibleRun(){if(!this.captcha||!this.captcha.enabled||!this.captcha.loaded||this.captcha.isVisible)return;this.addSubmitting(),this.captcha.runInvisibleChallenge();const t=this.busy;setTimeout((()=>{t===this.busy&&this.clearSubmitting()}),2500)}fileInput(){var t;Ee(this.$component,this.eventId,null==(t=this.$itemTemplateFile)?void 0:t.html())}textResize(){this.$component.find(".autosize").each(((t,e)=>{const i=e.offsetHeight-e.clientHeight,s=$(e),n=getComputedStyle(e),a=+s.attr("rows")||0,o=parseInt(n.borderTop,10)+parseInt(n.borderBottom,10),r=parseInt(n.paddingTop,10)+parseInt(n.paddingBottom,10);let l=Math.round(+n.lineHeight.split("px")[0]);if(flexbe_cli.run.is_ios){l/=parseInt(n.textSizeAdjust||n.webkitTextSizeAdjust||"120%",10)/100}s.removeAttr("data-autoresize"),s.off(".autoresize").on("keyup.autoresize input.autoresize",(function(t){const e=t.currentTarget;e.style.height=`${e.scrollHeight+i}px`})),s.css("minHeight",`${o+r+l*a}px`)}))}customSelect(){this.$component.find(".dropdown-container").remove();const t=this.$component.find("select.atom-custom-select"),e={dropdownClass:this.$component.hasClass("style-underlined")?"sharp size--medium ":"size--medium "};t.each(((t,i)=>{const s=$(i).closest('[data-type="select"]');de.create({element:i,config:e,onCollapse:()=>{s.removeClass("active")},onActivate:()=>{s.addClass("active"),s.siblings('[data-type="select"]').removeClass("active")}})}))}deliveryField(){if(this.$delivery=this.$component.find('[data-type="delivery"]'),!this.$delivery.length)return;const{promotionStore:t,cartStore:e,deliveryStore:i}=flexbe_cli.ecommerce,s=()=>{const t=i.activeMethod;if(!t)return;const e=this.$delivery,s=e.find(".form-field-delivery-item"),n=e.find(".form-field-delivery-fields"),a=s.filter(`[data-delivery="${t.id}"]`),o=n.filter(`[data-delivery="${t.id}"]`);s.removeClass("form-field-delivery-item--active"),a.addClass("form-field-delivery-item--active"),n.removeClass("form-field-delivery-fields--active"),o.addClass("form-field-delivery-fields--active"),n.find("input, textarea, select").prop("disabled",!0),o.find("input, textarea, select").prop("disabled",!1),s.find("input[type=radio]").prop("checked",!1),a.find("input[type=radio]").prop("checked",!0)},n=()=>{this.$delivery.find(".form-field-delivery-item").each(((t,e)=>{const s=e.getAttribute("data-delivery"),n=$(e).find(".item-price"),a=$(e).find(".delimiter"),o=$(e).find(".min-total"),r=i.getPrice(s),l=`${flexbe_cli.locale.tr("form.min_total_tip")} ${r.minTotalFormatted}`;r.notHasFree||r.untilFree&&r.notFixedPrice?(n.text(""),a.text("")):(n.text(r.currentFormatted),a.text("–")),o.text(flexbe_cli.locale.tr(l))}))};s(),n(),setTimeout((()=>{i&&i.on(`dispatch.form-component-${this.id}`,(({name:t})=>{"selectMethod"===t&&s()})),e&&e.on(`dispatch.form-component-${this.id}`,(()=>{n()})),t&&t.on(`dispatch.form-component-${this.id}`,(()=>{n()}))}),10),this.$delivery.on("change",".form-field-delivery-item input",(t=>{if(t.currentTarget.checked){const e=t.currentTarget.closest("[data-delivery]").getAttribute("data-delivery");i.dispatch("selectMethod",e)}}))}inputRange(){this.$component.find(".form-field-range").each(((t,e)=>new he($(e))))}inputMask(){return"undefined"!=typeof IMask&&(this.hasMaskedField=!1,this.$masked.each(((t,e)=>{me(e);const i=!!e.getAttribute("data-placeholder"),s=e._mask;i&&s&&($(e).on(`focus${this.eventId}`,(()=>{s.updateOptions({lazy:!1})})),$(e).on(`blur${this.eventId}`,(()=>{if(!s.unmaskedValue){const t=s.mask.replace(/\*/g,"_"),e=s.value;s.updateOptions({lazy:!0}),s.masked.rawInputValue&&t!==e||(s.unmaskedValue="",s.value="",s.updateValue())}})))})),!0)}inputDate(){this.hasCalendarField=!1;const t=this.$component.closest(".scroller")[0];return this.$calendars.each(((e,i)=>{!function(t,e){const i=$(t),s=i.closest("[data-type]").attr("data-type"),n=i.attr("data-date-range")||"any",a=i.attr("data-date-work-days")||"0,1,2,3,4,5,6";let o=(new Date).getFullYear()+3;"datetime"===s&&(o=(new Date).getMonth()>=8?(new Date).getFullYear()+1:(new Date).getFullYear());let r=new Date((new Date).getFullYear()-100,0,1),l=new Date(o,11,31);"datetime"!==s&&"future"!==n||(r=new Date),"date"===s&&"past"===n&&(l=new Date);const h={type:s,lowerLimit:r,upperLimit:l,dateRange:n,locale:flexbe_cli.locale.translation.calendar,dateFormat:flexbe_cli.locale.date_format,showDateSelector:"date"===s&&"future"!==n,insertTo:e,workDays:a.split(","),workTime:null};if("datetime"===s){const t=i.attr("data-date-time-interval")||30,e=i.attr("data-date-time-start")||"00:00",s=i.attr("data-date-time-finish")||"00:00";h.workTime={interval:t,start:{hour:+e.substring(0,2),minute:+e.substring(3,5)},finish:{hour:+s.substring(0,2),minute:+s.substring(3,5)}}}i.calendar(h)}(i,t)})),!0}}Pe.is="form";class ke extends Nt{get showOnClick(){return"click"===this.showType||"mobile"===flexbe_cli.resize.responsiveMode||flexbe_cli.run.is_touch}get showOnHover(){return"hover"===this.showType&&"desktop"===flexbe_cli.resize.responsiveMode&&flexbe_cli.run.is_pointer}get actualDirection(){return"desktop"===flexbe_cli.resize.responsiveMode?this.direction:this.directionAdaptive}get showAsRollup(){return"mobile"===flexbe_cli.resize.responsiveMode&&"true"===this.$component.attr("data-rollup-adaptive")}constructor(...t){var e;super(...t),this.eventId=null==(e=this.core)?void 0:e.id,this.rootModal="modal"===this.core.is&&this.core,this.$menuList=this.$component.find(".component-menu-list--root"),this.showType=this.$component.attr("data-type"),this.direction=this.$component.attr("data-direction"),this.directionAdaptive=this.$component.attr("data-direction-adaptive"),this.allowShowMore=this.$component.attr("data-show_more"),this.isNested=!!this.$menuList.find(".folder-item").length,this.openFolders=[]}onBeside({state:t,first:e}){t&&e&&(this.bindEvents(),this.dispatchShowMore(),this.$button=this.$component.find(".folder-item"))}onResize(t={}){["bottom","top"].includes(t.type)||(this.dispatchShowMore(),this.openFolders.forEach((t=>{t.$dropdown?this.setDropdownPosition(t):this.showAsRollup||this._closeFolder(t)})))}onWindowResize(){this.onResize()}onHideShowUI(){this._closeFolder()}onClose(){this.toggleFolder(null,!1)}bindEvents(){$(window).off(`.${this.eventId}`),this.$component.off(".menu"),flexbe_cli.is_admin&&this.$component.on("mouseup.menu.prevent pointerdown.menu.prevent pointerup.menu.prevent",".folder-item",(t=>{t.stopPropagation()})),$(window).on(`blur.${this.eventId}`,(()=>{this.showAsRollup||this._closeFolder()})),this.$component.on("pointerenter.menu.item pointerleave.menu.item",".menu-item",(t=>{if("desktop"===flexbe_cli.resize.responsiveMode){const e="pointerenter"===t.type;this.$component.toggleClass("in-hover",e),$(t.currentTarget).toggleClass("hover",e)}})),this.$component.on("pointerenter.menu.folder",".folder-item",(t=>{this.showOnHover&&(clearTimeout(this._dropdownTimer),$(t.currentTarget).hasClass("show")||(this._dropdownTimer=setTimeout((()=>{flexbe_cli.events.trigger("component_menu:closeAll"),this.toggleFolder(t.currentTarget,!0)}),50)))})),this.$component.on("pointerdown.touchfix",(t=>{t.target.closest("a")||t.preventDefault()})),this.$component.on("pointerleave.menu.folder",".folder-item",(()=>{this.showOnHover&&(clearTimeout(this._dropdownTimer),this._dropdownTimer=setTimeout((()=>{flexbe_cli.events.trigger("component_menu:closeAll")}),100))})),this.$component.on("click.menu",".folder-item-text, .show-more",(t=>{if(this.showOnClick)return this.toggleFolder(t.currentTarget),!1})),flexbe_cli.events.off(`component_menu:closeAll.${this.eventId}`).on(`component_menu:closeAll.${this.eventId}`,(()=>{this.openFolders.forEach((t=>this.toggleFolder(t,!1)))}))}observeItems(){let t,e=!0;const i=this.$component.find("li.root-item")[0];this.unobserveItems(),this._resizeObserver=new ResizeObserver((()=>{e?e=!1:(clearTimeout(t),t=setTimeout((()=>{this.onResize({})}),30))})),this._resizeObserver.observe(i)}unobserveItems(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}dispatchShowMore(){if(!this.allowShowMore||"mobile"===flexbe_cli.resize.responsiveMode||"column"===this.actualDirection)return void this.restoreMenuItems();this.$componentCopy?this.restoreMenuItems():this.$componentCopy=this.$component.clone();const t=getComputedStyle(this.$component[0]),e=this.$component.innerWidth(),i=this.$menuList.innerWidth(),s=parseInt(t.getPropertyValue("--gapX"),10)||0,n=e+2*s;if(i<=n)return this.observeItems(),!1;const a=this.$menuList.find("li.root-item");this.$menuList.append('\n            <li class="menu-item root-item folder-item show-more">\n                <svg viewBox="0 0 18 4">\n                    <path transform="rotate(-90 2 2)" d="M4 2a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm0 7a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm-2 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/>\n                </svg>\n\n                <ul class="component-menu-list component-menu-list--nested"></ul>\n            </li>\n        ');const o=this.$menuList.find(".show-more .component-menu-list--nested");let r=18+2*s;a.toArray().forEach((t=>{const e=t.offsetWidth;r+e>n&&(o.append(t),$(t).removeClass("root-item")),r+=e})),this.observeItems()}restoreMenuItems(){const t=this.$menuList.find(".show-more");if(t.length){if(this.$componentCopy){const t=this.$componentCopy.find(".component-menu-list--root").clone();this.$menuList.html(t.html())}else{const e=t.find(".component-menu-list").eq(0).children();e.addClass("root-item"),t.replaceWith(e)}this.$menuList.css({position:"",top:"",left:""}),this.unobserveItems()}}toggleFolder(t,e){t=$(t).closest(".folder-item")[0],null==e&&(e=!$(t).hasClass("show")),this[e?"_openFolder":"_closeFolder"](t)}toggleNestedFolder(t,e){null==e&&(e=!$(t).hasClass("show")),this[e?"_openNestedDropdown":"_closeNestedDropdown"](t)}_openFolder(t){const e=$(t);if(!e.length||e.hasClass("show"))return;const i=!flexbe_cli.run.is_preview&&!!this.$component.closest("[data-editor*=menu]:not(.editor-focus)").length,s=!flexbe_cli.run.is_preview&&!!this.$component.closest(".editor-focus").length;if(!i){if(this.showAsRollup)e.find(".component-menu-list--nested").eq(0).slideDown(350),e.addClass("show");else{flexbe_cli.events.trigger("component_menu:closeAll");const i=$("body"),n=e.find(".component-menu-list--nested").eq(0).clone(),a=$(`<div class="component-menu-dropdown ${s?"editor-focus":""}"></div>`);t.$dropdown=a;const o=getComputedStyle(t),r=["--gapY","--fontSize","--lineHeight","--fontWeight","--letterSpacing","--itemFontStyle","--itemTextDecoration"].reduce(((t,e)=>({...t,[e]:o.getPropertyValue(e)})),{});if(a.css(r),this.$component.addClass("in-show"),e.addClass("show"),a.append(n).appendTo(i),this.setDropdownPosition(t),this.component.closest(".m_modal, .fixed-area")){let e=flexbe_cli.helpers.dom.scrollParent(this.component);e===document.documentElement&&(e=document),$(e).one(`scroll.${this.eventId}`,(()=>{this.setDropdownPosition(t)}))}a.off("pointerenter").on("pointerenter",(()=>{clearTimeout(this._dropdownTimer)})),i.on(`keydown.dropdown-${this.eventId}`,(t=>{"Escape"===t.code&&this._closeFolder()})),i.on(`click.dropdown-${this.eventId}`,(t=>{t.target.closest(".folder-item")||this._closeFolder()})),a.off("pointerleave").on("pointerleave",(()=>{clearTimeout(this._dropdownTimer),this.toggleNestedFolder(null,!1),this.showOnHover&&(this._dropdownTimer=setTimeout((()=>{this.toggleFolder(t,!1)}),100))})),a.on("pointerenter.menu.folder pointerleave.menu.folder",".menu-item",(t=>{$(t.currentTarget).toggleClass("hover","pointerenter"===t.type)})),flexbe_cli.run.is_touch?a.on("click.menu.folder",".folder-item",(t=>{this.toggleNestedFolder(t.currentTarget)})):(a.on("pointerenter.menu.folder",".folder-item",(t=>{this.toggleNestedFolder(t.currentTarget,!0)})),a.on("pointerleave.menu.folder",".folder-item",(t=>{this.toggleNestedFolder(t.currentTarget,!1)})))}this.openFolders.push(t)}}_closeFolder(t){const e=t?$(t):this.$menuList.find(".folder-item.show");let i=flexbe_cli.helpers.dom.scrollParent(this.component);i===document.documentElement&&(i=document),$("body").off(`.dropdown-${this.eventId}`),this.$component.removeClass("in-show"),$(i).off(`.${this.eventId}`),this.showAsRollup?e.find(".component-menu-list--nested").slideUp(350):(e.find(".component-menu-list--nested").css("display",""),e.each(((t,e)=>{e.$dropdown&&e.$dropdown.remove()}))),e.removeClass("show"),e.find(".show").removeClass("show"),this.openFolders=this.openFolders.filter((t=>!e.is(t)))}_openNestedDropdown(t){const{viewportWidth:e,documentHeight:i}=flexbe_cli.resize,s=$(t),n=s.siblings(".nested-item.show"),a=s.find(".component-menu-list--nested").eq(0),o=s.offset(),r=s.innerWidth(),l=s.innerHeight(),h=o.left,c=h+r,d=o.top,p=d+l,u=a.innerWidth(),m=a.innerHeight(),g=h>u,f=e-c>u,v=d>m,y=i-p>m;if(n.each(((t,e)=>this._closeNestedDropdown(e))),s.addClass("show"),a.addClass("show-dropdown"),f)a.addClass("in-right");else if(g)a.addClass("in-left");else{const t=e>u?u:r;a.addClass("in-right"),a.css({maxWidth:`${r}px`,marginTop:"15px",marginLeft:`-${Math.floor(t-(e-c)+10)}px`})}y?a.addClass("in-bottom"):v?a.addClass("in-top"):a.addClass("in-bottom")}_closeNestedDropdown(t){const e=$(t),i=e.find(".component-menu-list--nested").eq(0);e.removeClass("show"),i.removeClass("show-dropdown in-left in-right in-bottom in-top")}setDropdownPosition(t){if(!t||!t.$dropdown)return;const{documentHeight:e,viewportHeight:i}=flexbe_cli.resize,s=$(t),n=t.$dropdown,a=s.hasClass("show-more"),o=s.closest("[data-fixed]").length,r=n.find(".component-menu-list--nested").eq(0),l=a?s.find("svg"):s.children().first().find("span"),h=l[0].getBoundingClientRect(),c=l.offset(),d=c.left,p=c.top,u=p+h.height,m=document.body.getBoundingClientRect(),g=parseInt(r.find(".menu-item-text").css("paddingLeft"),10)||10,f={position:"absolute",width:r.innerWidth(),height:r.innerHeight(),top:u,left:d-m.left-g};if(f.width<h.width&&(f.width=h.width+2*g,r.css("width","100%")),a&&(f.left=d+h.width/2-f.width/2),flexbe_cli.run.is_preview){const t=Math.max(0,7-f.left),e=Math.max(0,f.left+f.width+7-m.width);t?f.left+=t:e&&(f.left-=e)}const v=u+f.height>e&&p>f.height,y=u+f.height>flexbe_cli.scroll.latest+i;o&&f.height+h.bottom<i?(f.position="fixed",f.top=h.bottom,f.left+=m.left):(v||this.rootModal&&y)&&(f.top=p-f.height),n.toggleClass("rise",o),n.css(f)}}ke.is="menu";class Fe extends te{}Fe.is="button";class Te extends Nt{constructor(t){super(t),this.id=void 0,this.editingObserver=void 0,this.$elementCart=null,this.$cartDropdown=null,this.showDropdown=!1,this.forbidDropdownClose=!1,this.openTimer=null,this.closeTimer=null,this.eventId=null,this.id=this.core.id,this.onLoad()}get cartStore(){return flexbe_cli.ecommerce.cartStore}onLoad(){this.$elementCart=this.$component.find(".cart-element-button-holder"),this.eventId=`${this.id}`,this.events(),flexbe_cli.is_admin&&this.manageDropdownInEditor(),this.setCartData()}onDestroy(){this.editingObserver&&this.editingObserver.disconnect(),this.showDropdown&&this.closeDropdown()}events(){this.cartStore.off(`dispatch.cart-element-${this.eventId}`).on(`dispatch.cart-element-${this.eventId}`,(({name:t})=>{if("addItem"===t){const t=this.$component.find(".cart-element-button");t.removeClass("blink"),t.outerWidth(),t.addClass("blink")}this.setCartData()}));const t=this.$component,e="true"===this.$elementCart.attr("data-show-product-list"),i="mobile"===flexbe_cli.resize.responsiveMode;t.on(`mouseenter.${this.eventId}`,(()=>{flexbe_cli.run.is_preview&&(clearTimeout(this.closeTimer),this.closeTimer=null,this.showDropdown||!e||i||(this.openTimer=setTimeout((()=>this.openDropdown()),150)))})),t.on(`mouseleave.${this.eventId}`,(()=>{flexbe_cli.run.is_preview&&(clearTimeout(this.openTimer),this.showDropdown&&(this.closeTimer=setTimeout((()=>{this.closeTimer&&this.closeDropdown()}),150)))})),document.addEventListener("scroll",(()=>{flexbe_cli.run.is_preview&&this.showDropdown&&this.closeDropdown()}),{passive:!0}),window.addEventListener("blur",(()=>{flexbe_cli.run.is_preview&&this.showDropdown&&this.closeDropdown()})),this.$elementCart.off("click").on("click",(()=>{flexbe_cli.run.is_preview&&flexbe_cli.events.trigger("ui_cart_open")}))}dropdownEvents(){"true"===this.$elementCart.attr("data-show-product-list")&&this.$cartDropdown&&(this.$cartDropdown.on(`mouseenter.${this.eventId}`,(()=>{clearTimeout(this.closeTimer),this.closeTimer=null})),this.$cartDropdown.on(`mouseleave.${this.eventId}`,(()=>{this.showDropdown&&!this.forbidDropdownClose&&(this.closeTimer=setTimeout((()=>this.closeDropdown()),150))})),this.$cartDropdown.off("click.cart-element-products-list-button").on("click.cart-element-products-list-button",".cart-element-products-list-button",(()=>{flexbe_cli.events.trigger("ui_cart_open"),this.closeDropdown()})))}manageDropdownInEditor(){const t=$("body"),e={attributes:!0,attributeFilter:["class"],attributeOldValue:!1,characterData:!1,childList:!1,subtree:!1},i=()=>{this.forbidDropdownClose=!0,this.openDropdown()},s=()=>{const t=$(".cart-element-products-list-content");this.showDropdown=!1,this.forbidDropdownClose=!1,t.remove()},n=()=>{const e=this.core.$area&&this.core.$area.hasClass("entity-state--editing")&&t.hasClass("state--hide-editor")&&!t.hasClass("state--hide-cart-element-dropdown"),n=this.$elementCart.hasClass("has-list");e!==this.showDropdown&&(e&&n&&!this.showDropdown?i():this.showDropdown&&s())};this.editingObserver&&this.editingObserver.disconnect(),this.editingObserver=new MutationObserver((t=>{t.forEach((()=>n()))})),this.editingObserver.observe(this.core.$area[0],e),this.editingObserver.observe(t[0],e),n()}openDropdown(){const t="true"===this.$elementCart.attr("data-show-product-list");if(!("mobile"===flexbe_cli.resize.responsiveMode)&&!this.showDropdown&&t){const t=$(".cart-element-products-list-holder"),{top:e,left:i}=this.$elementCart.offset(),s=this.$elementCart.outerWidth(),n=this.$elementCart.outerHeight();t.length&&(t.remove(),this.$cartDropdown=null),this.$cartDropdown=$(`<div class="cart-element-products-list-holder ${flexbe_cli.is_admin?"without-animation":""}" data-id="dropdown_${this.id}"></div>`),$("body").append(this.$cartDropdown),this.showDropdown=!0,this.renderDropdownList(),this.dropdownEvents();const a=this.$cartDropdown.outerWidth(),o=e+n;let r=i+s/2-a/2;r<=0?r=i:i+a>=flexbe_cli.resize.viewportWidth&&(r=i+s-a),this.$cartDropdown.css({left:r,top:o})}}closeDropdown(){const t=$(".cart-element-products-list-holder"),e=$(".cart-element-products-list-content");this.showDropdown=!1,e.addClass("fade-out"),setTimeout((()=>{e.remove(),t.remove(),this.$cartDropdown=null}),180)}renderDropdownList(){if(!this.$cartDropdown)return;const t=this.cartStore.getList(),e=flexbe_cli.locale.tr("element_cart.title"),i=flexbe_cli.locale.tr("cart.total"),s=flexbe_cli.locale.tr("element_cart.empty"),n=`\n                <div class="cart-element-products-list-content" data-contrast="dark">\n                    <div class="cart-element-products-list-info">\n                        <span class="text-medium">${e}</span>\n                    </div> \n                    <ul class="cart-element-products-list">`,a=`\n                </ul>\n                <div class="cart-element-products-list-info">\n                    <span class="text-medium">${i}</span>\n                    <span class="text-medium">${flexbe_cli.locale.formatMoney(this.cartStore.getTotal())}</span>\n                </div>\n                <div class="cart-element-products-list-button"></div>\n            </div>`,o=`\n                    <div class="cart-element-products-list-content" data-contrast="dark">\n                        <div class="empty-text">${s}</div>\n                    </div>`;let r="";t&&t.length?(r+=n,t.forEach((t=>{r+=(t=>{const e=t.optionsInfo?t.optionsInfo.map((t=>t.name)).join(", "):"";return`<li class="cart-element-products-list-item" data-id="${t.id}">\n                        <span class="base-info">\n                            <span class="title">${t.title||"-"}</span>\n                            <span class="price text-gray">${t.count>1?`${t.count} x `:""}\n                                ${null==t.price?flexbe_cli.locale.tr("ecommerce::card::price::empty"):flexbe_cli.locale.formatMoney(t.price)}\n                            </span>\n                        </span>\n                        ${e?`<span class="variant-info">${e}</span>`:""}\n                    </li>`})(t)})),r+=a,this.$cartDropdown.html(r),this.renderButton()):this.$cartDropdown.html(o)}renderButton(){if(!this.$cartDropdown)return;const t=this.$cartDropdown.find(".cart-element-products-list-button"),e=this.$component.find(".component-button");t.html(""),t.append(e.clone())}setCartData(){this.$elementCart.find(".cart-element-button-count").text(this.cartStore.getCount()),this.$elementCart.find(".cart-element-text .price").text(flexbe_cli.locale.formatMoney(this.cartStore.getTotal())),this.toggleSum(),this.toggleList()}toggleSum(){const t="true"===this.$elementCart.attr("data-show-sum")&&this.cartStore.getList().length>0;this.$elementCart.find(".cart-element-text .price").toggleClass("show",t),this.$elementCart.find(".cart-element-text .text").toggleClass("show",!t)}toggleList(){this.$elementCart.toggleClass("is-empty",0===this.cartStore.getList().length)}}Te.is="element-cart";class De{constructor(t){this.inited=!1,this.loaded=!1,this.destroyed=!1,this.abortController=new AbortController,this.options=t,this.target=t.target}async init(){this.inited=!0,await this.whenLoaded(),this.loaded=!0}destroy(){this.abortController.abort(),this.destroyed=!0}whenLoaded(t=(()=>{})){return new Promise((e=>{if(this.loaded)return t(),void e();if("video"===this.type)this.loaded=!0,t(),e();else{let i=!1;const s=setTimeout((()=>{this.loaded=!0,i||(i=!0,t(),e())}),1e3);$(this.target).one("load",(()=>{clearTimeout(s),this.loaded=!0,i||(i=!0,t(),e())}))}}))}async play(){}pause(){}onLoadData(){var t,e;null==(t=(e=this.options).onLoadData)||t.call(e)}onPlay(){var t,e;null==(t=(e=this.options).onPlay)||t.call(e)}onPause(){var t,e;null==(t=(e=this.options).onPause)||t.call(e)}onError(t){var e,i;null==(e=(i=this.options).onError)||e.call(i,t)}}class Re extends De{constructor(...t){super(...t),this.type="embed"}async init(){const t=this.target;if(!t)return;const e=t.getAttribute("data-src"),i=t.getAttribute("src");e&&!i&&(t.src=e),this.inited=!0,await this.whenLoaded(),this.loaded=!0}async play(){var t;await this.whenLoaded(),null==(t=this.target.contentWindow)||t.postMessage("play","*")}async pause(){var t;null==(t=this.target.contentWindow)||t.postMessage("pause","*")}}class Me extends De{constructor(...t){super(...t),this.type="embed"}async init(){const t=this.target,e=t.getAttribute("data-src"),i=t.getAttribute("src"),s=t=>{t!==window.YT.PlayerState.BUFFERING&&t!==window.YT.PlayerState.PLAYING||this.onLoadData(),t===window.YT.PlayerState.PLAYING?this.onPlay():t!==window.YT.PlayerState.PAUSED&&t!==window.YT.PlayerState.ENDED||this.onPause()};e&&!i&&(t.src=e),this.inited=!0,await this.whenLoaded(),flexbe_cli.require([`https://www.youtube.com/iframe_api?origin=${window.location.host}`],(()=>{!this.destroyed&&this.target.isConnected&&Kt((()=>{var t;return null==(t=window.YT)?void 0:t.Player}),(()=>{this.ytVideo=new window.YT.Player(t,{events:{onStateChange:t=>s(t.data),onReady:()=>s(this.ytVideo.getPlayerState())}})}))})),this.loaded=!0}async play(){var t;await this.whenLoaded(),null==(t=this.target.contentWindow)||t.postMessage('{"event":"command","func":"playVideo","args":""}',"*")}async pause(){var t;null==(t=this.target.contentWindow)||t.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")}}class Le extends De{constructor(...t){super(...t),this.type="embed"}async init(){const t=this.target,e=t.getAttribute("data-src"),i=t.getAttribute("src");e&&!i&&(t.src=e),this.inited=!0,await this.whenLoaded(),flexbe_cli.require(["https://player.vimeo.com/api/player.js"],(()=>{!this.destroyed&&this.target.isConnected&&(this.vPlayer=new window.Vimeo.Player(t),this.vPlayer.on("play",(()=>this.onPlay())),this.vPlayer.on("pause",(()=>this.onPause())))})),this.loaded=!0}async play(){await this.whenLoaded(),this.vPlayer&&this.vPlayer.play()}async pause(){this.vPlayer&&this.vPlayer.pause()}}class Be extends Re{constructor(...t){super(...t),this.type="embed",this.playerReady=!1,this.player=void 0}async init(){const t=this.target;if(!t)return;const e=t.src||t.dataset.src;this.inited=!0,this.loaded=!0,t.id=crypto.randomUUID();try{if(await flexbe_cli.require(["https://player.kinescope.io/latest/iframe.player.js"],null,5e3),this.destroyed||!t.isConnected)return;const i=Object.fromEntries(new URL(e).searchParams.entries());this.player=await Kinescope.IframePlayer.create(t.id,{url:e,playlist:[],behavior:{preload:"none",playsInline:!0,autoPlay:!!i.autoplay&&"viewable",autoPause:!1,localStorage:!1,loop:"1"===i.loop,muted:"1"===i.muted},ui:{controls:"0"!==i.controls,language:["ru","kz","by"].includes(flexbe_cli.vars._page.language)?"ru":"en"}}),this.player.on(Kinescope.IframePlayer.Events.Play,(()=>this.onPlay())),this.player.on(Kinescope.IframePlayer.Events.Pause,(()=>this.onPause()))}catch(i){if(this.destroyed||!t||!t.isConnected)return;console.error(i),t.src!==e&&(t.src=e),await this.whenLoaded()}this.playerReady=!0}async destroy(){super.destroy(),this.player&&await this.player.destroy()}async play(){return new Promise((t=>{Kt((()=>this.playerReady),(async()=>{var e;await(null==(e=this.player)?void 0:e.play()),t()}),7e3)}))}async pause(){this.player&&await this.player.pause()}}class ze extends De{constructor(...t){super(...t),this.type="video"}async init(){const t=this.target,e=t.getAttribute("data-src"),i=t.getAttribute("src");if(t.addEventListener("error",(t=>this.onError(t.error))),t.addEventListener("loadeddata",this.onLoadData.bind(this)),t.addEventListener("playing",this.onPlay.bind(this)),t.addEventListener("pause",this.onPause.bind(this)),e&&!i){const i=document.createElement("source");i.addEventListener("error",(t=>this.onError(t.error))),i.setAttribute("type","video/mp4"),i.setAttribute("src",e),t.appendChild(i),t.load()}this.inited=!0,await this.whenLoaded(),this.loaded=!0}async play(){await this.whenLoaded(),await this.target.play()}async pause(){this.target.pause()}}class Oe extends Re{constructor(...t){super(...t),this.playerReady=!1}async init(){await super.init();window.addEventListener("message",(t=>{let e=t.data;if("string"==typeof e)try{e=JSON.parse(t.data)}catch(t){}t.source===this.target.contentWindow&&(["player:ready","player:changeState"].includes(e.type)&&(this.playerReady=!0),"player:changeState"===e.type&&("playing"===e.data.state?this.onPlay():"paused"===e.data.state&&this.onPause()))}),{signal:this.abortController.signal})}async play(){this.command("player:mute"),this.command("player:setCurrentTime",{time:0}),this.command("player:play")}async pause(){this.command("player:pause")}command(t,e={}){Kt((()=>this.loaded&&this.playerReady),(()=>{var i;null==(i=this.target.contentWindow)||i.postMessage(JSON.stringify({type:t,data:e}),"*")}))}}var Ve=Ot("set");class He extends Nt{constructor(...t){let e;switch(super(...t),Object.defineProperty(this,Ve,{value:We}),this.$preview=this.$component.find(".component-video__preview"),this.$iframe=this.$component.find("iframe"),this.$video=this.$component.find("video.custom-video"),this.type=this.$component.data("type"),this.autoplay=!!+this.$component.data("autoplay"),this.autoInit=this.autoplay||!this.$preview.length||this.$preview.hasClass("no-image"),this.type){case"custom":e=ze;break;case"youtube":e=Me;break;case"vimeo":e=Le;break;case"kinescope":e=Be;break;case"rutube":e=Oe;break;default:e=Re}this.provider=new e({target:"custom"===this.type?this.$video[0]:this.$iframe[0],onPlay:this.onPlay.bind(this),onPause:this.onPause.bind(this),onError:this.onError.bind(this),onLoadData:this.onLoadData.bind(this)}),this.$preview.removeAttr("hidden"),this.$preview.on("click",(async()=>{await Bt(this,Ve)[Ve](),await this.play(!0)})),this.$component.off("sliderActivate").on("sliderActivate",(async()=>{this.preventAutoplay=!1,this.inScreen&&this.autoInit&&(await Bt(this,Ve)[Ve](),this.autoplay&&await this.play())})),this.$component.off("sliderDeactivate").on("sliderDeactivate",(async()=>{this.preventAutoplay=!0,await this.pause()}))}onDestroy(){this.provider.destroy()}async onScreen({state:t}){t?(this.autoInit&&await Bt(this,Ve)[Ve](),this.autoplay&&!this.preventAutoplay&&await this.play()):await this.pause()}async play(t=!1){this.isAutoplaying=!t,this.isPaused=!1,this.$preview.off("click").addClass("preloading");try{await this.provider.play(),this.$preview.fadeOut(150,(()=>{this.$preview.remove(),this.$component.removeClass("overlayed")}))}catch(t){if("custom"===this.type){const t=this.$video.attr("data-image");this.$video.attr("poster",t)}}}async pause(){this.isAutoplaying=!1,this.isPaused=!0;try{await this.provider.pause()}catch(t){}}onPlay(){this.preventAutoplay=!1,this.autoplay||flexbe_cli.is_admin||"mobile"!==flexbe_cli.resize.responsiveMode||!this.component.closest('[data-hidden="desktop"]')||(this.viewportLocked=!0,flexbe_cli.resize.lockMode(!0)),this.autoplay&&this.isAutoplaying||(this.sliderAutoplayPrevented=!0,this.$component.trigger("reduceSliderControls",{state:!0}))}onPause(){this.inScreen&&(this.preventAutoplay=!0),this.viewportLocked&&(this.viewportLocked=!1,flexbe_cli.resize.lockMode(!1)),this.sliderAutoplayPrevented&&(this.sliderAutoplayPrevented=!1,this.$component.trigger("reduceSliderControls",{state:!1}))}onError(t){console.error(t)}onLoadData(t){this.$component.addClass("started")}}async function We(){this.provider.inited||(this.$component.addClass("loading"),await this.provider.init(),this.$component.removeClass("loading"),this.$component.addClass("loaded"))}He.is="video";const qe={};class Ne extends Nt{constructor(t){super(t),this.isImgLoaded=!1,this.params=null,this.imageLoadingOptions=flexbe_cli.vars._project.images,this.lazyLoad=this.component.hasAttribute("data-img-lazy"),this.autoLoad=this.component.hasAttribute("data-img-autoload"),this.hasImagePlaceholder=this.component.hasAttribute("data-has-placeholder"),this.imageLayer=this.$component.find(".component-image__image").get(0)||this.component,this.overlay=this.$component.find(".overlay-container").get(0)}async onInit(){this.autoLoad&&!this.lazyLoad&&await this.loadImage(),this.$component.off(".componentImage"),this.$component.on("setImage.componentImage",$.debounce((async t=>{var e;("lazyPriority"!==(null==(e=t.detail)?void 0:e.reason)||this.autoLoad)&&(this.autoLoad=!0,this.lazyLoad=!0,!this.isVisible||this.isImgLoading||this.isImgLoaded||await this.loadImage())}),10))}async onBeside({state:t}){if(!t)return!1;!this.isImgLoaded&&this.autoLoad&&await this.loadImage()}async onResize(){this.isImgLoaded&&this.autoLoad&&(clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout((()=>this.loadImage(!0)),1e3))}onHideShowUI(t){requestAnimationFrame((()=>{var t;this.component&&null!=(t=this.params)&&t.position&&(this.component.style.setProperty("--imagePositionX",this.params.position.x),this.component.style.setProperty("--imagePositionY",this.params.position.y))}))}async loadImage(t=!1){if(this.setParams(),!t&&(this.isImgLoaded||this.isImgLoading))return;let e;this.setOverlay();const i=this.params;i.original_resolution||(e=await this.getOptimalSize(),e&&qe[this.params.id].sizes&&!qe[this.params.id].sizes.includes(e)&&qe[this.params.id].sizes.push(e)),this.isImgLoading=!0;const s=Dt(i,e,this.imageLoadingOptions);if(this.hasImagePlaceholder&&s)try{await kt(s)}catch(t){return void console.error("Image preload error",t)}this.setImage(s),this.isImgLoading=!1}async getOptimalSize(){const t=this.params,e=await Rt(t);t.proportion=e,qe[this.params.id]&&(qe[this.params.id].params.proportion=e);const i=this.componentWidth||this.component.offsetWidth,s=this.componentHeight||this.component.offsetHeight;let{width:n}=await Lt(this.params,{width:i,height:s},this.imageLoadingOptions);const a=n-2,o=Math.max(50,1.2*n);return n=this.getClosestSize(n,a,o),n}setImage(t){const{$component:e,params:i}=this;t&&("image"===i.type?this.imageLayer.src=t:"background"===i.type&&(this.imageLayer.style.backgroundImage=`url(${t})`),this.isImgLoaded||(e.removeClass("loading"),this.isImgLoaded=!0),e.trigger("load"))}setOverlay(){const{overlay:t,componentWidth:e,componentHeight:i}=this;if(!t)return;let s="medium";e<=200||i<=150?s="xsmall":e<=400||i<=250?s="small":e>=650&&i>=400&&(s="large"),t.setAttribute("data-size",s),"hover"===t.getAttribute("data-type")&&$(t).on("mouseenter mouseleave touchstart touchend",(e=>{const i=/enter|start/.test(e.type);$(t).toggleClass("hover",i)}))}setParams(){var t;if(this.params)return;const e=this.component,i=$(e);let s={};const n=i.attr("data-img-id");if(null!=(t=qe[n])&&t.params)s={...qe[n].params};else if(s.id=n,s.ext=i.attr("data-img-ext"),s.proportion=+i.attr("data-img-proportion"),s.position={x:i.attr("data-img-x")||"50%",y:i.attr("data-img-y")||"50%"},!s.ext){const t=(i.attr("data-img-name")||"image.jpg").match(/\.(\D{2,4})$/i)||[];t[1]&&s.ext!==t[1]&&(s.ext=t[1]||!1)}s.type=i.attr("data-img-type"),s.action=i.attr("data-action"),s.proportion||(s.proportion=100),s.scale=i.attr("data-img-scale")||"cover",s.original_resolution=e.hasAttribute("data-img-original"),qe[s.id]||(qe[s.id]={params:{...s},sizes:[]}),s.animated=e.hasAttribute("data-img-animated"),s.transparent=e.hasAttribute("data-img-transparent"),this.params=s}getClosestSize(t,e=t,i=t+10){var s;const n=qe[this.params.id].sizes||[];let a,o=1/0;return n.forEach((s=>{const n=Math.abs(s-t);s>=e&&s<=i&&n<o&&(a=s,o=n)})),null!=(s=a)?s:t}}Ne.is="image";const je=new Array(70).fill(1).map(((t,e)=>50+50*e));class Ye extends Nt{constructor(...t){super(...t),this.isCreated=void 0,this.isImgLoaded=void 0,this.isLazyLoading=void 0,this.image=void 0,this.imageLoadingOptions=void 0}async onInit(){this.$component.on("setImage",(async()=>{this.isVisible&&!this.isImgLoaded&&(this.isCreated||this.create(),await this.loadImage())}))}async onBeside({state:t}){t&&(this.isCreated||this.create(),this.isLazyLoading&&!this.isImgLoaded&&await this.loadImage())}async onResize(){this.isCreated&&await this.loadImage()}create(){const t=this.$component.data();this.imageLoadingOptions=flexbe_cli.vars._project.images,this.isLazyLoading=!!t.imgLazy,this.image={url:t.imgUrl||null,id:t.imgId,ext:t.imgExt,proportion:t.imgProportion,width:t.imgWidth,animated:t.imgAnimated,transparent:t.imgTransparent,scale:t.imgScale,type:"background"},this.isCreated=!0}async loadImage(){const t=this.$component.find(".vector-icon use"),e=this.$component.find(".custom-icon");if(t.length&&t.attr("href",this.image.url),e.length){let t=this.image.url;if(this.image.id){const e={width:this.componentWidth,height:this.componentHeight},{width:i}=await Lt(this.image,e,{...this.imageLoadingOptions,sizes:je});t=Dt(this.image,i,this.imageLoadingOptions)}t&&e.css("background-image",`url(${t})`)}this.isImgLoaded=!0}}Ye.is="icon";const Xe="swiper-slide";class Ge extends Nt{constructor(...t){super(...t),this.require=["/_s/lib/swiper8/dist/swiper-bundle.min.js?v847"];const{component:e}=this;this.swiper=null,this.initialSlide=0,this.index=$(e).closest("[data-item-id]").attr("data-item-id"),this.sliderEl=e.classList.contains("swiper")?e:e.querySelector(".swiper"),this.paginationEl=e.querySelector(".slider-pagination"),this.prevEl=e.querySelector('.slider-prev, [data-direction="prev"]'),this.nextEl=e.querySelector('.slider-next, [data-direction="next"]'),this.$component.on("bringIntoView",(t=>{const e=this.swiper,i=$(this.sliderEl).find(`.${Xe}`),s=$(t.target).closest(`.${Xe}`),n=i.index(s);e?-1!==n&&e.slideTo(n):this.initialSlide=n})),this.setSwiperOptions()}onLoad(){this.inScreen&&!this.swiper&&this.initSwiper()}onScreen({state:t}){t&&this.isLoaded&&!this.swiper&&this.initSwiper()}onView({state:t}){this.isLoaded&&(t&&!this.swiper&&this.initSwiper(),this.swiper&&this.toggleAutoplay({state:t}))}onResize(){this.swiper&&(this.setSliderSize(),this.setThumbnailsSize(),this.swiper&&this.swiper.initialized&&this.swiper.update())}onDestroy(){this.destroySwiper()}onHideShowUI(t){this.setSwiperOptions("editor"!==t),this.destroySwiper(),this.initSwiper()}setSwiperOptions(t=flexbe_cli.run.is_preview){const e=this.paginationEl&&this.paginationEl.getAttribute("data-type")||"bullets",i=this.paginationEl&&this.paginationEl.getAttribute("data-direction")||"horizontal",s=!!Number(this.$component.attr("data-loop")),n=Number(this.$component.attr("data-autoplay"));this.options={paginationType:e,direction:i,count:this.$component.attr("data-count"),loop:t&&s,autoplay:t&&n||!1,effect:this.$component.attr("data-effect")||"slide",slidesPerView:"auto"}}initSwiper(){if(this.swiper||"undefined"==typeof Swiper)return!1;const{options:t,component:i,core:s,root:n,index:a,sliderEl:o,paginationEl:r,prevEl:l,nextEl:h}=this,c=`${s&&s.id||"-"}:${a}`,{count:d,loop:p,paginationType:u,effect:m,direction:g}=t,f=4===flexbe_cli.theme_id,v=this.owner.closest(".swiper-inited"),y=!!t.autoplay&&{delay:1e3*t.autoplay,stopOnLastSlide:!p,disableOnInteraction:!1,waitForTransition:!1};let w=this.initialSlide;flexbe_cli.run.is_preview||(n._sliderState?n._sliderState[c]&&(w=Math.max(0,Math.min(d-1,n._sliderState[c])||0)):n._sliderState={},n._sliderState[c]=w);const b={el:r,type:u,clickable:!0,dynamicBullets:f,dynamicMainBullets:3};"thumbs"===u&&(b.type=!1,b.el=null,this.thumbsSwiper=new Swiper(r,{cssMode:!0,loop:!1,slidesPerView:"auto",normalizeSlideIndex:!1,direction:g}));const S=new Swiper(o,{init:!1,speed:350,nested:v,slideClass:Xe,initialSlide:w,autoplay:y,pagination:b,thumbs:{swiper:this.thumbsSwiper},navigation:{prevEl:l,nextEl:h},effect:m,rewind:p,roundLengths:!0,preventInteractionOnTransition:!0,updateOnWindowResize:!1,slidesPerView:t.slidesPerView,simulateTouch:!flexbe_cli.run.isTouch&&flexbe_cli.run.is_preview,longSwipesMs:100,longSwipesRatio:.1,preloadImages:!1,touchReleaseOnEdges:!1,runCallbacksOnInit:!1});var x;if(this.swiper=S,"fade"===m?oe(S):f&&((x=S).params.virtualTranslate=!0,x.params.cssMode=!0),S.onAny(((t,e)=>{S.el.dispatchEvent(new CustomEvent(`swiper:${t}`,{detail:e,bubbles:!1,cancelable:!0}))})),S.on("init",(()=>{var t;if(!S.slides)return;this.setSliderSize(),this.setThumbnailsSize(),null!=this.swiper&&this.swiper.$el.addClass("swiper-inited"),$(l).add(h).add(r).removeClass("disabled");const e=S.slides[w],i=S.visibleSlides||[S.slides[w]];this.thumbsSwiper&&null!=(t=this.thumbsSwiper.visibleSlides)&&t.length&&i.push(...this.thumbsSwiper.visibleSlides),ae(i),e&&ne(e,!1,"sliderActivate"),this.toggleAutoplay({state:this.inView})})),this.thumbsSwiper&&this.thumbsSwiper.on("slideChange",$.debounce((t=>{ae(t.visibleSlides)}),50)),S.on("slideChange",$.debounce((()=>{if(!S.initialized)return;flexbe_cli.run.is_preview||(n._sliderState[c]=S.realIndex);const t=S.slides[S.previousIndex],e=S.slides[S.activeIndex],s=e&&e.getAttribute("data-type"),a=S.previousIndex<S.activeIndex?Array.from(S.slides).slice(S.activeIndex,S.activeIndex+2):Array.from(S.slides).slice(S.activeIndex-2,S.activeIndex);i.setAttribute("data-current-content",s),ne(t,null,"sliderDeactivate"),ne(e,null,"sliderActivate"),ae(a)}),50)),S.on("touchStart",(()=>{$(o).addClass("swiper-in-interacting")})),S.on("touchEnd",(()=>{$(o).removeClass("swiper-in-interacting")})),S.params.cssMode){let t;S.on("slideChange",(()=>{clearTimeout(t),S.animating=!0,S.allowSlidePrev=!1,S.allowSlideNext=!1,t=setTimeout((()=>{S.animating=!1,S.allowSlidePrev=!0,S.allowSlideNext=!0}),150)}))}this.$component.off("reduceSliderControls").on("reduceSliderControls",((t,{state:e=!0})=>{this.preventAutoplay=!!e,this.preventAutoplay&&this.toggleAutoplay({state:!1})})),this.$component.off("pointerenter").one("pointerenter",(()=>{const t=Array.from(S.slides||[]),e=[S.activeIndex-1,S.activeIndex+1].map((e=>t.at(e)));ae(e)})),this.$component.off("pointerdown wheel").on("pointerdown wheel",(()=>{this.toggleAutoplay({state:!1})})),((t,i=0,...s)=>{e(t,i)(...s)})((()=>S.init()))}destroySwiper(){if(this.swiper)try{this.swiper.destroy()}catch(t){}finally{this.swiper=null}}toggleAutoplay({state:t}){const{swiper:e,options:i}=this;if(!e||!i.autoplay||!e.autoplay)return!1;this.preventAutoplay&&(t=!1);const s=e.autoplay.running;t&&!s&&e.autoplay.start(),!t&&s&&e.autoplay.stop()}slideTo(t,e=!0){if(!this.swiper)return void(this.initialSlide=t);const i=this.swiper.params.loop;void 0!==this.swiper.realIndex&&this.swiper.realIndex!==t&&(i?this.swiper.slideToLoop(t,e?null:0):this.swiper.slideTo(t,e?this.swiper.params.speed:0))}setSliderSize(){const t=this.$component.find(".swiper");if(!t.length)return;const e=t[0];e.style.width="";const i=e.getBoundingClientRect().width,s=e.offsetWidth;if(i%1>0&&Math.abs(s-i)<2){e.style.width=`${Math.round(i)}px`;try{this.swiper.update()}catch(t){}}}setThumbnailsSize(){if(!this.thumbsSwiper||"thumbs"!==this.options.paginationType)return;const t="horizontal"===this.options.direction,e=$(this.paginationEl),i=e.find(".thumb-item"),s=i.length,n=this.thumbsSwiper.params.slidesPerView;e.add(i).css({"--thumbSize":"","--thumbPad":"",width:"",height:""});const a=parseInt(i.css("--thumbPad"),10),o=t?e[0].offsetWidth:e[0].offsetHeight,r=t?i[0].offsetWidth:i[0].offsetHeight;let l=Math.max(2,Math.round(o/(r+a)));s>=2&&(s===l+1||s===l-1)?l=s:!n||n!==l+1&&n!==l-1||(l=n),e.toggleClass("is-filled",s>=l),this.thumbsSwiper.params.slidesPerView=l,this.thumbsSwiper.params.spaceBetween=a,this.thumbsSwiper.update(),this.thumbsSwiper.slides.forEach((t=>{t.style.setProperty("--thumbSize",`${t.swiperSlideSize}px`)}))}}Ge.is="slider";[Qt,te,He,Ne,Ge,le,Ye,ke,class extends Pe{},Fe,Te].forEach((t=>{_t.registerComponent(t)}))}();
