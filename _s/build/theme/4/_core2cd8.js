!function(){"use strict";var t=Object.freeze({__proto__:null,hashCode:function(t){return String(t).split("").reduce(((t,e)=>0|(t=(t<<5)-t+e.charCodeAt(0))),0).toString(16)},when:function(t,e,i){let o;return"function"==typeof e&&"function"==typeof t&&(t()?e():(i&&setTimeout((()=>{clearInterval(o),e()}),i),o=setInterval((()=>{t()&&(clearInterval(o),e())}),25))),()=>clearInterval(o)}});function e(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var i=0;function o(t){return"__private_"+i+++"_"+t}const n="default";var s=o("listeners"),a=o("context"),r=o("addEventListeners");class l{constructor(t,i=!1){Object.defineProperty(this,r,{value:c}),Object.defineProperty(this,s,{writable:!0,value:new Map}),Object.defineProperty(this,a,{writable:!0,value:null}),this.strict=!1,e(this,a)[a]=t||this,this.strict=i}on(t,i){return e(this,r)[r](t,i,!1),this}one(t,i){return e(this,r)[r](t,i,!0),this}off(t,i){return(Array.isArray(t)?t:t.split(" ")).forEach((t=>{const[o,...a]=t.includes(".")?t.split("."):[t,n],r=a.join(".")||n;(o?[e(this,s)[s].get(o)]:[...e(this,s)[s].values()]).filter(Boolean).forEach((t=>{Array.from(t.entries()).forEach((([e,o])=>{i&&i!==e||o.namespace!==r||t.delete(e)})),0===t.size&&e(this,s)[s].delete(o)}))})),this}clear(){return e(this,s)[s].clear(),this}async trigger(t,...i){const[o,...n]=t.split("."),r=n.join("."),l=e(this,s)[s].get(o),c=e(this,s)[s].get("*"),d=[];return l&&l.forEach(((t,o)=>{r&&!t.namespace.startsWith(r)||(d.push(Promise.resolve(o.call(e(this,a)[a],...i))),t.once&&l.delete(o))})),c&&c.forEach(((o,n)=>{d.push(Promise.resolve(n.call(e(this,a)[a],t,...i)))})),this.strict&&0===d.length&&console.warn(`No listeners for event: ${t}`),Promise.all(d)}async emit(t,...e){return this.trigger(t,...e)}}function c(t,i,o){(Array.isArray(t)?t:t.split(" ")).forEach((t=>{const[a,...r]=t.includes(".")?t.split("."):[t,n],l=r.join(".")||n;e(this,s)[s].has(a)||e(this,s)[s].set(a,new Map),e(this,s)[s].get(a).set(i,{once:o,namespace:l})}))}var d=new class extends l{constructor(){super(),this.init()}init(){const t=window.parent!==window;if(t){const t=()=>{this.message("LOCATION_CHANGE",{title:document.title,location:window.location.toString()})};window.addEventListener("hashchange",t),window.addEventListener("popstate",t),window.addEventListener("load",t),document.addEventListener("DOMContentLoaded",(()=>{this.message("DOM_CONTENT_LOADED"),t()}))}flexbe_cli.is_admin||window.addEventListener("keydown",(e=>{const i=e.metaKey||e.ctrlKey,o=e.shiftKey;(["F2"].includes(e.key)||["/","\\"].includes(e.key)&&i&&o)&&(t?this.message("CLOSE_FRAME"):window.location.href=`https://app.flexbe.com/project/${flexbe_cli.group_id}/editor/${flexbe_cli.p_id}/`)}))}message(t,e={}){window.parent!==window&&window.parent.postMessage({message:t,payload:e},"*"),this.trigger(t,e)}};const u=2160,h={avif:null,webp:null};function p(t,e,i){return!(!t||!e||e&&"none"===i)&&("none"!==t.border&&(("color"!==i||"transparent"!==t.border&&!t.transparent)&&!("blur"===i&&t.animated)))}function m(t,e,i){const o=t.average,n=t.preview,s=t.border;let a=t.width,r=t.height;if("contain"===i){if("color"===e&&o){return`background-image: url('data:image/svg+xml;utf8,<svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;${a}&quot; height=&quot;${r}&quot; viewBox=&quot;0 0 1 1&quot; preserveAspectRatio=&quot;none&quot;><rect width= &quot;1&quot; height=&quot;1&quot; fill=&quot;${o.replace(/#/g,"%23")}&quot; /></svg>')`}if("blur"===e&&n){a=300,r=a*t.proportion/100;let e=-10,i=120,o=20;return["#FFFFFF","transparent"].includes(s)&&(e=0,i=100,o=0),`background-image: url('data:image/svg+xml;utf8,<svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;${a}&quot; height=&quot;${r}&quot;><image filter=&quot;url(%23blur)&quot; y=&quot;${e}%25&quot; x=&quot;${e}%25&quot; width=&quot;${i}%25&quot; height=&quot;${i}%25&quot; href=&quot;data:image/webp;base64,${n}&quot;/><filter id=&quot;blur&quot;><feGaussianBlur in=&quot;SourceGraphic&quot; stdDeviation=&quot;${o}&quot; /></filter></svg>')`}}return"color"===e&&o?`background-color: ${o}`:"blur"===e&&n?`background-image: url(data:image/webp;base64,${n})`:""}function f(){var t;const e="object"==typeof flexbe_cli&&(null==(t=flexbe_cli.vars)?void 0:t._project.images)||{};return{lazy:!0,lazy_priority:!1,avif:!1,webp:!1,avif_support:h.avif||e.avif_support,webp_support:h.webp||e.webp_support,slow_network:!1,quality_map:{jpg:70,webp:70,avif:55}}}async function g(t){try{const e=new Image;return"decode"in e?(e.src=t,await e.decode(),!0):await new Promise((i=>{const o=e;o.onload=()=>i(!0),o.onerror=()=>i(!1),o.src=t}))}catch(t){return!1}}async function _(t){return new Promise(((e,i)=>{const o=new Image,n=()=>{e(o),setTimeout((()=>{"function"==typeof o.remove&&o.remove()}),10)};"decode"in o&&!/\.svg/.test(t)?(o.src=t,o.decode().then(n).catch(i)):(o.onerror=i,o.onload=n,o.src=t)}))}function v(t){if("string"!=typeof t)return t;t=t.replace(/(\/img\/[\d_q]+)\/[\w-]+(\.\w{3,4})/i,"$1$2");let[,e,i,o,n]=t.match(/\/img\/(\d+)_?(\d+)?_?q?(\d+)?\.(\w{3,4})/i)||[];return i=i?+i:0,o=o?+o:"none",{id:e,ext:n,name:`${e}.${n}`,size:i,quality:o}}function b(t,e){const i=e.avif_support,o=e.webp_support,n=e.avif,s=e.webp;let a=t.ext;return i&&n?a="avif":o&&s?a="webp":"webp"===t.ext&&(a=o?"webp":t.transparent?"png":"jpg"),a}function y(t,e=null,i=null){var o;i={...f(),...i};const{id:n,ext:s}=t;if(!n)return"";e||"webp"!==t.ext||i.webp_support||(e=Math.min(t.width||u,u));const a=null!=(o=t.animated)?o:"gif"===s,r=`/img/${n}.${s}`;if(!e||a||"svg"===s)return r;const l=b(t,i),c=i.slow_network&&S();let d=i.quality_map;switch(c&&(d={jpg:50,webp:50,avif:45}),l){case"png":return`/img/${n}_${e}.png`;case"avif":case"webp":case"jpg":return`/img/${n}_${e}_q${d[l]}.${l}`;default:return r}}function w(t){const e=String(t).match(/\.(jpg|jpeg|png|gif|svg|bmp|webp)$/i);return e&&e[1]?e[1]:""}function A(t){return"transparent"!==t?t:"#000000"}function x(t){if("string"==typeof t&&(t=v(t)),!t||"object"!=typeof t)return{};let e=t.img_ext||t.ext;const i=t.img_id||t.id,o=t.img_name||t.name;e&&"false"!==e||(e=o?w(o):"jpg");const n=t.img_border||t.border;return{id:i,ext:e,average:A(t.img_average||t.average),preview:t.img_preview||t.preview||"",width:t.img_width||t.width||0,height:t.img_height||t.height||0,proportion:+(+t.img_proportion||+t.proportion||0).toFixed(2),border:n,animated:t.img_animated||t.animated||"gif"===e,transparent:t.img_transparent||t.transparent||0}}function k(t,e=0,i){return y(x(t),"number"==typeof e?Math.round(e):e,i)}async function C(t){let e=t,i=+t.proportion;if(i&&(i<2||i<5&&i%1>0)&&(i*=100),"string"==typeof e||!i){"object"==typeof e&&(e=k(t,50));const o=await _(e);i=o.naturalHeight/o.naturalWidth*100}return i}function S(){var t;if("undefined"==typeof navigator)return!1;return"4g"!==((null==(t=navigator.connection)?void 0:t.effectiveType)||"4g")}var R=Object.freeze({__proto__:null,checkFormatSupport:g,createUrl:y,getDefaultLoadingOptions:f,getExtensionFromFilename:w,getImage:x,getImageOptimalSize:async function(t,e,i){i={...f(),...i};const o=t.width||0,n=t.img_scale||t.scale||"cover",s=t.img_type||t.type||"background",a=e.height/e.width,r=await C(t)/100,l=i.slow_network&&S()?Math.min(1.5,self.devicePixelRatio):Math.min(2,self.devicePixelRatio),c=b(t,i);let d,h;return"image"===s||a>r&&"contain"===n||a<r&&"cover"===n?(d=e.width,h=d*r):(h=e.height,d=h/r),l>1&&(d*=l,h*=l),i.sizes&&(d=function(t,e){let i=(e=e.sort(((t,e)=>e-t)))[0];return e.forEach((e=>{t<i&&t<=e&&(i=e)})),i}(d,i.sizes),h=d*r),d<=150&&/webp|jpg/.test(c)&&(d=d/l*2,h=d*r),o&&d>o&&(d=o,h=d*r),d>u&&(d=u,h=d*r),{width:Math.ceil(d),height:Math.ceil(h)}},getImageProportion:C,getImageUrl:k,getOptimalExt:b,getPlaceholderStyle:m,hasImagePlaceholder:p,normalizeAverage:A,parseImageUrl:v,preloadImage:_,resolveImageSupports:async function(){var t,e;return h.avif=null!=(t=h.avif)?t:await g("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),h.webp=null!=(e=h.webp)?e:await g("data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"),h}});var E={init(){const t=document.getElementById("flexbe-vars-store");try{Object.assign(this,JSON.parse(t.getAttribute("data-store")))}catch(t){console.error("flexbe_cli.vars init error: ",t)}t.parentNode.removeChild(t)}},z=o("checkSupports"),I=o("deviceInfo"),O=o("applyClasses");async function T(){const t=flexbe_cli.vars._project.images||{},[e,i]=await Promise.all([t.webp_support||g("data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"),t.avif_support||g("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=")]);t.webp_support=e,t.avif_support=i}function P(){var t,e;const i=null==(t=window.CSS)?void 0:t.supports("zoom","1"),o=navigator.userAgent.toLowerCase();this.is_responsive=!!flexbe_cli.vars._page.responsive,this.is_screen_mobile=this.matchScreen(0,767),this.is_screen_mobile_scaled=i&&this.matchScreen(0,399),this.is_screen_desktop=this.matchScreen(768,1e4),this.is_screen_desktop_scaled=i&&this.matchScreen(768,1199),this.is_touch="ontouchstart"in window||navigator.maxTouchPoints>0||window.matchMedia("(any-pointer: coarse)").matches,this.is_pointer=!this.is_touch||window.matchMedia("(pointer: fine)").matches,this.is_tablet=/ipad|xoom|kindle|playbook|tablet/i.test(o),this.is_mobile=!this.is_tablet&&-1!==o.indexOf("mobile"),this.is_desktop=!this.is_mobile&&!this.is_tablet,this.is_chrome=/(chromium|chrome)\/(\d+)/.test(o),this.is_safari=-1!==o.indexOf("safari")&&(null==(e=o.match(/version\/(\d+)/))?void 0:e[1]),this.is_firefox=-1!==o.indexOf("firefox"),this.is_OSX=/ipad|iphone|ipod|macintosh/gi.test(o),this.is_android=-1!==o.indexOf("android"),this.is_ios=this.is_OSX&&this.is_touch&&!this.is_desktop,this.is_preview=/is-view|mode--preview|mode--generation/.test(document.body.className),this.is_bot=/bot|aolbuild|bingpreview|msnbot|baidu|duckduckgo|mediapartners-google|teoma|slurp/gi.test(o),this.is_instagram=/instagram/i.test(o),this.is_mobile&&this.is_touch?this.device_type="mobile":this.is_tablet&&this.is_touch?this.device_type="tablet":this.device_type="desktop"}function M(){const t=$(document.body);t.toggleClass("is-mobile",this.is_mobile),t.toggleClass("is-tablet",this.is_tablet),t.toggleClass("is-desktop",this.is_desktop),t.toggleClass("is-pointer",this.is_pointer),t.toggleClass("is-touch",this.is_touch),t.toggleClass("is-ios",!!this.is_ios),t.toggleClass("is-android",this.is_android),t.toggleClass("is-osx",this.is_OSX&&this.is_desktop),t.toggleClass("is-safari",!!this.is_safari),this.is_safari&&t.addClass(`is-safari-${this.is_safari}`),t.toggleClass("is-firefox",this.is_firefox),t.toggleClass("is-chrome",this.is_chrome),t.toggleClass("is-instagram",this.is_instagram)}var L=new class{constructor(){Object.defineProperty(this,O,{value:M}),Object.defineProperty(this,I,{value:P}),Object.defineProperty(this,z,{value:T}),this.is_responsive=void 0,this.is_screen_mobile=void 0,this.is_screen_mobile_scaled=void 0,this.is_screen_desktop=void 0,this.is_screen_desktop_scaled=void 0,this.is_touch=void 0,this.is_pointer=void 0,this.is_tablet=void 0,this.is_mobile=void 0,this.is_desktop=void 0,this.is_chrome=void 0,this.is_safari=void 0,this.is_firefox=void 0,this.is_OSX=void 0,this.is_android=void 0,this.is_ios=void 0,this.is_preview=void 0,this.is_bot=void 0,this.is_instagram=void 0,this.device_type=void 0}async init(){e(this,I)[I](),e(this,O)[O](),await e(this,z)[z](),$(window).on("resize.deviceInfo",(()=>{e(this,I)[I]()})),$(window).on("resized.deviceInfo",(()=>{e(this,O)[O]()})),flexbe_cli.events.on("hideShowUI",(t=>{this.is_preview=["preview","generation"].includes(t),$(document.body).removeClass("mode--editor mode--preview mode--generation").addClass(`mode--${t}`)}))}matchScreen(t,e){const i=["screen"];return null!=t&&i.push(`(min-width: ${t}px)`),null!=e&&i.push(`(max-width: ${e}px)`),window.matchMedia(i.join(" and ")).matches}};let D;var N=new class{constructor(){this.containerWidth=null,this.oldWidth=null,this.oldHeight=null,this.lockedMode=!1,this.responsiveMode=null,this.clientWidth=null,this.clientHeight=null,this.minClientHeight=null,this.maxClientHeight=null,this.lockedViewport=!1,this.viewportWidth=null,this.viewportHeight=null,this.proportion=null}init(){this.simulateWindowResized(),this.simulateDocumentResize(),this.updateSizes({triggerResize:!1}),this.watchContainerSize(),this.applySizeVariablesOnResize()}trigger(t,e=window){e.dispatchEvent(new CustomEvent(t))}updateSizes({width:t,height:e,proportion:i=null,triggerResize:o=!0,lockViewport:n}){var s,a,r,l,c;const d=document.documentElement.getBoundingClientRect().width,u=window.innerHeight,h=null!=(s=this.scrollbarWidth)?s:window.innerWidth-d;t=null!=(a=t)?a:this.lockedViewport?this.viewportWidth:d,e=null!=(r=e)?r:this.lockedViewport?this.viewportHeight:u,t=Math.min(t,d),e=Math.min(e,u);const p=t>=768&&t<=1199;(p||t>=0&&t<=399)&&(t=p?1200:400),this.oldWidth=this.clientWidth,this.oldHeight=this.clientHeight,this.viewportWidth=t,this.viewportHeight=e,this.clientWidth=d,this.clientHeight=u,this.minClientHeight=Math.min(this.clientHeight,null!=(l=this.minClientHeight)?l:this.clientHeight),this.maxClientHeight=Math.max(this.clientHeight,null!=(c=this.maxClientHeight)?c:this.clientHeight),(flexbe_cli.is_admin||this.maxClientHeight-this.minClientHeight>120)&&(this.minClientHeight=this.clientHeight,this.maxClientHeight=this.clientHeight),this.scrollbarWidth=h,null!=i&&(this.proportion=i),null!=n&&(this.lockedViewport=n),this.lockedMode||(this.responsiveMode=L.is_responsive&&t<=767?"mobile":"desktop"),o&&(this.trigger("resize"),this.trigger("resized"))}lockMode(t){this.lockedMode=t}applySizeVariablesOnResize(){L.is_desktop||flexbe_cli.is_admin;const t=$(document.documentElement),e=$(document.body),i=()=>{this.proportion?this.coverHeight=Math.round(this.viewportWidth/this.proportion):(!this.coverHeight||Math.abs(this.coverHeight-this.viewportHeight)>this.maxClientHeight-this.minClientHeight)&&(this.coverHeight=this.viewportHeight),t.css("--100vw",`${this.viewportWidth}px`),t.css("--100vh",`${this.viewportHeight}px`),t.css("--hmin",`${this.minClientHeight}px`),t.css("--hmax",`${this.maxClientHeight}px`),t.css("--cover",`${this.coverHeight}px`),t.css("--scrollbarWidth",`${this.scrollbarWidth}px`),e.toggleClass("adaptive-mobile","mobile"===this.responsiveMode),e.toggleClass("adaptive-desktop","desktop"===this.responsiveMode)};i(),L.is_ios&&setTimeout((()=>i()),150),$(window).on("resized.setVars",(()=>i()))}watchContainerSize(){const t=()=>{const t=document.createElement("div");t.classList.add("container"),requestAnimationFrame((()=>{document.body.appendChild(t),this.containerWidth=t.offsetWidth,document.body.removeChild(t)}))};t(),$(window).on("resized.setContainer",(()=>t()))}simulateWindowResized(){let t,e=this.oldWidth,i=this.oldHeight;$(window).on("resize orientationchange",(o=>{o.originalEvent&&(this.updateSizes({triggerResize:!1}),clearTimeout(t),t=setTimeout((()=>{this.oldWidth=e,this.oldHeight=i,e=this.clientWidth,i=this.clientHeight,requestAnimationFrame((()=>{this.trigger("resized")}))}),80))}))}simulateDocumentResize(){requestAnimationFrame((()=>{this.documentHeight=document.body.offsetHeight}));const t=flexbe_cli.is_admin?200:80,e=(t=0)=>{const e=document.body.offsetHeight;Math.abs(e-this.documentHeight)>=5&&(this.documentHeight=e,this.trigger("documentresize",document),clearTimeout(D),D=setTimeout((()=>{this.trigger("documentresized",document)}),t))};if("function"==typeof ResizeObserver){let i=!0;new ResizeObserver((()=>{i?i=!1:e(t)})).observe(document.querySelector("body"))}else setInterval((()=>{e(0)}),t)}};const q=[];function V(t="",e=(()=>{}),i=15e3,o=!1){if(t&&0!==t.length||e(!1),!o){"string"==typeof t&&(t=[t]);let o=0;const n=i=>{const n=t.every((t=>"boolean"==typeof q[t]));o+=1,n&&o===t.length&&e(i)};return Array.isArray(t)&&t.forEach((t=>{V(t,n,i,!0)})),!1}if(!0===q[t])e(!0);else if(Array.isArray(q[t]))q[t].push(e);else{let o,n=!1;const s=(e=!0)=>{if(n)return;n=!0,clearTimeout(o);const i=q[t];q[t]=e,i.forEach((t=>{"function"==typeof t&&t(e)}))};if(q[t]=[e],/\.css(\?.*)?$/.test(t)){const e=document.createElement("link");e.onerror=s.bind(this,!1),e.onload=s.bind(this,!0),o=setTimeout(s.bind(this,"timeout"),i),e.rel="stylesheet",e.href=t,document.body.appendChild(e)}else{const e=document.createElement("script");e.onload=s.bind(this,!0),e.onerror=s.bind(this,!1),o=setTimeout(s.bind(this,"timeout"),i),e.async=!0,e.src=t,document.body.appendChild(e)}}}function F(t,e,i){return new Promise(((o,n)=>{V(t,(t=>{"function"==typeof e&&e(t),"timeout"===t?n(new Error("timeout")):o(t)}),i)}))}const j={inScroll:!1,skip:!1,_latest:null,get latest(){const t=N.zoom||1;return this._latest/t},init(){requestAnimationFrame((()=>{this._latest=window.scrollY})),document.addEventListener("wheel",(()=>{this.$inScrollElement&&(this.$inScrollElement.stop(),this.$inScrollElement=null)}),{passive:!0}),document.addEventListener("scroll",(()=>{this.inScroll=!0,this._latest=window.scrollY}),{passive:!0}),document.addEventListener("scrollend",(()=>{this.inScroll=!1}),{passive:!0}),this.scrollLock.init(),this.scrollImprovement.init(),flexbe_cli.vars._project.smoothing_scroll.enabled&&(flexbe_cli.is_admin?flexbe_cli.events.off("hideShowUI.core-scroll").on("hideShowUI.core-scroll",(t=>{"preview"===t?this.scrollSmoothing.init():this.scrollSmoothing.destroy()})):this.scrollSmoothing.init())},scrollImprovement:{scrollTimer:0,pointerState:!1,init(){this.createStopScrollEvent(),this.scrollRestore()},createStopScrollEvent(){let t=j.latest;document.addEventListener("scroll",(()=>{const e=t>j.latest?"up":"down",i=Math.max(j.latest-t,t-j.latest);clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout((()=>{t=j.latest,document.dispatchEvent(new CustomEvent("scrollend",{detail:{direction:e,distance:i}}))}),200)}),{passive:!0})},scrollRestore(){window.history.scrollRestoration&&(window.history.scrollRestoration="auto")}},scrollSmoothing:{duration:2,loaded:!1,lenisInstance:null,instances:[],loadLib(){return!!this.loaded||new Promise((t=>{F(["/_s/lib/lenis/lenis.min.js"],(()=>{this.loaded=!0,t(!0)}))}))},async init(){const t=document.querySelectorAll(".scroller");await this.loadLib(),this.instances.push(new window.Lenis({duration:this.duration,eventsTarget:document.querySelector(".container-list")||document.documentElement})),t.length&&t.forEach((t=>{const e=new window.Lenis({duration:this.duration,wrapper:t,eventsTarget:t.querySelector(".widget-content, .elements-list")||t});this.instances.push(e)}));const e=t=>{this.instances.forEach((e=>{e.raf(t)})),requestAnimationFrame(e)};requestAnimationFrame(e),$(document).on("bringIntoView.scroll-smoothing",(()=>{this.instances.forEach((t=>{t.stop(),t.start()}))}))},destroy(){$(document).off(".scroll-smoothing"),this.instances&&this.instances.forEach((t=>{t.destroy()})),this.instances=[]}},scrollLock:{loaded:!1,locked:!1,init(){this.loaded||F(["/_s/lib/scroll-lock/scroll-lock.min.js"],(()=>{this.loaded=!0,window.scrollLock._state.lockableSelectors=["html","[data-scroll-lock-lockable]"],window.scrollLock._state.scrollableSelectors=["[data-scroll-lock-scrollable]",".scroller",".scrollable"],window.scrollLock._state.fillGapSelectors=["html","[data-scroll-lock-lockable]","[data-scroll-lock-fill-gap]"],this.locked&&(window.scrollLock.disablePageScroll(),N.trigger("resized"))}))},lock(){this.locked=!0,void 0!==window.scrollLock&&(window.scrollLock.disablePageScroll(),N.trigger("resized"))},unlock(){this.locked=!1,void 0!==window.scrollLock&&(window.scrollLock.clearQueueScrollLocks(),window.scrollLock.enablePageScroll(),N.trigger("resized"))}},to(t){document.scrollingElement.scrollTo(0,t)},toElement(t,e={}){const i=$(t);if(!(t=i[0]))return!1;null==e.animation&&(e.animation=!0),null==e.centered&&(e.centered=!0),null==e.force&&(e.force=!0);let o,n=0,s=0,a=flexbe_cli.helpers.dom.scrollParent(t,"y");a&&!$(a).is(".b_block, .container-list")||(a=document.scrollingElement);const r=e.padding||0,l=a===document.body||a===document.documentElement,c=l?flexbe_cli.resize.clientHeight:a.offsetHeight,d=i.offset().top,u=t.offsetHeight,h=l?$("html, body"):$(a);L.is_mobile?o=h.find(".menu-fixed > .nav-header"):4===flexbe_cli.theme_id?s=flexbe_cli.fixed.getAllFixedHeight(d):o=h.find('.floating[data-floating="true"]'),o&&o.length&&(s+=o[0].offsetHeight-2);const p=Math.max(0,c-s-u);if(u>=c&&(e.centered=!1),n=e.centered?d-Math.max(0,p/2)-s:d-r-s,e.offset&&(n+=e.offset),!e.force){const t=a.offsetTop,o=i[0].getBoundingClientRect(),n=Math.max(o.top,t);if(Math.min(o.bottom,t+c)-n>=u/2)return"function"==typeof e.complete&&e.complete(),!1}this.$inScrollElement=h,$(document).off("documentresize.scrollTo").on("documentresize.scrollTo",(()=>{this.toElement(t,e)})),h.stop(),h.animate({scrollTop:n},{delay:e.delay||0,duration:e.duration?e.duration:e.animation?450:0,easing:e.animation?"swing":"linear",always:(...t)=>{this.$inScrollElement=!1,$(document).off("documentresize.scrollTo"),"function"==typeof e.complete&&e.complete(...t)}})}};function B(t,e=!1){t=t?function(t,e=null){const[i,o]=t.split("#"),[n,s]=i.split("?"),a=n.endsWith("/");let r=n;return/\.[0-9a-z]+$/i.test(n)?t:("enabled"!==e||a||o||(r=`${r}/`),"disabled"===e&&a&&"/"!==n&&(r=r.replace(/\/$/,"")),`${r}${s?`?${s}`:""}${o?`#${o}`:""}`)}(t,flexbe_cli.vars._project.trailingSlash):null,flexbe_cli.is_admin?t?d.message("LEAVE_PAGE",{href:t,blank:e}):d.message("WRONG_LINK",{type:"link",href:t}):t?(window.parent!==window&&t.includes("http")&&(e=!0),e?window.open(t,"_blank").focus():window.location.href=t):console.warn("Empty link")}function H(t="",e){if("string"!=typeof t)return!1;if(!/#{1,2}.+/.test(t))return B(t,e),!0;{4===flexbe_cli.theme_id&&$('nav[data-opened="true"]').length&&d.trigger("ui_mobilemenu_close",{}),4!==flexbe_cli.theme_id&&$(".mobile-menu.show").length&&$(".mobile-menu").removeClass("show").trigger("close");const e=(t=t.replace(/^\.\/#{2}/,"#").trim()).trim().split("#"),i=e[e.length-1];if(!(""===e[0]||"./"===e[0]||e[0]===new URL(document.baseURI).pathname))return B(t),!0;const o=$(`._anchor[name="${i}" i]`);let n=o.length?o.closest("[data-id]"):$(`[data-id="${i}" i]`);n.is(".element-item--free")&&(n=n.find(".element-content"));const s=n.closest(".b_block").filter(":visible"),a=n.closest(".m_modal");if((o.length||n.length)&&function(t){const e=$(t).eq(0);if(e.length){const t=new Event("bringIntoView",{bubbles:!0,cancelable:!0});e[0].dispatchEvent(t)}}(o.length?o:n),"cart"===i)d.trigger("ui_modal_close",{}),d.trigger("ui_cart_open",{});else if(s.length)d.trigger("ui_cart_close",{}),d.trigger("ui_modal_close",{}),setTimeout((()=>{let t=s;if(n&&!s.is(n)){const e=s[0].getBoundingClientRect(),i=n[0].getBoundingClientRect(),o=i.top-e.top>N.viewportHeight-100,a=i.top<e.top||i.bottom>e.bottom;(o||a)&&(t=n)}t.is(":visible")&&j.toElement(t,{force:!i.startsWith("tab")})}),30),window.history.replaceState(null,null,`#${i}`);else if(a.length){const t=a.data("id");d.trigger("ui_cart_close",{}),d.trigger("ui_modal_open",{id:t})}else window.location.hash=`#${i}`,flexbe_cli.is_admin&&d.message("WRONG_LINK",{type:"anchor",href:`#${i}`})}}function W(t=document){$(t).find("[data-product]").each(((t,e)=>{const i=$(e);let o=i.data("product");i.removeAttr("data-product"),(null==o||"object"==typeof o&&!Object.keys(o).length)&&(o=null),null!==o?i.data("product",o):i.removeData("product")}))}var U=Object.freeze({__proto__:null,fixProductData:W,gotoLink:H});function G(){if(flexbe_cli.lockPopstate)return;let t=window.location.hash;if(!t&&window.parent)try{t=window.parent.location.hash}catch(t){}flexbe_cli.lockPopstate=!0,/^#/.test(t)?H(t):flexbe_cli.modal.opened.size&&d.trigger("ui_modal_close"),flexbe_cli.lockPopstate=!1}const K=new WeakMap,J=new WeakMap;function Y(t,e,i){K.set(t,setTimeout((()=>{K.delete(t),i&&i()}),e))}function Q(t,e,i=80){const o="object"==typeof t?t:document.querySelector(`[data-id="${t}"]`),n=null==o?void 0:o._core;n&&(K.get(n)?J.set(n,!0):(n.updateTween({force:e}),Y(n,i,(()=>{J.get(n)&&(J.set(n,!1),n.updateTween({force:e}),Y(n,i))}))))}var X=Object.freeze({__proto__:null,forceUpdateTween:Q});function Z(t){if(!t||!t.offsetParent)return null;let e=0,i=0;for(;t;){if("fixed"===$.css(t,"position")){e+=window.scrollY,i+=window.scrollX;break}e+=t.offsetTop-t.scrollTop,i+=t.offsetLeft-t.scrollLeft,t=t.offsetParent}return{top:Math.round(e),left:Math.round(i)}}function tt(t,e=[]){return null==t.parentNode?e:tt(t.parentNode,[...e,t])}function et(t){const e=/(auto|scroll)/,i=getComputedStyle(t,null);return["overflow","overflow-y","overflow-x"].some((t=>e.test(i.getPropertyValue(t))))}function it(t="",e={}){return new Promise(((i,o)=>{$.ajax({url:t,type:e.type||e.method||"POST",dataType:"json",...e}).done((t=>{i(t)})).fail((t=>{const e=t.responseJSON,i=e?new Error(e.message):t;i.status=t.status,i.data=e,o(i)}))}))}var ot={fetch:it,upload:function(t,e={}){e={onSuccess:()=>{},onComplete:()=>{},onError:()=>{},onProgress:()=>{},...e};const i=new FormData;i.append("file",t);const o=$.ajax({url:"/mod/file/lead/upload/",type:e.type||e.method||"POST",dataType:"json",processData:!1,contentType:!1,data:i,success:(t,i)=>{e.onSuccess(t,i)},error:(t,i)=>{e.onError(t,i)},complete:(t,i)=>{e.onComplete(t,i)},xhr:()=>{const t=new window.XMLHttpRequest;return t.upload.addEventListener("progress",(t=>e.onProgress(o,t))),t},...e});return o},dom:Object.freeze({__proto__:null,getElOffset:Z,getParents:tt,isScrollable:et,scrollParent:function(t){if(!t||!t.parentNode)return;const e=t.ownerDocument||document,i=tt(t.parentNode,[]);for(let t=0;t<i.length;t++)if(et(i[t]))return i[t];return e.scrollingElement||e.documentElement}}),links:U,image:R,entity:X,utils:t,cookie:Object.freeze({__proto__:null,get:function(t){const e=document.cookie.match(new RegExp(`(?:^|; )${t.replace(/([$()*+./?[\\\]^{|}])/g,"\\$1")}=([^;]*)`));return e?decodeURIComponent(e[1]):void 0},set:function(t,e,i={}){let o=i.expires;if("number"==typeof o&&o){const t=new Date;t.setTime(t.getTime()+1e3*o),o=t,i.expires=t}o&&o.toUTCString&&(i.expires=o.toUTCString());let n=`${t}=${e=encodeURIComponent(e)}`;Object.keys(i).forEach((t=>{n+=`; ${t}`;const e=i[t];!0!==e&&(n+=`=${e}`)})),document.cookie=n}})};const nt=[".layout-type-header",".layout-type-tabs",".layout-type-column",".layout-type-product",".flexbe-cards-container.mode-slider",".content-zone--vertical.bg-element",".content-zone--vertical:not(.bg-element) .element-item--static",".flexbe-card:not(.swiper-slide)",".quiz-progress",".step-title",".quiz-fields"].join(","),st=[".free-area .element-item"].join(",");var at={startTransitions(t){const e=$(t);if(flexbe_cli.is_admin)return e.addClass("was-view"),void e.removeClass("wait-animation");const i=e.find(st);let o=e.find(nt);o=o.filter(((t,e)=>0===$(e).find(o).length));const n=Math.min(80,1e3/o.length),s=1e3+o.length*n;o.css("--transitionDelay",(t=>t*n+"ms")),o.addClass("transition-target"),i.addClass("transition-target"),setTimeout((()=>{e.addClass("was-view")}),200),setTimeout((()=>{this.stopTransition(e,o)}),200+s)},stopTransition(t,e){const i=$(t);let o=$(e);o.length||(o=i.find(e),o=o.filter(((t,e)=>0===$(e).find(o).length))),i.removeClass("wait-animation"),o.removeClass("transition-target"),o.css("--transitionDelay",""),i.trigger("flexbe-transition-end")}},rt=o("lskey"),lt=o("query"),ct=o("session"),dt=o("saveSession"),ut=o("saveReferrer");function ht(){const t=[...new URL(window.location.toString()).searchParams].filter((([t])=>/utm_/.test(t)));return{...Object.fromEntries(t)}}function pt(){try{return JSON.parse(localStorage.getItem(e(this,rt)[rt])||"null")}catch(t){return console.error(t),null}}function mt(){if(!flexbe_cli.is_admin)try{const t=e(this,lt)[lt];Object.keys(t).length?localStorage.setItem(e(this,rt)[rt],JSON.stringify(t)):localStorage.removeItem(e(this,rt)[rt])}catch(t){}}function ft(){try{sessionStorage.setItem("referrer",document.referrer)}catch(t){console.error(t)}}var gt=new class{constructor(){Object.defineProperty(this,ut,{value:ft}),Object.defineProperty(this,dt,{value:mt}),Object.defineProperty(this,ct,{get:pt,set:void 0}),Object.defineProperty(this,lt,{get:ht,set:void 0}),Object.defineProperty(this,rt,{writable:!0,value:"client_utm"}),Object.keys(e(this,lt)[lt]).length?(e(this,dt)[dt](),e(this,ut)[ut]()):this.referrer||e(this,ut)[ut]()}get referrer(){try{return sessionStorage.getItem("referrer")}catch(t){return console.error(t),null}}get data(){return{...e(this,ct)[ct],...e(this,lt)[lt]}}getUtm(){return this.data}toString(){return new URLSearchParams(this.data).toString()}};const _t={quiz:"quiz_start",modal:"modal_open",modal_form:"form_open",modal_done:"done_open",modal_product:"product_show",order_done:"order_done",pay_done:"pay_done",cart:"add_to_cart",link:"link_open",file:"file_load",close:"modal_close",app_link:"app_link_open"},vt={get u_id(){return localStorage.getItem("f_uid")||0},set u_id(t){try{localStorage.setItem("f_uid",String(t))}catch(t){}},init(){if(flexbe_cli.is_admin||flexbe_cli.vars._globals.isService||flexbe_cli.run.is_bot||!flexbe_cli.p_id)return;const{delayed_counters_ms:t}=flexbe_cli.vars._project.optimization;setTimeout((()=>{const t=flexbe_cli.helpers.cookie.get("f_uid")||this.u_id;t?(this.u_id=t,async function(){try{const t=await it("/mod/stat/visit/",{data:{s_id:flexbe_cli.s_id,group_id:flexbe_cli.group_id,p_id:flexbe_cli.p_id,u_id:vt.u_id}});t.v_id||console.warn("Visit was not registered",t)}catch(t){console.error("Visit was not registered",t)}}()):async function(){try{const t={...gt.data};gt.referrer&&(t.referrer=gt.referrer);const e=await it("/mod/stat/",{data:{s_id:flexbe_cli.s_id,group_id:flexbe_cli.group_id,p_id:flexbe_cli.p_id,utm_data:t,device:{type:flexbe_cli.run.device_type,width:flexbe_cli.resize.clientWidth,height:flexbe_cli.resize.clientHeight,dpi:window.devicePixelRatio,browser:navigator.userAgent}}});vt.u_id=e.u_id,flexbe_cli.helpers.cookie.set("f_uid",e.u_id,{Path:"/"}),d.trigger("user_created")}catch(t){console.warn("Cookie visit not created",t)}}()}),t),this.AB.init(),this.ecommerce.init(),this.QUIZ.init()},getGoal:(t,e)=>("modal"===t&&(/form/.test(e)?t="modal_form":/done/.test(e)?t="modal_done":/product/.test(e)?t="modal_product":/quiz/.test(e)&&(t="quiz")),_t[t]||!1),reachGoal(t,e={}){!flexbe_cli.is_admin&&t&&(e={goalAction:"send",goalValue:"",...e},d.trigger("reach_goal",{name:t,params:e}))},reachGoals(t={},e={}){if(flexbe_cli.is_admin||flexbe_cli.vars._globals.isService||flexbe_cli.run.is_bot||!flexbe_cli.p_id)return;const i=`${t.goal||""}`.trim(),o=`${t.mainGoal||""}`.trim(),n=`${t.htmlGoal||""}`.trim();if(o&&this.reachGoal(o,e),i)try{this.reachGoal(i,e)}catch(t){console.warn("reachGoals [goal]: ",t.message)}if(n)try{const t=n.replace(/{{\s*goalAction\s*}}/g,e.goalAction||"").replace(/{{\s*goalValue\s*}}/g,e.goalValue||"").replace(/(["']?){{\s*goalParams\s*}}\1/g,JSON.stringify(e.goalParams||{}));let i=$('<div style="display:none"></div>').append(t);i.children().length||(i=$(`<script type="module">${t}<\/script>`)),$("body").eq(0).append(i),setTimeout((()=>{i.remove()}),1e3)}catch(t){console.warn("reachGoals [htmlGoal]: ",t.message)}},ecommerce:{inited:!1,init(){this.inited=!0,window.dataLayer||(window.dataLayer=[])},add(t){this.inited||this.init(),window.dataLayer.push({ecommerce:{currencyCode:flexbe_cli.locale.currency.code,add:{products:[this._normalizeItem(t)]}}})},remove(t){this.inited||this.init(),window.dataLayer.push({ecommerce:{currencyCode:flexbe_cli.locale.currency.code,remove:{products:[this._normalizeItem(t)]}}})},purchase(t,e){if(t||0!==t.length){this.inited||this.init(),e||(e=Math.ceil(1e4*Math.random()));try{window.dataLayer.push({ecommerce:{currencyCode:flexbe_cli.locale.currency.code,purchase:{actionField:{id:e},products:t.map((t=>this._normalizeItem(t)))}}})}catch(t){}}},_normalizeItem(t){var e,i,o;return{id:t.id,name:t.name||t.title,price:null!=(e=t.price)?e:t.orderPrice,brand:null!=(i=t.brand)?i:t.vendorCode,variant:t.optionsInfo?t.optionsInfo.map((t=>t.name)).join(", "):"",quantity:null!=(o=t.count)?o:t.quantity}}},AB:{process:{},init(){!flexbe_cli.is_admin&&document.querySelectorAll("[data-abtest-variant]").length&&flexbe_cli.block.$blocks.on("screen",(t=>{const e=t.currentTarget._core,i=t.detail||{};i.state&&i.first&&e&&e.abtestVariant&&this.fixView(e.abtestId,e.abtestVariant)}))},setCookie(t){flexbe_cli.helpers.cookie.set("f_ab",JSON.stringify(t),{expires:604800,path:"/",domain:document.location.hostname})},getCookie(){let t=flexbe_cli.helpers.cookie.get("f_ab");if(t)try{t=JSON.parse(decodeURIComponent(t))}catch(t){console.warn("Can`t parse abtest cookie",t)}return t||(t={view:{},lead:[]}),t},async fixView(t,e){if(null==t||null==e||"a"!==e&&"b"!==e)return;if(null==this.getCookie().view[t]&&!this.process[t]){this.process[t]=!0;try{await it("/mod/stat/abtest/",{data:{testId:t,variant:e,s_id:flexbe_cli.s_id,p_id:flexbe_cli.p_id}});const i=this.getCookie();i.view[t]=e,this.setCookie(i)}catch(t){console.error("Can't fix abtest",t)}this.process[t]=!1}}},QUIZ:{inited:!1,init(){this.inited||(this.inited=!0,d.on("quiz_event.stat",((t={})=>{const e=t.payload||{};if(!["step","submit"].includes(t.event))return;if("step"===t.event&&!e.toNext)return;const i=t.quiz,o=i.$area.attr("data-page-id"),n=t.answerGoals,s=t.resultGoals,a=i.core.id,r=e.fromAnswers||[],l=e.toId,c=e.sessionId,d=e.fromId,u=r.reduce(((t,e)=>t.concat((e.variants||[]).map((t=>t.id)))),[]);if(this.fixAnswer({sessionId:c,sectionId:a,answerStep:d,answerVariants:u,viewStep:l,pId:o}),n){const t="answer";r.forEach((e=>{if(e.variants&&e.variants.length)e.variants.forEach((e=>{const i=e.value;vt.reachGoals(n,{goalAction:t,goalValue:i})}));else{let i=e.value||"";["email","phone","name"].includes(e.type)&&(i=""),vt.reachGoals(n,{goalAction:t,goalValue:i})}}))}s&&vt.reachGoals(s)})))},fixAnswer({sectionId:t,sessionId:e,answerStep:i,viewStep:o,answerVariants:n,pId:s}){let a;function r(){return it(a,{data:{s_id:flexbe_cli.s_id,group_id:flexbe_cli.group_id,f_uid:vt.u_id,page_id:s||flexbe_cli.p_id,session_id:e,section_id:t,answer_step:i,answer_variants:n,view_step:o}})}o&&i?a="/mod/quiz/stat/save/composite/":i?a="/mod/quiz/stat/save/answer/":o&&(a="/mod/quiz/stat/save/view/"),a&&(vt.u_id?r():d.one("user_created",(()=>{r()})))}}};const bt=(t,e=2,i=",",o=".")=>{let n,s;Number.isNaN(e=Math.abs(e))&&(e=2),n=`${parseInt(t=(+t||0).toFixed(e),10)}`,(s=n.length)>3?s%=3:s=0;return(s?n.substr(0,s)+o:"")+n.substr(s).replace(/(\d{3})(?=\d)/g,`$1${o}`)+(e?i+Math.abs(t-n).toFixed(e).replace(/-/,"0").slice(2):"")},yt={language:"en",country:"US",currency:{code:"USD",symbol:"$"},date_format:{dateLiteral:"/",dateMask:"DD/MM/YYYY",firstDay:1,dateTimeLiteral:", ",hour12:!1,timeLiteral:":",timeMask:"HH:MM"},translation:{},currency_format:{},tr(t,e){if(!t)return"";const i=/^currency/.test(t)?this.currency:this.translation,o=String(t).replace(/^currency\./,"").split(/\.|:{2}/).reduce(((t,e)=>t&&t[e]),i)||"";return o?this.interpolate(o,e):t},interpolate(t,e={}){const i=t=>{const e=t%100,i=e%10;return 11!==e&&1===i?"one":i>=2&&i<=4&&!(e>=12&&e<=14)?"few":"many"},o=t=>1!==t?"other":"one",n=t=>1===t?"one":t>=2&&t<=4?"few":"many",s={en:o,by:i,cs:n,cz:n,cs_CZ:n,fr:t=>t>1?"other":"one",ge:o,de:o,it:o,kz:o,pl:t=>{if(1===t)return"one";const e=t%10;return e>=2&&e<=4&&(t%100<10||t%100>=20)?"few":"many"},pt:o,ro:o,ro_RO:o,ru:i,es:o,ua:i,lv:t=>{var e;return 0===t?"zero":(null!=(e=t%10==1)?e:t%100==11)?"one":"other"},th:()=>"other",tr:o,hu:o,lt:o};return Object.keys(e).forEach((i=>{if("_"!==i&&e.hasOwnProperty(i)){if(t instanceof Object){const o=e[i];t=t[s[yt.language](o)]}t=t.replace(new RegExp(`%${i}%`,"g"),e[i])}})),t},parseMoney(t,e=2){const i=(t=String(t).replace(/,/g,".").replace(/ /g,"").replace(/(?!^)-/g,"").replace(/^\./g,"0.")).replace(/[^\d.]/g,"");let o=((i.match(new RegExp(`\\.\\d{1,${e}}$`))||[])[0]||"").replace(/\D/g,""),n=i.replace(new RegExp(`\\.${o}$`),"");n=parseInt(n.replace(/[^\d-]/g,""),10)||0,parseInt(o,10)||(o="");const s=parseFloat(o?`${n}.${o}`:n);return/^-/.test(t)?-s:s},formatMoney(t,{currencyFormat:e=this.currency_format,currencyData:i=this.currency,freeLabel:o=!1,useNonBreakingSpace:n=!1}={}){if(!(t=parseFloat(t))&&o)return yt.tr("cart::free_price");const s=e.str,a=e.d,r=Math.abs(t)>=1e4?e.t:"",l=e.d_force||parseInt(t,10)!==t?i.decimals:0,c=bt(Math.abs(t),l,a,r);let d=c;return s&&(d=s.replace(":value",c).replace(":symbol",i.symbol),n&&(d=d.replace(/\s/g,"&nbsp"))),t<0&&(d=`-${d}`),d.trim()},dateToLocaleTimezone(t){if(!t)return null;const e=flexbe_cli.vars._project.timezone||"UTC",i=new Date,o=new Date(i.toLocaleString("en-US",{timeZone:e}));i.setMilliseconds(0),o.setMilliseconds(0);const n=i.getTime()-o.getTime(),s=new Date(t.slice(0,19).replace("T"," "));return new Date(s.getTime()-n)},formatNumber(t,e,i=this.currency_format){const o=i.d,n=Math.abs(t)>=1e4?i.t:"";return e=null!=e?e:i.d_force||parseInt(t,10)!==t?this.currency.decimals:0,bt(Math.abs(t),e,o,n)},animateNumber({target:t,from:e,to:i,asMoney:o,freeLabel:n=!0,duration:s,easing:a}){if(!t)return!1;const r=$(t);null==e&&(e=this.parseMoney(r.text())||"");const l=Math.abs(e-i);if(e===i)return;t._animation&&(t._animation.pause(),t._animation.reset());if(o&&(!i||!e)||l<3||"function"!=typeof anime)r.text(o?this.formatMoney(i,{freeLabel:n}):i);else{const c={value:e};null==s&&(s=Math.max(150,Math.min(.3*l,650))),null==a&&(a="linear"),t._animation=anime({targets:c,value:i,duration:s,easing:a,update:()=>{const t=Math.floor(c.value),e=o?this.formatMoney(t,{freeLabel:n}):t;r.text(e)},complete:()=>{const t=o?this.formatMoney(i,{freeLabel:n}):i;r.text(t)}})}},...flexbe_cli.locale||{}},wt="hover";var At={init(){this.adaptiveHoverInit(),this.initIosHacks(),this.initFontsHacks()},adaptiveHoverInit(){let t="touchstart.adaptive_hover_in";flexbe_cli.run.is_desktop&&(t=`${t} mouseenter.adaptive_hover_in`),$(document).on(t,".js-hover",(function(t){const e=$(t.currentTarget),i=`adaptive_hover_out_${Math.floor(1e6*Math.random())}`;e.addClass(wt),flexbe_cli.run.is_desktop&&e.one(`mouseleave.${i}`,o);function o(){e.off(`.${i}`),$(document).off(`.${i}`),e.removeClass(wt)}$(document).one(`touchend.${i}`,o)}))},initIosHacks(t="body"){flexbe_cli.run.is_ios&&($("> *",t).off("click.iosHacks").on("click.iosHacks",(()=>!0)),$("a, [data-action-target]",t).off("click.iosHacks").on("click.iosHacks",(()=>!0)))},initFontsHacks(){if(!flexbe_cli.run.is_android)return;const t=getComputedStyle(document.documentElement),e=parseFloat(t.getPropertyValue("--fontSize")),i=e/parseFloat(t.getPropertyValue("font-size"));1!==i&&document.documentElement.style.setProperty("--fontSize",e*i+"px")}};const xt={content:"",contentAsHTML:!0,theme:"dark",animation:"fall",animationDuration:[250,180],delay:[180,100],position:"top",autoClose:!0,hideOnClick:!1,interactive:!1,distance:3,maxWidth:350,IEmin:12,trigger:"custom",triggerOpen:{click:!1,touchstart:!1,mouseenter:!0},triggerClose:{click:!1,originClick:!1,mouseleave:!0,touchleave:!0}};var $t={async init(t,e={}){var i,o;if(!t)return!1;let n;await(async()=>{const t=flexbe_cli.vars,e=t._page.themeId,i=t._globals.versionId;return new Promise((t=>{F(["/_s/lib/jquery/tooltipster/tooltipster.patched.min.js",`/_s/build/theme/${e}/_tooltipster.css?${i}`],t)}))})();const s=$(t),a={...xt,...e,content:null!=(i=null!=(o=e.content)?o:s.attr("data-tip"))?i:t.innerHTML};a.theme=`tooltipster-${(s.attr("data-theme")||a.theme||xt.theme).replace("tooltipster-","")}`,a.maxWidth=parseInt(s.attr("data-width"),10)||a.maxWidth,a.position=s.attr("data-tip-position")||a.position;const r=a.content||"";if(null==$.fn.tooltipster)return console.warn("Tooltipster is not loaded"),!1;try{n=s.tooltipster("instance")}catch(t){}return n||r?(n?(clearTimeout(n._contentTmt),r&&r!==n.content()?(n.content(r),n.enable()):r||this.destroy(t)):(t.tooltipstered=!0,s.tooltipster(a),n=s.tooltipster("instance"),n.on("created",(()=>{s.attr("data-tooltipstered","true"),n._$tooltip.addClass("editor-ui")})),n.on("destroy",(()=>{t.tooltipstered=!1,s.removeAttr("data-tooltipstered")})),n.on("ready",(()=>{n.reposition()}))),e.show&&n.open(),n):void 0},destroy(t){if(!t)return!1;let e;const i=$(t);try{e=i.tooltipster("instance")}catch(t){}e&&(e.destroy(),t.tooltipstered=!1,i.removeAttr("data-tooltipstered"))}};let kt=!1;const Ct="f_cookies_allowed";var St=new class{constructor(){this.cookieApplied=!1,this.params={show:0,dont_set_if_not_agree:0,use_custom_warning_text:0,custom_warning_text:"",policy_uri:"",style:"right_bottom"}}init(){setTimeout((()=>requestAnimationFrame((()=>{this.params={...this.params,...flexbe_cli.vars._project.cookies_warning||{}},flexbe_cli.is_admin||flexbe_cli.vars._globals.isService||99===flexbe_cli.theme_id||!this.params.show||localStorage.getItem(Ct)||kt||this.createNotify()}))),1e3)}createNotify(){const t=this.params,e=$("body"),i=N.viewportHeight/2,o="/\\r\\n|\\r|\\n/g";let n=flexbe_cli.scroll.latest,s=0;if(kt=!0,+t.use_custom_warning_text&&t.custom_warning_text)this.content=t.custom_warning_text.replace(o,"<br />");else{const e="center_compact"===t.style?"cookies.compact_text":"cookies.long_text";this.content=flexbe_cli.locale.tr(e)}const a=t.button_text&&t.use_custom_warning_text?t.button_text.replace(o,"<br />"):flexbe_cli.locale.tr("cookies.button"),r=t.link_text?t.link_text.replace(o,"<br />"):flexbe_cli.locale.tr("cookies.button_link"),l=t.policy_uri?t.policy_uri.replace(o,"<br />"):"/legal/cookie-policy/",c=+t.use_policy?"show":"",d=$(`\n            <div class="cookies-wrap style--${t.style}">\n                <div class="cookies-container">\n                    <div class="cookies-content scrollable">\n                        <span>\n                            ${this.content}\n                            <a href="${l}" target="_blank" class="cookies-button-more ${c}">\n                             ${r}\n                            </a>\n                        </span>\n                    </div>\n\n                    <div class="cookies-button-container">\n                        <a href="${l}" target="_blank" class="cookies-button-more scrollable ${c}">\n                            ${r}\n                        </a>\n                        <div class="cookies-button scrollable">\n                            ${a}\n                        </div>\n                    </div>\n\n                    <div class="cookies-close">\n                        <svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">\n                             <path d="M7 6L13 0L14 1L8 7L14 13L13 14L7 8L1 14L0 13L6 7L0 1L1 0L7 6Z"/>\n                        </svg>\n                    </div>\n                </div>\n            </div>\n        `);e.find(".cookies-wrap").remove(),e.append(d);const u=()=>{this.cookieApplied||t.dont_set_if_not_agree&&(this.cookieApplied=!0,"function"==typeof window.applyCookies&&window.applyCookies(),document.removeEventListener("scroll",h),$(document).off("click.cookies"))},h=()=>{const t=Math.max(flexbe_cli.scroll.latest-n,n-flexbe_cli.scroll.latest);clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout((()=>{n=flexbe_cli.scroll.latest,s+=t,s>=i&&u()}),200)};setTimeout((()=>{document.addEventListener("scroll",h,{passive:!0})}),500),d.outerWidth(),d.addClass("show"),e.addClass("cookies-warning--show"),d.on("click.cookies",".cookies-button, .cookies-close",(()=>{(()=>{const t=$(".cookies-wrap");t.removeClass("show"),e.removeClass("cookies-warning--show"),localStorage.setItem(Ct,"allowed"),setTimeout((()=>{t.remove()}),1e3)})(),u()})),$(document).on("click.cookies","a, [data-component]",(()=>u()))}};let Rt,Et=!1;const zt=t=>{Rt.size?(requestAnimationFrame(zt),Array.from(Rt).forEach((([e,i])=>{if(i.last>=t)return;const o="function"==typeof i.fps?i.fps():i.fps;(!o||t-i.last>=1e3/o)&&(i.last=t,e(t))}))):Et=!1};let It,Ot,Tt=!0;const Pt="position-fixed";var Mt={map:[],createMap:()=>$('[data-is="block"][data-fixed="true"]').toArray().map(((t,e)=>{const i=$(t),o=i.attr("data-fixed-wrapper")||"self",n=i.attr("data-fixed-ignore-adaptive"),s="self"===o?i:i.find(o),a=i.find(".fixed-area").eq(0);if(!a.length||!s.length)return null;const r=!!i.data("fixed-animation"),l=!!i.data("sticky"),c=a.closest("[data-static-contrast]").attr("data-static-contrast")||a.closest("[data-contrast]").attr("data-contrast"),d=a.closest("[data-fixed-contrast]").attr("data-fixed-contrast")||c,u=Math.round(s.outerHeight()),{top:h}=Z(s[0])||{},p=h+u;let m=u;if(r){a.hasClass(Pt)?m=Math.round(a.outerHeight()):(a.addClass(Pt),m=Math.round(a.outerHeight()),a.removeClass(Pt))}return{index:e,$block:i,$wrap:s,$fixed:a,top:h,bottom:p,height:u,heightFixed:m,contrastStatic:c,contrastFixed:d,isSticky:l,ignoreAdaptive:n,hasFixedAnimation:r,isFixed:!1,isReplaced:!1}})).filter((t=>{if(!t)return!1;const e=flexbe_cli.resize.responsiveMode;return e!==t.$block.attr("data-hidden")&&("mobile"!==e||!t.ignoreAdaptive)})),modifyMap(t,e){let i=0,o=0;return t.forEach(((n,s)=>{const a=s&&t[s-1],r=Math.max(0,((null==a?void 0:a.bottom)||0)-n.top),l=e+i-r;n.isFixed=n.hasFixedAnimation?l>n.bottom+100:l>n.top,n.fixOffset=i-r,n.isSticky&&n.isFixed&&(i+=n.heightFixed-r),n.isFixed&&(o+=n.heightFixed),n.replaceOffset=0,a&&!a.isSticky&&e+a.fixOffset+a.heightFixed>n.top&&(a.replaceOffset=Math.min(a.fixOffset+a.heightFixed,e+a.fixOffset+a.heightFixed-n.top))})),{allFixedHeight:o}},applyMap(t,e){const i=!t.applied&&!Tt;t.forEach((o=>{const n=o.$fixed[0].isFixed;let s=o.isFixed,a=o.isSticky;if(flexbe_cli.run.is_preview||(s=!1,a=!1),n!==s||i)if(o.$fixed[0].isFixed=s,o.$fixed.toggleClass("position-sticky",s&&a),o.contrastStatic&&o.contrastStatic!==o.contrastFixed&&o.$fixed.attr("data-contrast",s?o.contrastFixed:o.contrastStatic),o.hasFixedAnimation)if(clearTimeout(o._fixedAnimationBouncer),s)o.$wrap.css("height",`${o.height}px`),o.$fixed.removeClass("fade-out"),o.replaceOffset||o.$fixed.hasClass(Pt)||(o.$fixed.addClass(`${Pt} fade-in`),o._fixedAnimationBouncer=setTimeout((()=>{o.$fixed.removeClass("fade-in")}),200));else{const i=e>o.height;o.$fixed.removeClass("fade-in"),!o.replaceOffset&&t.applied&&i&&o.$fixed.addClass("fade-out"),o._fixedAnimationBouncer=setTimeout((()=>{o.$wrap.css("height",""),o.$fixed.removeClass(`${Pt} fade-out`)}),i?150:0)}else o.$wrap.css("height",s?`${o.height}px`:""),o.$fixed.toggleClass(Pt,s);if(s?(o.$fixed[0].style.setProperty("top",`${o.fixOffset}px`,"important"),o.$fixed[0].style.setProperty("transform",o.replaceOffset?`translateY(-${o.replaceOffset}px)`:"none","important")):(o.$fixed[0].style.removeProperty("top"),o.$fixed[0].style.removeProperty("transform")),n!==s){const t=o.$block[0]._core;t&&t.updateTween({fixed:s})}})),Tt=!1,t.applied=!0,this.map=t},getAllFixedHeight(t){const{allFixedHeight:e}=this.modifyMap($.extend([],this.map||[]),t);return e},initFixed(){const t=this.createMap();Ot=null,It&&It(),t.length&&(It=function(t,e=0){return Rt||(Rt=new Map),Rt.set(t,{last:0,fps:e}),Et||requestAnimationFrame(zt),()=>{Rt.delete(t)}}((()=>{const e=window.scrollY;Ot!==e&&(Ot=e,this.modifyMap(t,e),this.applyMap(t,e))}),t.length>1?90:30))},init(){new ResizeObserver((()=>{this.initFixed()})).observe(document.body)}};const Lt=(t,e=0)=>(...i)=>new Promise((o=>{setTimeout((()=>o(t(...i))),e)})),Dt=(t,e=0)=>flexbe_cli.is_admin?t:Lt(t,e),Nt=(t,e=0,...i)=>Lt(t,e)(...i),qt=(t,e=0,...i)=>Dt(t,e)(...i);class Vt{constructor(t,e={}){this.require=[],this.components=null,this.inited=!1,this.updated=!1,this.loaded=!1,this.ready=!1,this.isPure=!1,this.isVisible=null,this.inScreen=!1,this.inBeside=!1,this.inView=!1,this.inFocus=!1,this.wasVisible=null,this.wasScreen=!1,this.wasBeside=!1,this.wasView=!1,this.wasFocus=!1;const i=$(t),o=i.attr("data-is"),n=i.attr("data-id"),s="zone"===o?"e":o[0],a=i.attr(`data-${s}-id`),r=i.attr("data-mod-id")||0;this.$area=i,this.area=i[0],this.$content=i,this.content=this.$content[0],this.$root=i,this.root=i[0],this.is=o,this.id=n,this.template_id=a,this.mod_id=r,this.tween={},this.type=JSON.parse(i.attr(`${s}-type`)||"[]"),Object.keys(e).forEach((t=>{const i=Object.getOwnPropertyDescriptor(e,t);if("value"in i){const i=e[t];this[t]="object"==typeof i?$.extend(!0,Array.isArray(i)?[]:{},i):i}else Object.defineProperty(this,t,i)})),["_onVisible","_onBeside","_onFocus","_onScreen","_onView","_onResize","_onOpen","_onClose","_sendEvent"].forEach((t=>{this[t]=this[t].bind(this)}))}onInit(){}onUpdate(){}onLoad(){}onReady(){}onDestroy(){}onVisible(){}onBeside(){}onFocus(){}onScreen(){}onView(){}onResize(){}onOpen(){}onClose(){}onMsg(){}init(t="init",e={}){this.components=(this.components||[]).filter((t=>t&&"function"==typeof t)),"init"===t?this._onInit(e):"update"===t&&this._onUpdate(e),this._inheritEvents(),("init"===t||"update"===t&&e.templateRendered)&&flexbe_cli.require(this.require,(()=>{this._onLoad(e),this._onReady(e)}))}_inheritEvents(){"onHideShowUI"in this&&(flexbe_cli.events.off(`hideShowUI.core_${this.id}`),flexbe_cli.events.on(`hideShowUI.core_${this.id}`,(t=>this.onHideShowUI(t))))}_sendEvent(t,e){const i=new CustomEvent(t,{detail:e});this.area.dispatchEvent(i,{bubbles:!1})}_onInit(t){this.inited=!0,this.onInit(t),this._sendEvent("init",t),requestAnimationFrame((()=>this.updateTween()))}_onUpdate(t){this.inited=!0,this.modId=this.$area.attr("data-mod-id")||0,this.onUpdate(t),this._sendEvent("update",t),this.updateTween({force:!0})}_onLoad(t){this.loaded=!0,this.onLoad(t),this._sendEvent("load",t),this.require.length&&requestAnimationFrame((()=>{this.updateTween({force:!0})}))}_onReady(t){this.ready=!0,this.onReady(t),this._sendEvent("ready",t)}_onResize(t={}){this.isVisible&&(this.onResize(t),this._sendEvent("resize",t))}_onDestroy(t){this.$area.off(".inherit"),this.onDestroy(t),this._sendEvent("destroy",t)}_onMsg(t,e){this.onMsg(t,e)}_onVisible({state:t,force:e}){if(null==this.isVisible)return this.isVisible=t,void(this.wasVisible=t);if(this.isVisible===t&&!e)return;const i=t?!this.wasVisible:void 0,o=null==i?{state:t}:{state:t,first:i};this.isVisible=t,this.onVisible(o),this._sendEvent("visible",o),t&&(this.wasVisible=!0)}_onFocus({state:t,force:e}){if(this.isVisible||(t=!1),this.inFocus===t&&!e)return;const i=t?!this.wasFocus:void 0,o=null==i?{state:t}:{state:t,first:i};this.inFocus=t,this.onFocus(o),this._sendEvent("focused",o),t&&(this.wasFocus=!0)}_onScreen({state:t,force:e}){if(this.isVisible||(t=!1),this.inScreen===t&&!e)return;const i=t?!this.wasScreen:void 0,o=null==i?{state:t}:{state:t,first:i};this.inScreen=t,this.onScreen(o),this._sendEvent("screen",o),t&&(this.wasScreen=!0)}_onView({state:t,force:e}){if(this.isVisible||(t=!1),this.inView===t&&!e)return;const i=t?!this.wasView:void 0,o=null==i?{state:t}:{state:t,first:i};this.inView=t,"block"===this.is&&i&&requestAnimationFrame((()=>{at.startTransitions(this.$area)})),this.onView(o),this._sendEvent("view",o),t&&(this.wasView=!0)}_onBeside({state:t,force:e}){if(this.isVisible||(t=!1),this.inBeside===t&&!e)return;const i=t?!this.wasBeside:void 0,o=null==i?{state:t}:{state:t,first:i};this.inBeside=t,this.onBeside(o),this._sendEvent("beside",o),t&&(this.wasBeside=!0)}updateTween(){}_onOpen(t){this.updateTween(),this.onOpen(t),this._sendEvent("open",t)}_onClose(t){this.updateTween(),this.onClose(),this._sendEvent("close",t)}}var Ft={opened:new Map,$list:$(".modal-list"),init(){const t=new URLSearchParams(location.search).get("m_id");if(flexbe_cli.vars._globals.isScreenshot)return this.$list.addClass("noanimate"),this.open({id:t}),!1;this.dispatchEvents()},dispatchEvents(){const t=$("body");let e,i,o;t.on("bringIntoView.core-modal",".m_modal",(t=>{const e=t.currentTarget.dataset.id;e&&this.open({id:e})})),flexbe_cli.events.on("ui_modal_open.core_modal",((t={})=>{this.open(t)})),flexbe_cli.events.on("ui_modal_close.core_modal",((t={})=>{this.close(t)})),t.on("click.modal-close",".m_modal .close",(t=>{t.preventDefault();const e=$(t.currentTarget).closest(".m_modal.show").attr("data-id");this.close({id:e})}));let n={x:0,y:0};t.off(".modal-close-overlay"),t.on("click.modal-close-clickout",".container-list",(()=>{flexbe_cli.run.is_preview&&this.opened.size&&this.opened.forEach(((t,e)=>{const{modal:i}=this.find(e)||{};null!=i&&i.hasAttribute("data-clickout")&&this.close({id:i.id})}))})),t.on("pointerdown.modal-close-overlay pointerup.modal-close-overlay","[data-overlay]",(t=>{if(flexbe_cli.run.is_preview&&this.opened.size)if("pointerdown"===t.type){const s=document.body.getBoundingClientRect();o=t.target===t.currentTarget||$(t.target).is(".modal-data")?t.target:null,n={x:t.pageX,y:t.pageY},e=t.target.clientWidth<=t.pageX,i=s.left>n.x||s.right<n.x}else o===t.target&&!e&&!i&&Math.sqrt((t.pageX-n.x)**2+(t.pageY-n.y)**2)<10&&setTimeout((()=>{this.close({id:$(o).closest(".m_modal").attr("data-id")})}),50)})),$(window).off(".modal-close-esc").on("keyup.modal-close-esc",(t=>{if(flexbe_cli.run.is_preview&&27===t.which&&(()=>{if(flexbe_cli.is_admin&&(window.parent.flexbe.modal.visible||[]).length)return!1;return!0})()&&this.opened.size){const t=[...this.opened.keys()].at(-1);this.close({id:t})}}))},find(t){if(null==this.$list||!this.$list.length)return!1;let e=this.$list.find(`[data-id="${t}"]`);if(e.length||(e=this.$list.find(`._anchor[name="${t}"]`).closest(".m_modal")),!e.length)return!1;const i=e.toArray(),o=i[0]||!1;return!!o&&{modals:i,modal:o}},open({id:t,data:e={},options:i={}}={}){let{modal:o}=this.find(t)||{};if(!o)return console.warn("Modal not found",t),!1;const n=ie.bind(o);if(!n)return console.warn("Modal without core object,",`id: ${t},`,"modal: ",o),!1;const s=[...this.opened.keys()].at(-1);return!i.rise&&s&&s!=t&&this.close({id:s,openId:t}),this.opened.has(t)||(this.opened.set(t,{fromId:s,data:e,options:i}),n.open({fromId:s,data:e,options:i})),n.$area.css("zIndex",this.opened.size),!0},close({id:t,openId:e}={}){if(!t)return this.opened.forEach(((t,i)=>{i!==e&&this.close({id:i,openId:e})}));if(!this.opened.has(t))return!1;const{modal:i}=this.find(t)||{};if(!i)return;const o=ie.bind(i);return o?(o.close({openId:e}),o.$area.css("zIndex",""),this.opened.delete(t),!0):(console.warn("Modal doesnt have core object"),!1)}};class jt extends Vt{constructor(t,e){super(t,e),this.is="element";const i=this.$area.closest("[data-cloned]");this.isClone=i.attr("data-cloned")||!1,this.$content=this.$area.find("> .element-content").addBack().last(),this.content=this.$content[0],this.$root=this.$area.closest(".b_block, .m_modal, .w_widget"),this.root=this.$root[0];const o=flexbe_cli.entity.closestCore(this.area.parentNode);o?(this.$parent=o.$area,this.parent=o.area):(this.$parent=this.$area.parents("[data-is]").eq(0),this.parent=this.$parent[0],console.warn("Parent core instance not created for element",this.area))}_onUpdate(t){this.$area.off(`.inherit.${this.id}`),this.$content=this.$area.find("> .element-content").addBack().last(),this.content=this.$content[0],super._onUpdate(t)}_onDestroy(t){super._onDestroy(t),this.$area.off(".inherit"),this.$parent.off(`.inherit.${this.id}`)}_inheritEvents(){const t=`.inherit.${this.id}.${this.isClone?`clone${Number(this.isClone)}`:"original"}`;super._inheritEvents(),this.$parent.off(t),this.$parent.on(`tween${t}`,(t=>{this.updateTween(t.detail||{})})),["visible"].forEach((e=>{this.$parent.on(`${e}${t}`,(()=>{this.updateTween({})}))})),["_onOpen","_onClose","_onDestroy"].forEach((e=>{const i=`${e.replace("_on","").toLowerCase()}${t}`;this.$parent.on(i,((t,...i)=>{!i.length&&t.detail&&(i[0]=t.detail),this[e](...i)}))}))}updateTween({force:t}={}){const e=this.content||this.area,i=this.parent&&this.parent._core,o=this.root&&this.root._core;if(!i||!this.inited)return;const n=null==this.tween.width&&null==this.tween.height;let s=i.isVisible,a=i.inBeside,r=a,l=r,c=r,d=!1;if(!n||!i.isVisible||a){if(s&&a){const i=e.offsetWidth,n=e.offsetHeight,u=flexbe_cli.resize.clientHeight;if(s=!(!i&&!n),d=t||i!==this.tween.width||n!==this.tween.height,this.tween.width=i,this.tween.height=n,s&&o&&"block"===o.is){const{top:t,bottom:i}=e.getBoundingClientRect();a=i>-u/3&&t<u+u/3,r=a&&r&&i>0&&t<u,c=r&&c&&t<=u/2&&t+n>=u/2;const o=Math.min(n/3,flexbe_cli.resize.clientHeight/4);l=c||r&&l&&t+o>0&&i-o<u}}this.isVisible!==s&&this._onVisible({force:t,state:s}),!n&&d&&this._onResize({force:t}),this._onBeside({force:t,state:a}),this._onScreen({force:t,state:r}),this._onView({force:t,state:l}),this._onFocus({force:t,state:c}),this._sendEvent("tween",{tween:this.tween,force:t})}}}const Bt=["id","is","area","content","isVisible","inBeside","inView","inFocus","inScreen","wasBeside","wasFocus","wasScreen","wasView","wasVisible"],Ht={beside:"beside",screen:"screen",view:"view",focus:"focused",visible:"visible",resize:"resize",open:"open",close:"close"};function Wt(t){return t.split(" ").map((t=>{const[e,...i]=t.split(".");return[Ht[e]||e,...i,"publicApi"].join(".")})).join(" ")}var Ut=o("instances"),Gt=o("core"),Kt=o("callbacks");class Jt{static create(t){return e(Jt,Ut)[Ut][t.id]&&e(Jt,Ut)[Ut][t.id].destroy(),e(Jt,Ut)[Ut][t.id]=new Jt(t),e(Jt,Ut)[Ut][t.id]}get size(){return{width:e(this,Gt)[Gt].tween.width,height:e(this,Gt)[Gt].tween.height}}constructor(t){Object.defineProperty(this,Gt,{writable:!0,value:void 0}),Object.defineProperty(this,Kt,{writable:!0,value:new Map}),e(this,Gt)[Gt]=t;const i=Bt.reduce(((e,i)=>{const o={...e};return o[i]={enumerable:!0,get:()=>t[i]},o}),{});Object.defineProperties(this,i)}trigger(t,e){if(!t||"string"!=typeof t)return this;const i=new CustomEvent(t,{detail:e});return this.area.dispatchEvent(i),this}on(t,i){if(!t||"string"!=typeof t||"function"!=typeof i)return this;const o=Wt(t),n=t=>i.call(this,t.detail||t.originalEvent,t.originalEvent||t);return $(this.area).on(`${o}`,n),e(this,Kt)[Kt].set(i,n),this}off(t,i){const o=Wt(t);return"function"==typeof i?$(this.area).off(o,e(this,Kt)[Kt].get(i)):$(this.area).off(o),this}destroy(){$(this.area).off(".publicApi")}}Object.defineProperty(Jt,Ut,{writable:!0,value:{}});const Yt={block:class extends Vt{constructor(t,e){super(t,e),this.is="block",this.$block=this.$area,this.$content=this.$area.find("> .container-fluid").addBack().last(),this.content=this.$content[0],this.abtestVariant=this.$area.attr("data-abtest-variant"),this.abtestId=this.abtestVariant&&this.$area.attr("data-abtest-id")}_onUpdate(t){this.$content=this.$area.find("> .container-fluid").addBack().last(),this.content=this.$content[0],super._onUpdate(t)}updateTween({force:t=!1,fixed:e=!1}={}){if(!this.inited)return!1;let i=this.area,o=0;const n=i.offsetWidth,s=i.offsetHeight;for(;i;)o+=i.offsetTop,i=i.offsetParent;const a=o+s,r=!(!n&&!s),l=null==this.tween.width&&null==this.tween.height,c=t||n!==this.tween.width||s!==this.tween.height,d=1/(s||1)*(flexbe_cli.scroll.latest-o),u=function(){const t=o-flexbe_cli.resize.clientHeight;return 1/(a-t)*(flexbe_cli.scroll.latest-t)}(),h=function(){const t=s||1,e=flexbe_cli.scroll.latest+flexbe_cli.resize.clientHeight/2;return(e-(o+t/2)+t/2)/t}();this.tween.start=o,this.tween.end=a,this.tween.width=n,this.tween.height=s,this.tween.position=d,this.tween.positionAbs=u,this.tween.positionCenter=h;const p=r&&h>0&&h<1,m=p||function(){if(e)return!0;const t=Math.min(s/3,flexbe_cli.resize.clientHeight/4);return flexbe_cli.scroll.latest+flexbe_cli.resize.clientHeight>=o+t&&flexbe_cli.scroll.latest<=a-t}(),f=m||function(){if(e)return!0;return u>=0&&u<=1}(),g=f||function(){if(e)return!0;const t=Math.max(s/2,flexbe_cli.resize.clientHeight/3);return flexbe_cli.scroll.latest+flexbe_cli.resize.clientHeight>o-t&&flexbe_cli.scroll.latest<a+t}();return this._onVisible({state:r}),!l&&c&&this._onResize({force:t}),this._onBeside({force:t,state:g}),this._onScreen({force:t,state:f}),this._onView({force:t,state:m}),this._onFocus({force:t,state:p}),this._sendEvent("tween",{tween:this.tween,force:t}),c}},modal:class extends Vt{constructor(t,e){super(t,e),this.is="modal",this.isOpen=!1,this.$modal=this.$area}_onInit(t){super._onInit(t),flexbe_cli.is_admin&&Ft.opened.has(this.id)&&this.open(Ft.opened.get(this.id))}open({fromId:t,data:e,options:i={}}={}){var o,n;if(this.isOpen)return;this.isOpen=!0,this.lastOptions=i,this.lastScroll=j.latest;const s=this.$area.find(".modal-data > ._anchor").attr("name")||this.id;(i.hash||null==i.hash)&&(this._prevHash=window.location.hash,flexbe_cli.lockPopstate=!0,window.history.pushState(null,null,`#${s}`),flexbe_cli.lockPopstate=!1),this.$area.removeClass("noanimate"),this.$area.addClass("show animation-forwards"),Ft.$list.addClass("show"),$("body").addClass("is-modal-open"),$(".w_cart.show").length&&Ft.$list.addClass("rise");const a=this.$modal.find(".component-button").eq(0),r=null!=(o=null==(n=a.offset())?void 0:n.top)?o:0;!flexbe_cli.run.is_screen_mobile&&flexbe_cli.run.is_preview&&flexbe_cli.resize.viewportHeight>r+100&&a.focus(),setTimeout((()=>{this.$area.hasClass("pointerless")||j.scrollLock.lock(),Ft.$list.addClass("overlay"),this._onOpen({data:e}),this._onBeside({state:!0}),this._onScreen({state:!0}),this._onView({state:!0}),this._onFocus({state:!0}),"function"==typeof i.onOpen&&i.onOpen()}),30),d.trigger("modal_opened",{id:this.id,fromId:t,data:e,options:i})}close({openId:t}={}){if(!this.isOpen)return;const e=this.lastOptions,i=!t&&!this.$area.siblings(".show").length;if(this.lastOptions={},this.isOpen=!1,(e.hash||null==e.hash)&&i&&/^#{1,2}/.test(window.location.hash)){const t=this._prevHash&&this._prevHash!==window.location.hash?this._prevHash:window.location.pathname;flexbe_cli.lockPopstate=!0,window.history.replaceState(null,null,t),flexbe_cli.lockPopstate=!1}this.$area.removeClass("animation-forwards").addClass("noanimate");const o=parseInt(this.$area.css("--animationDuration"),10)||450;this.$area.removeClass("show noanimate").addClass("hide animation-backwards"),setTimeout((()=>{this.$area.removeClass("show hide animation-backwards"),i&&(Ft.$list.removeClass("show rise overlay fade-out"),"#cart"===window.location.hash||this.$area.hasClass("pointerless")||j.scrollLock.unlock(),$("body").removeClass("is-modal-open")),flexbe_cli.run.is_screen_mobile&&$("body, html").scrollTop(this.lastScroll)}),flexbe_cli.is_admin?0:o),this._onClose(),this._onBeside({state:!1}),this._onScreen({state:!1}),this._onView({state:!1}),this._onFocus({state:!1}),"function"==typeof e.onClose&&e.onClose(this),d.trigger("modal_closed",{id:this.id,openId:t})}updateTween({force:t}={}){if(!this.inited)return!1;const e=this.area,i=e.offsetWidth,o=e.offsetHeight,n=null==this.tween.width&&null==this.tween.height,s=t||i!==this.tween.width||o!==this.tween.height,a=this.isOpen;return this.tween.width=i,this.tween.height=o,this._onVisible({force:t,state:a}),qt((()=>{!n&&s&&this._onResize({force:t}),this._onBeside({force:t,state:a}),this._onScreen({force:t,state:a}),this._onView({force:t,state:a}),this._onFocus({force:t,state:a})})),qt(this._sendEvent,0,"tween",{tween:this.tween,force:t}),s}},widget:class extends Vt{constructor(t,e){super(t,e),this.is="widget",this.$widget=this.$area}updateTween({force:t}={}){if(!this.inited)return!1;const e=this.area,i=e.offsetWidth,o=e.offsetHeight;let n;n=null!=this.isOpen?!!this.isOpen:!(!i&&!o);const s=null==this.tween.width&&null==this.tween.height,a=!!t||i!==this.tween.width||o!==this.tween.height;return a&&(this.tween.width=i,this.tween.height=o),this._onVisible({force:t,state:n}),qt((()=>{!s&&a&&this._onResize({force:t}),this._onBeside({force:t,state:n}),this._onScreen({force:t,state:n}),this._onView({force:t,state:n}),this._onFocus({force:t,state:n})})),qt(this._sendEvent,0,"tween",{tween:this.tween,force:t}),a}},element:jt,zone:jt},Qt={block:"data-b-id",modal:"data-m-id",widget:"data-w-id",zone:"data-e-id",element:"data-e-id",default:"data-t-id"},Xt=["beside","screen","focus","visible"],Zt=new Map,te=new WeakMap;function ee(t){const e="[data-is]",i=$(t);return[...i.filter(e).toArray(),...i.find(e).toArray()]}var ie={async init(){this._dispatchEvents(),await Promise.all([this.initArea($(".w_widget")),this.initArea(flexbe_cli.block.$list)]),await this.initArea(flexbe_cli.modal.$list)},async initArea(t,e={}){W(t);const i=ee(t),o=await Promise.all(((t,e=1)=>Array.from({length:Math.ceil(t.length/e)},((i,o)=>t.slice(o*e,o*e+e))))(i,200).map(Dt((t=>t.map((t=>this.bind(t,e))))))),n=(await Promise.all(o.flat())).filter(Boolean);return await Promise.all(n.map((t=>t.ready||new Promise((e=>t.area.addEventListener("ready",e,{once:!0})))))),flexbe_cli.components.initInArea(t,e.templateRendered?"update":"init"),n},destroyArea(t,e={}){ee(t).forEach((t=>{const i=t._core;i&&i._onDestroy(e)})),flexbe_cli.components.destroyInArea(t)},setClientJs(t,e,i){"zone"===t&&(t="element"),Zt.set(`${t}:${e}`,i)},getClientJs:(t,e)=>("zone"===t&&(t="element"),Zt.get(`${t}:${e}`)),bind(t,e={},i=!1){if(!t||!t.getAttribute)return null;let o=t.getAttribute("data-is");o="zone"===o?"element":o;const n=t.getAttribute(Qt[o]||Qt.default);if(!n||!(o in Yt))return null;const s=!t._core||!t._core.inited,a=!s&&(e.templateRendered||e.styleRendered),r=this.getClientJs(o,n)||{};if(r.isPure&&!i&&!t._core)return null;const l=t._core||new Yt[o](t,r);return t._core=l,l&&(s||a)&&l.init(a?"update":"init",e),l},closestCore(t,e=!1){let i;for(;t&&!i;){var o;if(!(t=null==(o=t)?void 0:o.closest("[data-id]")))break;if(i=this.bind(t,{},e),i)break;t=t.parentNode}return i},_dispatchEvents(){flexbe_cli.events.off(".core_entity"),flexbe_cli.events.on("forceUpdateTween.core_entity",((t,e)=>{Q(t,e)})),flexbe_cli.is_admin&&(flexbe_cli.events.on("layout_change.core_entity",(t=>{"before_remove"===t.action&&this.destroyArea($(`[data-id="${t.id}"]`),t)})),flexbe_cli.events.on("entity_before_render.core_entity",(async(t={})=>{t.templateRendered&&this.destroyArea($(`[data-id="${t.id}"]`),t)})),flexbe_cli.events.on("entity_render.core_entity",(async t=>{const e=document.querySelector(`[data-id="${t.id}"]`);e&&await this.initArea(e,t)})),flexbe_cli.events.on("client_msg.core_entity",(t=>{if(!t||!t.id||!t.is)return;const e=document.querySelector(`[data-id="${t.id}"]`);null!=e&&e._core&&e._core._onMsg(t.msg,t.data)})))},createPublicAPI(t){let e;const i=()=>(e||(e=document.querySelector(`[data-id="${t}"]`)),e),o=t=>{const e=this.closestCore(t,!0);if(!e)return null;let i=te.get(e);return i?i.destroy():(i=Jt.create(e),te.set(e,i)),i},n={require:F,subscribe:(t,e,n)=>{const s=i();Xt.includes(t)&&o(s);const a=new AbortController,r=()=>a.abort();return s.addEventListener(t,(t=>{var i;if(!t.currentTarget.contains(t.target))return;t.stopPropagation();const o=null==(i=t.detail.state)||i?"in":"out";n.state&&"all"!==n.state&&n.state!==o||(e(t),n.once&&r())}),{signal:a.signal}),r},sectionApi:null,modalApi:null,widgetApi:null,elementApi:null,isEditor:flexbe_cli.is_admin,isView:!flexbe_cli.is_admin};return new Proxy(n,{get(t,e,n){const s=i();return"elementApi"===e?o(s):"sectionApi"===e?o(s.closest(".b_block")):"modalApi"===e?o(s.closest(".m_modal")):"widgetApi"===e?o(s.closest(".w_widget")):Reflect.get(t,e,n)}})}},oe={$list:$(".container-list").eq(0),$blocks:$(".b_block"),init(){this.dispatchEvents()},dispatchEvents(){const t=()=>{this.$blocks.each(((t,e)=>Q(e,!1)))};$(window).on("resized.flexbe_block",$.debounce((()=>t()),20)),$(document).on("documentresized.flexbe_block",$.debounce((()=>t()),20)),window.addEventListener("scroll",$.throttle((()=>{this.$blocks.each(((t,e)=>Q(e,!1)))}),96),{passive:!0}),flexbe_cli.is_admin&&flexbe_cli.events.off("layout_change.flexbe_block").on("layout_change.flexbe_block",(t=>{t&&"block"===t.is&&(this.$blocks=$(".b_block"),this.$blocks.each(((t,e)=>Q(e,!1))))}))}};const ne=({date:t,timezone:e,format:i="date"})=>{if(!t||!e)return null;const o=new Date((t=>"string"==typeof t?new Date(t.slice(0,19).replace("T"," ")):t)(t)),n=new Date,s=new Date(n.toLocaleString("en-US",{timeZone:e}));n.setMilliseconds(0),s.setMilliseconds(0);const a=n.getTime()-s.getTime(),r=o.getTime()-a;return"milliseconds"===i?r:new Date(r)},se=(t,e,i)=>!(!Array.isArray(e)||!Array.isArray(i)||e.length!==i.length)&&e.every(((e,o)=>t?i.includes(e):i[o]===e));se.bind(null,!0),se.bind(null,!1);const ae=t=>{const e=pe(t);return e&&[3,6,8].includes(e.length)};function re(t){return/^\s*(?:linear-gradient|repeat-linear-gradient|radial-gradient)\(.*\)/i.test(t)}function le(t){return!re(t)&&(function(t){if(de(t)||ce(t))return!1;if(t=pe(t),!ae(t))return!1;return/^#?([\da-f]{3}|[\da-f]{6})$/i.test(t)}(t)||function(t){if(de(t)||ce(t))return!1;if(t=he(t),!ae(t))return!1;return/^#?[\da-f]{8}$/i.test(t)}(t)||de(t)||ce(t))}function ce(t){return/^rgba\((?:\s*0*(?:\d{1,2}(?:\.\d+)?(?:\s*%)?|\.\d+\s*%|100(?:\.0*)?\s*%|(?:1\d{2}|2[0-4]\d|25[0-5])(?:\.\d+)?)\s*,){3}\s*0*(?:\.\d+|1?)\s*\)$/.test(t)}function de(t){return/^rgb\((?:\s*0*(?:\d{1,2}(?:\.\d+)?(?:\s*%)?|\.\d+\s*%|100(?:\.0*)?\s*%|(?:1\d{2}|2[0-4]\d|25[0-5])(?:\.\d+)?)\s*,?){3}\)$/.test(t)}function ue(t){return re(t)?"gradient":le(t)?"color":"not_color"}function he(t=""){return"string"!=typeof t?t:String(t).replace(/[^\da-f]/gi,"").slice(0,8)}function pe(t,e=!1){return"string"!=typeof t?t:(3===(t=he(t)).length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),7===t.length&&(t+=t[6]),8===t.length&&/ff$/i.test(t)&&(t=t.slice(0,6)),e?`#${t}`:t)}function me(t){let e=String(t);const i=e.match(/<!--.*?-->/gi)||[];if(i.length&&i.forEach((t=>{e=e.replace(t,"")})),/<!/.test(e))return!1;if(["<!doctype","<area","<base","<br","<col","<embed","<hr","<img","<input","<keygen","<link","<meta","<param","<source","<track","<wbr"].forEach((t=>{const i=e.match(RegExp(`${t}.*?>`,"gi"))||[];i.length&&i.forEach((t=>{e=e.replace(t,"")}))})),!/<[/?a-z]/i.test(e))return!0;const o=e.match(/<[/a-z].*?>/gi)||[];if(!o.length)return!1;if(/<\//.test(o[0]))return!1;for(const t of o)if(t.match(/<[/a-z]/gi).length>1)return!1;const n=[];(e.match(/<[a-z].*?[\s>]/gi)||[]).reverse().forEach((t=>{n.push(t.substr(1,t.length-2))}));const s=e.match(/<\/.*?>/gi)||[];if(n.length!==s.length)return!1;for(const t of n){let i=0;const o=e.match(RegExp(`<${t}`,"gi"))||[];if(!o.length)return!1;o.forEach((t=>{i=e.indexOf(t,i),i+=1}));const n=e.substr(i).match(RegExp(`${t}.*?</${t}>`,"i"))||[];if(!n.length)return!1;if(e=e.replace(n[0],""),!/<[/?a-z]/i.test(e))return!0}return!1}function fe(t,e=!1){if(!t||"string"!=typeof t)return t;return[["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"]].forEach((([i,o])=>{const n=e?o:i,s=e?i:o;t=t.replace(new RegExp(n,"g"),s)})),t}function ge(t,e=!1){const i=$(t);let o=e?{}:i.data("product");if(!1===o)return!1;if(!o){o=$(t).closest("[data-product-item]").find("[data-product-action]").data("product")}if((null==o||"object"!=typeof o||Array.isArray(o))&&(o={img:i.attr("data-product-image"),title:i.attr("data-product-name"),price:i.attr("data-product-price"),count:i.attr("data-product-count"),productId:i.attr("data-product-id"),variantId:i.attr("data-variant-id")}),"object"==typeof o&&!o.strict){let t;if(4===flexbe_cli.theme_id?(t=i.closest(".content-zone, .flexbe-card, .flexbe-column, .modal-content"),t.length||(t=i.parents("[data-item-id]").last())):t=i.closest("[data-item-id], .modal-data").eq(0),o={...o},o.count||(o.count=1),e||!o.img){const e=t=>{const e=t.find("[data-img-id]").eq(0),i=e.attr("data-img-id"),o=e.attr("data-img-ext"),n=o?null:e.attr("data-img-name");return i?{id:i,ext:o,name:n}:null};o.img=e(t)||e(t.closest(".flexbe-row"))}if(e||!o.title){let e=t.find(".name, .title, .item-title, .text_title, .element-text--title, .font-family-title:not(.text-rotator), .font-family-subtitle:not(.text-rotator)").eq(0);e.length||(e=t.find(".font-family-content").eq(0)),o.title=e.text().trim()||""}if(e||!o.price&&0!==o.price){const e=t=>{const e=t.clone();flexbe_cli.is_admin&&e.find('[class^="editor"]').remove(),e.find(".text-rotator").remove(),e.find(".component-image").remove(),e.find("del, s, strike").remove();let i=String(e[0]&&e[0].innerText||"").replace(/\n/g,"<br>").replace(/\.$/,"").replace(/\u00a0/g," ");const o=i.match(/(?:\d?\D{0,2} ?)?[1-9](?:[ ,.]?\d{0,3}){2}(?:[,.]\d{1,2})?(?: ?\D)?/g)||[];return i=o.find((t=>t.includes(yt.currency.symbol)))||o[0]||"",i=(i.match(/([\d\s]+[ ,.]\d+|[\d\s]+)/g)||[])[0],i?(i=yt.parseMoney(i),i):null};o.price=e(i.closest(".element-item").find(".price, .item-price, .main-price, .element-text--price").eq(0))||e(i)||e(t.find(".price, .item-price, .main-price, .element-text--price").eq(0))||e(t)}}if(!o.id)if(o.productId){const[t]=flexbe_cli.ecommerce.productsStore.getProducts([o.productId]);if(t){const e=t.currentVariant(o.variantId||"default").getCartData("image");o.id=`product_${o.productId}:${o.variantId||"default"}`,e.img=x(e.img[0]),o={...o,...e}}else o={}}else{const t=flexbe_cli.p_id,e=i.parents("[data-id], [data-item-id], [data-multivar]").toArray().map((t=>(t.getAttribute("data-id")||t.getAttribute("data-item-id")||"")+(t.getAttribute("data-multivar")||""))).join(":"),n=flexbe_cli.helpers.utils.hashCode(o.title+o.price);o.id=`${t}_${e||0}:${n}`}return{type:o.productId?"product":"custom",...o}}const _e=t=>"string"==typeof t?new Date(t.slice(0,19).replace("T"," ")):t,ve=({dateFrom:t,dateTo:e,timezone:i=(t=>null==(t=flexbe)||null==(t=t.vars)||null==(t=t.project)?void 0:t.timezone)()})=>{const o=ne({date:new Date,timezone:i,format:"milliseconds"}),n=new Date(_e(t)).getTime(),s=new Date(_e(e)).getTime();return!(t&&n>o||e&&s<o)};let be=[];class ye extends l{constructor(){super(),this.initList()}dispatch(t,...e){const i=this[t];if("function"!=typeof i)throw new Error(`Cart dispatch: action '${t}' doesnt exist`);const o=i.apply(this,e);return this.trigger("dispatch",{name:t,args:e,result:o}),o}initList(){let t=[];if(flexbe_cli.is_admin){const e="ru"===flexbe_cli.locale.language,i="RUB"===flexbe_cli.locale.currency.code;t=[{id:"default1",count:1,protect:!0,img:{unq_id:"default1",id:1000000945,ext:"jpg"},vendorCode:e?"Артикул: 1234":"SKU: 1234",title:e?"Пример товара":"Example Item",price:i?750:10},{id:"default2",count:2,protect:!0,vendorCode:e?"Артикул: 1234":"SKU: 1234",img:{unq_id:"default2",id:1000000948,ext:"jpg"},title:e?"Другой товар":"Another Item",price:i?2550:25}]}else try{t=JSON.parse(localStorage.getItem("f_cart"))||[],t=t.filter((t=>t&&+t.count))}catch(t){console.error(t)}this.dispatch("updateList",t)}getList(){return be}getItem(t){return be.find((e=>e.id===t))}getCount(){return be.reduce(((t,e)=>t+e.count),0)}getTotal(){return be.reduce(((t,e)=>(e.count&&e.price&&(t+=parseInt(String(e.count),10)*parseFloat(String(e.price))),t)),0)}updateList(t){if(!Array.isArray(t))return null;if(t=t.map((t=>{var e;const i=this.getItem(t.id);if("string"==typeof t.img){const e=v(t.img);t.img=e&&{id:e.id,ext:e.ext}}else null!=(e=t.img)&&e.img_id&&(t.img={id:t.img.img_id,ext:t.img.img_ext,unq_id:String(t.img.unq_id||t.img.id)});var o,n,s;(t.img=t.img||null,t.type=t.type||"custom",t.price=null==t.price?null:parseFloat(t.price),i&&null==t.orderPrice)?t.orderPrice=null!=(o=i.orderPrice)?o:i.price:null==t.orderPrice&&(t.orderPrice=t.price);return t.quantity="custom"===(s=n=t).type||s.quantity===1/0||-1===s.quantity?1/0:n.quantity,t.count=Math.round(+t.count)||0,t})),flexbe_cli.run.is_preview)try{localStorage.setItem("f_cart",JSON.stringify(t))}catch(t){}return be=t,be}purchase(){flexbe_cli.stat.ecommerce.purchase(be),this.resetList()}resetList(){const t=[...be].filter((t=>t.protect));this.updateList(t)}addItem(t){if(!t.id)throw new Error("Cart add item: product ID is not defined");const e=[...be],i={...t,count:parseFloat(t.count)||1},o=this.getItem(i.id);if(o){const t=e.indexOf(o);i.count+=o.count,e.splice(t,1,i)}else e.push(i);return this.updateList(e),flexbe_cli.stat.ecommerce.add(i),e}removeItem(t){const e=this.getItem(t),i=[...be];return!e||e.protect?be:(i.splice(i.indexOf(e),1),flexbe_cli.stat.ecommerce.remove(e),this.updateList(i))}updateCount({id:t,count:e}){const i=this.getItem(t);if(!i)return null;const o=+i.count||0;"+"===e?i.count+=1:"-"===e&&i.count>0?i.count-=1:i.count=""===e?1:e,Number.isNaN(+i.count)&&(i.count=o),this.updateList(be);const n=i.count-o;return n>0?flexbe_cli.stat.ecommerce.add({...i,count:n}):n<0&&flexbe_cli.stat.ecommerce.remove({...i,count:-n}),i}normalizeListItems(t=be,e={price:!0,count:!1,unavailable:!1}){let i=t.map((t=>{const i={...t};return e.price&&(i.orderPrice=t.price),e.count&&!ci.settings.allowPreorder&&(i.count=Math.min(t.count,t.quantity)),i}));return e.unavailable&&(i=i.filter((t=>!t.hidden&&t.count))),this.updateList(i),i}}class we extends l{constructor(){super(),this.enabled=void 0,this.activeMethod=void 0,this.methods=void 0,this.ecommerceSetting=void 0,this.methods=(E._project.delivery||[]).filter((t=>t.enabled)),this.ecommerceSetting=ci.settings,this.enabled=this.methods.length>0,this.activeMethod=this.methods[0]}dispatch(t,...e){const i=this[t];if("function"!=typeof i)throw new Error(`Delivery dispatch: action '${t}' doesnt exist`);const o=i.apply(this,e);this.trigger("dispatch",{name:t,args:e,result:o})}getActive(){const t=this.activeMethod;return t?{id:t.id,type:t.type,title:t.title,desc:t.desc,price:this.getPrice(t.id)}:null}getMethod(t){return this.methods.find((e=>`${e.id}`===t))}selectMethod(t){return this.activeMethod=this.getMethod(t)||this.methods[0],this.activeMethod}getPrice(t){const{appliedPromocode:e}=ci.promotionStore||{},i=t?this.getMethod(t):this.activeMethod,o=+this.ecommerceSetting.minTotalOrder;let n,s=0,a="⏤",r=0,l="",c=0,d="",u=0,h="",p=0,m="",f=!1;if(i){const t=ci.cartStore.getTotal(),a=(null==e?void 0:e.hasFreeDelivery)&&(null==e?void 0:e.isActive);i.prices.filter((t=>""!==t.from)).forEach(((e,n)=>{i.useMinTotal&&!n&&+e.from&&(s=+e.price,+e.from>o&&(u=+e.from)),(t>=+e.from||!n)&&(s=+e.price),a&&(s=0)}));const g=i.prices.find((t=>0===t.price));f=!!i.useNotFixTotal,n=f&&(!g||""===g.from),g&&(r=+g.from||0,c=Math.max(0,r-t),l=yt.formatMoney(r),d=yt.formatMoney(c)),u&&(p=Math.max(0,u-t),h=yt.formatMoney(u),m=yt.formatMoney(p))}return(!f||r&&c<=0)&&(f=!1,a=yt.formatMoney(s,{freeLabel:!0})),{current:s,currentFormatted:a,freeFrom:r,freeFromFormatted:l,untilFree:c,untilFreeFormatted:d,minTotal:u,minTotalFormatted:h,untilMinTotal:p,untilMinTotalFormatted:m,notFixedPrice:f,notHasFree:n}}}class Ae extends l{get hasPromotionChanges(){var t,e;return!(null==(t=this.promotionsChanges)||!t.discount)||!(null==(e=this.promotionsChanges)||!e.promocode)}get groupId(){return"object"==typeof flexbe_cli?flexbe_cli.group_id:null}get timezone(){return"object"==typeof flexbe_cli?flexbe_cli.vars._project.timezone:null}constructor(t){super(),this.options=void 0,this.discounts=void 0,this.promocode=void 0,this.activeDiscount=void 0,this.nearestDiscount=void 0,this.appliedPromocode=void 0,this.promotionsChanges=void 0,this.getTotal=void 0,this.getTotalIncludingPromotions=void 0,this.options=t,this.appliedPromocode=null,this.activeDiscount=null,this.nearestDiscount=null,this.promotionsChanges={},this.getTotal=()=>(null==t.getTotal?void 0:t.getTotal())||0,this.getTotalIncludingPromotions=()=>{var t,e;return this.getTotal()-((null==(t=this.activeDiscount)?void 0:t.discountValue)||0)-((null==(e=this.appliedPromocode)?void 0:e.discountValue)||0)},flexbe_cli.is_admin||this.init(t)}init(t){var e;this.updateDiscountList(null!=(e=flexbe_cli.vars._project.discounts)?e:[],{updateChanges:!1}),t.needUpdateWithLS&&this.updateFromLocalStorage(),this.updateActiveDiscount(!1),this.updateNearestDiscount(),this.bindEvents()}async dispatch(t,...e){const i=this[t];if("function"!=typeof i)throw new Error(`Promotion dispatch: action '${t}' doesnt exist`);const o=await i.apply(this,e);this.trigger("dispatch",{name:t,args:e,result:o})}bindEvents(){this.on("dispatch.promotion-store",(({name:t})=>{["applyPromocode","removePromocode"].includes(t)&&(this.updateActiveDiscount(),this.updateNearestDiscount())}))}updateActiveDiscount(t=!1){var e;if(!this.discounts.length||this.appliedPromocode&&!this.appliedPromocode.usage_with_any_discount)return void(this.activeDiscount=null);const i=this.discounts.filter((t=>t.isAvailableByTime)),o=this.getTotal(),n=i.filter((t=>o>=t.active_from&&o-t.discountValue>=0)).sort(((t,e)=>e.discountValue-t.discountValue))[0]||null,s=this.activeDiscount,a=n?this.getDiscountData(n.id):null;t&&(null==n?void 0:n.discountValue)!==(null==(e=this.activeDiscount)?void 0:e.discountValue)&&(this.promotionsChanges.discount={oldData:s,newData:a}),this.activeDiscount=a}updateNearestDiscount(){var t;const e=this.getTotal(),i=this.getTotalIncludingPromotions();if(!this.discounts.length||this.appliedPromocode&&!this.appliedPromocode.usage_with_any_discount||i<=0)return void(this.nearestDiscount=null);const o=this.discounts.filter((t=>t.isAvailableByTime)),n=null==(t=o.filter((t=>t.active_from>e)).filter((t=>{if(this.activeDiscount){if("percent"===t.discount_type){const e=t.active_from*t.discount_amount;return"percent"===this.activeDiscount.discount_type?e>t.active_from*this.activeDiscount.discount_amount:e>this.activeDiscount.discount_amount}return+t.discount_amount>this.activeDiscount.discountValue}return!0})).sort(((t,e)=>t.discountValue-e.discountValue)).sort(((t,e)=>t.active_from-e.active_from))[0])?void 0:t.active_from;if(n){const t=o.filter((t=>t.active_from===n)).filter((t=>{var e;return!this.activeDiscount||t.discountValue>(null==(e=this.activeDiscount)?void 0:e.discountValue)})).sort(((t,e)=>e.discountValue-t.discountValue))[0]||{};this.nearestDiscount=t?this.getDiscountData(t.id):null}else this.nearestDiscount=null}updateAppliedPromocode(){var t;if(!this.appliedPromocode)return;const e=(null==(t=this.promotionsChanges)||null==(t=t.promocode)?void 0:t.oldData)||this.appliedPromocode,i=this.getPromocodeData();if(e&&i){var o;if(e.discountValue!==(null==i?void 0:i.discountValue)||e.delivery_free!==(null==i?void 0:i.delivery_free))this.promotionsChanges.promocode={oldData:(null==(o=this.promotionsChanges)||null==(o=o.promocode)?void 0:o.oldData)||this.appliedPromocode,newData:i,code:this.appliedPromocode.code};else this.acceptPromotionChanges({promocode:!0});this.appliedPromocode=this.promocode}}async applyPromocode(t){const e=this.getTotal();let i;try{i=await this.loadDataPromocode(t)}catch(t){const e=Error();throw e.name="default_error",e}if(this.updatePromocode(i,{updatePromotions:!1}),e&&this.promocode.active_from&&this.promocode.active_from>e){const t=new Error(this.promocode.active_from.toString());throw t.name="total_error",t}if(!this.promocode.isAvailableByTime){const t=new Error;throw t.name="timeout_error",t}if(this.appliedPromocode=i,this.options.needUpdateWithLS)try{localStorage.setItem("f_applied_promocode",JSON.stringify({code:t,id:this.promocode.id}))}catch(t){}}removePromocode(){this.appliedPromocode=null,this.acceptPromotionChanges({promocode:!0});try{localStorage.removeItem("f_applied_promocode")}catch(t){}}acceptPromotionChanges({promocode:t,discount:e}={}){t||e?(t&&delete this.promotionsChanges.promocode,e&&delete this.promotionsChanges.discount):this.promotionsChanges={}}async updateFromLocalStorage(){const t=JSON.parse(localStorage.getItem("f_applied_promocode"));if(t&&t.id&&t.code){var e;let i;try{i=await this.loadDataPromocode(t.code)}catch(t){return void this.removePromocode()}if(this.updatePromocode(i,{updatePromotions:!1}),null==(e=this.promocode)||!e.isActive)return void this.removePromocode();this.appliedPromocode=this.promocode}}getDiscountData(t){return this.discounts.find((e=>e.id===t))}getPromocodeData(){return this.promocode}async loadPromotionList(t){return new Promise(((e,i)=>$.ajax({url:"/api/promotions/get_list/",type:"GET",dataType:"json",data:{project_id:flexbe_cli.vars._project.id,promotionType:t}}).done((t=>{e(t)})).fail((t=>{i(t)}))))}async loadDataPromocode(t){return new Promise(((e,i)=>$.ajax({url:"/api/promotions/get_promocode/",type:"GET",dataType:"json",data:{project_id:flexbe_cli.vars._project.id,promoCode:t}}).done((t=>{e(t)})).fail((t=>{i(t)}))))}updatePromocode(t,{updatePromotions:e=!0}={}){"object"==typeof t&&Object.defineProperties(t,{isAvailableByTime:{get:()=>{const{date_from:e,date_to:i}=t;return ve({dateFrom:e,dateTo:i,timezone:this.timezone})}},discountValue:{get:()=>{const e=this.getTotal();return t&&"percent"===t.discount_type?Math.round(e*t.discount_amount)/100:+t.discount_amount}},isAvailable:{get:()=>!!this.promocode&&t.isAvailableByTime},isActive:{get:()=>{if(!t.isAvailable)return!1;const e=this.getTotal();return(null==t?void 0:t.active_from)<=e}},hasFreeDelivery:{get:()=>(null==t?void 0:t.delivery_free)||"delivery"===(null==t?void 0:t.discount_type)}}),this.promocode=t,e&&this.updateAppliedPromocode()}updateDiscountList(t,{updateChanges:e=!0,updatePromotions:i=!0}={}){t.forEach((t=>{Object.defineProperties(t,{isAvailableByTime:{get:()=>{const{date_from:e,date_to:i}=t;return ve({dateFrom:e,dateTo:i,timezone:this.timezone})}},discountValue:{get:()=>{const e=this.getTotal();return t&&"percent"===t.discount_type?Math.round(e*t.discount_amount)/100:+t.discount_amount}}})})),this.discounts=t,i&&(this.updateActiveDiscount(e),this.updateNearestDiscount())}async loadDiscountList({updateChanges:t=!0,updatePromotions:e=!0}={}){let i;try{i=await this.loadPromotionList("discount")}catch(t){return void(this.discounts=[])}this.updateDiscountList(i,{updateChanges:t,updatePromotions:e})}}function xe({actionName:t,link:e,blank:i,action:o,productKey:n,productData:s}){return!["none","cart"].includes(t)&&e?React.h("a",{"data-action":t,href:"link"===t&&decodeURI(e),target:"link"===t&&i?"_blank":null}):"cart"===t&&"cart"===o?React.h("a",{"data-action":"cart",className:"cart-options-actions","data-product":JSON.stringify(s)}):"cart"===t&&"modal"===o?React.h("a",{id:n,"data-action":"modalOptions",className:"cart-options-actions"}):React.h(React.Fragment,null)}function $e({style:t,imageStyle:e,overlayType:i}){const o=navigator.userAgent.toLowerCase(),n=o.includes("mobile")&&o.includes("safari"),s={backgroundColor:t.overlay_color,opacity:t.overlay_opacity/100};return React.h("div",{className:"component-image__overlay overlay-container scrollable","data-type":i},React.h("div",{className:"overlay-content","data-position":t.overlay_position||"center","data-contrast":t.overlay_contrast||null},t.overlay_color&&t.overlay_opacity?React.h("div",{className:"overlay-layer",style:s}):"",e.title?React.h("div",{className:"overlay-title"},`${e.title} ${n?"&#8205;":""} `):"",e.desc?React.h("div",{className:"overlay-desc"},`${e.desc} ${n?"&#8205;":""} `):""))}function ke({image:t,style:e,action:i,link:o,productData:n,productKey:s}){var a,r,l,c,d;const u=React.useRef(null),h=flexbe_cli.vars._project.images,f=h.effect,g={...t,...x(t)},_=e.overlay_type||"none",v="none"!==_,b={lazy:h.lazy||e.lazy,autoload:null==(a=e.autoload)||a,size:e.original_resolution?0:"%optimalWidth%",action:e.action||"none",type:e.type||"background",scale:"image"===e.type?"contain":e.scale||"cover",effect:"zoom",x:(null==(r=e.position)?void 0:r.x)||"50%",y:(null==(l=e.position)?void 0:l.y)||"50%",round:e.round||0,title:v?e.title:"",desc:v?e.desc:"",hrefSrc:k(g,e.original_resolution?0:1920,h),imageWidth:e.fitToSize&&"image"===e.type?Math.round(t.width<t.height?t.width/t.height*e.fitToSize:e.fitToSize):null,imageHeight:e.fitToSize&&"image"===e.type?Math.round(t.height<t.width?t.height/t.width*e.fitToSize:e.fitToSize):null},y={ext:g.ext,name:g.name,id:g.id,border:g.border||"mixed",animated:g.animated||null,transparent:g.transparent||null,proportion:e.proportion||g.proportion||null,average:e.average||g.average||"#F7F7F7",preview:e.preview||g.preview||""},w=["phone","mail","pages","product-page","anchor"].includes(b.action)?"link":b.action,A=k(g,0,h),$=p(g,b.lazy,f)&&"background"===b.type,C="mail"===b.action||(e.link_blank||null),S=e.alt||b.title||b.desc||(null==n?void 0:n.title)||null,R="none"!==w&&(null!=(c=null!=(d=e.effect)?d:b.effect)&&c),E={"--imagePositionX":b.x,"--imagePositionY":b.y},z=y.proportion?{aspectRatio:`100 / ${y.proportion}`}:{},I=$?m(g,f,b.scale):null;return React.useLayoutEffect((()=>{u.current&&flexbe_cli.components.initComponent(u.current)}),[t]),React.useLayoutEffect((()=>{u.current&&flexbe_cli.components.initComponent(u.current)}),[t]),React.h("div",{className:`component-image loading ${b.round?"round":""} ${e.class||""}`,style:E,"data-component":"image","data-action-target":"none"!==w||null,"data-lightbox":"popup"===w&&b.hrefSrc||null,"data-sub-html":"popup"===w&&v?".overlay-content":null,"data-effect":R||null,"data-uniq-id":g.unq_id||null,"data-img-scale":b.scale,"data-img-type":b.type,"data-img-id":y.id,"data-img-ext":y.ext,"data-img-x":b.x,"data-img-y":b.y,"data-img-proportion":y.proportion,"data-has-placeholder":$,"data-img-width":g.width,"data-img-lazy":!!b.lazy||null,"data-img-autoload":!!b.autoload||null,"data-img-original":!!e.original_resolution||null,"data-img-animated":!!y.animated||null,"data-img-transparent":!!y.transparent||null,ref:u},React.h(xe,{actionName:w,link:o,action:i,blank:C,productData:n,productKey:s}),"image"===b.type?React.h("img",{className:"component-image__image component-image__img",alt:S,width:b.imageWidth,height:b.imageHeight,style:z,"data-original":b.lazy&&A||null}):React.h("div",{className:`component-image__image component-image__bg component-image__bg--${b.scale}`,style:I,role:"img","aria-label":S,"data-original":b.lazy&&A||null},b.lazy?React.h("noscript",null,React.h("img",{alt:S,src:A})):""),v?React.h($e,{style:e,imageStyle:b,overlayType:_}):"")}function Ce({list:t,options:e,paginationPosition:i}){const o=e.pagination_type||t.pagination_type||"bullets",n=e.buttons_color||t.buttons_color||"dark",s="custom"===n?{color:e.color||t.color||"#000000"}:{},a="thumbs"!==o&&e.disabled,r=["right","left"].includes(i)?"vertical":"horizontal";return"none"!==o?React.h("div",{className:`slider-pagination ${a?" disabled":""} type--${o} color--${n} position--${i} size--${e.pagination_size||e.buttons_size||t.buttons_size||"medium"}`,"data-type":o,"data-direction":r,"data-prevent-action":"true","data-bullets-visible":"bullets"===o&&!!e.bullets_visible,style:s},"thumbs"===o?React.h("div",{className:"swiper-wrapper thumbs"},t.map((t=>React.h(React.Fragment,null,React.h(ke,{image:t.img||t,style:{class:"swiper-slide thumb-item",action:"none",overlay_type:"none",loadingEffect:"color",type:"background",scale:"cover",autoload:!1,title:null,desc:null,alt:null}}))))):React.h(React.Fragment,null)):React.h(React.Fragment,null)}function Se({button:t,list:e,options:i}){const o=i.buttons_color||e.buttons_color||"dark",n=i.buttons_size||e.buttons_size||"medium",s=i.color||e.color||"#000000",a="custom"===o&&s?{color:s}:{};return React.h("div",{className:`slider-button ${i.class} size--${n} style--${i.buttons_style||e.buttons_style||"filled"} shape--${i.buttons_shape||e.buttons_shape||"round"} color--${o} position--${i.buttons_position||e.buttons_position||"inside"}`,"data-direction":null!=t?t:"prev","data-prevent-action":!0,style:a},React.h("div",{className:"slider-button-holder"},React.h("div",{className:"slider-button-bg"}),React.h("svg",{className:"slider-button-icon","data-contrast":"custom"===o?i.contrast||e.contrast||"light":null},React.h("use",{href:`/_s/images/theme/4/res/slider.svg#btn-${n}-${i.buttons_type||e.buttons_type||!0}`}))))}function Re({displayImage:t,defaultImg:e,list:i,style:o,action:n,link:s,productData:a,productKey:r}){var l,c,d,u;const h=React.useRef(null),p=o.pagination_type||i.pagination_type||"bullets",m=null!=(l=null!=(c=o.pagination_position)?c:i.pagination_position)?l:"thumbs"===p?"bottom":"inside";return React.useLayoutEffect((()=>{const o=h.current;if(o&&(flexbe_cli.components.initComponent(o),"product"===t&&null!=o&&o.componentInstance)){const t=$(o).find(`[data-uniq-id=${e||i[0].unq_id}]`).closest("[data-real-index]").data("realIndex");if(null!=t)try{setTimeout((()=>{o.componentInstance.slideTo(t,!0)}),10)}catch(t){flexbe_cli.components.destroyComponent(o)}}}),[e,h]),React.h("div",{ref:h,className:`component-slider swiper lightbox-container ${o.controls_on_hover||i.controls_on_hover?"swiper-controls-only-hover":""} ${o.class||""}`,"data-effect":o.slider_effect||i.slider_effect||"slide","data-count":i.length,"data-autoplay":o.autoplay||i.autoplay||0,"data-loop":i.length<2?0:o.loop||i.loop,"data-pagination":"none"===p?null:m,"data-img-type":o.type||"background","data-component":"slider"},React.h("div",{className:"component-slider__wrapper swiper-wrapper"},i.map(((t,e)=>{var l,c,d,u;return React.h("div",{className:"component-slider__item swiper-slide "+(e?"":"swiper-slide-active"),"data-media-id":t.id,"data-type":o.type||"background","data-real-index":e},React.h(ke,{image:t.img||t,style:{action:o.action||i.action,scale:o.scale||i.scale||"cover",effect:null!=(l=null!=(c=o.image_zoom)?c:i.image_zoom)?l:"zoom",original_resolution:null!=(d=o.original_resolution)&&d,link_blank:null!=(u=o.link_blank)?u:null,title:"",desc:"",alt:"",autoload:!e},productData:a,link:s,productKey:r,action:n}))}))),i.length>1&&(null==(d=null!=(u=o.buttons_enabled)?u:i.buttons_enabled)||d)?React.h(React.Fragment,null,React.h(Se,{button:"prev",list:i,options:{...o,class:"disabled"}}),React.h(Se,{button:"next",list:i,options:{...o,class:"disabled"}})):"",i.length>1?React.h(Ce,{list:i,options:{...o,disabled:1},paginationPosition:m}):"")}function Ee({displayImage:t,defaultImg:e,images:i,style:o,action:n,link:s,proportion:a,typeCard:r,padding:l,productData:c,productKey:d}){const u=null!=a?a:12,h=null!=r?r:"single";return React.h("div",{className:"zone-products__element zone-products__media zone-products__media-content",style:l||null,"data-cols":"double"===h&&u},"image"===o.type?React.h(ke,{image:i[0],style:o.image,link:s,productData:c,productKey:d,action:n}):React.h(Re,{displayImage:t,defaultImg:e,list:i,link:s,style:o.slider,productData:c,productKey:d,action:n}))}const ze=t=>{try{return me(t)||(t=fe(t)),t}catch(e){return t}};function Ie({name:t,style:e,padding:i,link:o,action:n,productData:s,productKey:a}){var r,l,c,d;const u=null!=(r=e.action)?r:"none",h=e.color||"contrast",p=h.includes("#")?"custom":h,m=React.useMemo((()=>{const i=ze(t);var r;return["product-page","pages"].includes(u)?React.h("a",{href:decodeURI(o),target:null!=(r=e.action_link_blank)&&r?"_blank":null},i):"cart"===u&&"cart"===n?React.h("a",{"data-action":"cart",className:"cart-options-actions","data-product":JSON.stringify(s)},i):"cart"===u&&"modal"===n?React.h("a",{id:a,"data-action":"modalOptions",className:"cart-options-actions"},i):i}),[u,n,s,e.action_link_blank,t]);return React.h(null!=(l=e.tag)?l:"div",{className:`zone-products__element zone-products__title font-family-${null!=(c=e.style)?c:"content"} ${"none"!==u?"use-hover-effect":""} hover-style--${null!=(d=e.hover_effect)?d:"color"}`,style:null!=i?i:null,"data-color":`${p}`},React.h("span",null,m))}const Oe={selectClass:"",dropdownClass:"",selectedClass:"selected",optionSelector:"option",attrValue:"value",position:"over",padding:10,title:!1};class Te{static create(t){return new this(t)}constructor(t){this.opts=t,this.config={...Oe,...t.config},this.element=t.element,this.$select=$(this.element),this.isNativeSelect=this.$select.is("select"),this.selectAllDevice="select"===this.$select.data("type"),this.blurTimeOut=!1,this.blurListTimeOut=!1,this.focused=!1,this.active=!1,this.createSelect()}createSelect(){this.$customSelect=$(`\n            <div class="dropdown-container ${this.config.selectClass}">\n                <div tabindex="0" class="dropdown-select">\n                    <span class="dropdown-select__content selected"></span>\n\n                    <span class="arrow">\n                        <svg viewBox="0 0 10 6" xmlns="http://www.w3.org/2000/svg">\n                            <path fill="currentColor" d="M 1.4 6.99441e-15L 0 1.34043L 5 6L 10 1.34043L 8.6 0L 5 3.34998L 1.4 6.99441e-15Z"/>\n                        </svg>\n                    </span>\n                </div>\n            </div>\n        `),this.$customSelect__content=this.$customSelect.find(".dropdown-select__content"),this.$select.after(this.$customSelect),this.syncSelect(),this.selectAllDevice||flexbe_cli.run.is_screen_desktop?(this.$customSelect.off("click.selected").on("click.selected",".dropdown-select",(t=>{clearTimeout(this.blurListTimeOut),this.active?this.collapse():this.activate(t)})),this.$customSelect.off("focus.selectFocus").on("focus.selectFocus",".dropdown-select",(()=>{this.focused=!0,this.$listWrapper||this.createList()})),this.isNativeSelect&&this.$select.off("change.changeSelect").on("change.changeSelect",(t=>{const e=this.$listWrapper.find(".dropdown-select-ul li"),i=t.currentTarget.value;e.removeClass(this.config.selectedClass),e.filter(((t,e)=>e.getAttribute(this.config.attrValue)===i)).addClass(this.config.selectedClass),this.$customSelect__content.text(i),"function"==typeof this.opts.onChange&&this.opts.onChange(t)})),this.$customSelect.off("keydown.selectKeydown").on("keydown.selectKeydown",".dropdown-select",(t=>{if(this.focused&&[13,27,32,38,40].includes(t.keyCode)){t.preventDefault();const e=this.$list.find(`.option-e.${this.config.selectedClass}`).filter((t=>!$(t).attr("disabled")));if(40===t.keyCode)t.preventDefault(),this.select(e.next(),!1),this.scrollToSelected();else if(38===t.keyCode)t.preventDefault(),this.select(e.prev(),!1),this.scrollToSelected();else if(this.active||32!==t.keyCode){if(this.active&&[13,27,32].includes(t.keyCode))return t.preventDefault(),this.collapse(),!1}else t.preventDefault(),this.activate(t)}}))):this.$select.off("change.selected").on("change.selected",(t=>{const e=t.target.value;this.$customSelect__content.text(e)}))}syncSelect(){const t=this.$select.children(this.config.optionSelector).filter(((t,e)=>{var i;return(null!=(i=e.selected)?i:$(e).attr("selected"))||$(e).hasClass(this.config.selectedClass)})).eq(0),e=t.html()||"—";this.$customSelect__content.attr(this.config.attrValue,t.attr(this.config.attrValue)),this.$customSelect__content.html(e)}createList(){const t=this.$select.children(this.config.optionSelector);this.$listWrapper=$(`\n            <div class="select-container-in-body">\n                <div class="overlay"></div>\n                <ul class="dropdown-select-ul scrollable ${this.config.dropdownClass}" tabindex="0"></ul>\n            </div>\n        `),this.$list=this.$listWrapper.find(".dropdown-select-ul"),t.each(((t,e)=>{var i,o,n;const s=$(e),a=(null!=(i=e.selected)?i:s.attr("selected"))||s.hasClass(this.config.selectedClass),r=(null!=(o=e.disabled)?o:s.attr("disabled"))||s.hasClass("disabled"),l=(null!=(n=e.locked)?n:s.attr("locked"))||s.hasClass("locked"),c=this.isNativeSelect?s.val():s.attr(this.config.attrValue),d=s.html().trim()||"—";let u="";this.config.title&&(u=s.attr("data-title"));const h=$(`<li title='${u}' class="option-e"></li>`);a&&!r&&h.addClass(this.config.selectedClass),r&&h.attr("disabled","disabled"),l&&h.attr("locked","locked"),h.attr(this.config.attrValue,c),h.html(d),this.$list.append(h)}))}select(t,e){if(!t[0])return;if(t.attr("disabled"))return clearTimeout(this.blurTimeOut),void this.$list.off("blur.listBlur").on("blur.listBlur",(()=>{this.focused=!1,this.blurListTimeOut=setTimeout((()=>{this.$listWrapper&&this.collapse()}),200)}));const i=t.attr(this.config.attrValue);if(t.siblings("li").removeClass(this.config.selectedClass),t.addClass(this.config.selectedClass),this.isNativeSelect)this.$select.val(i);else{const t=this.$select.children(this.config.optionSelector);t.removeAttr("selected").removeClass(this.config.selectedClass),t.filter(`[${this.config.attrValue}=${i}]`).addClass(this.config.selectedClass).attr("selected","selected")}this.syncSelect(),e&&this.collapse()}scrollToSelected(){const t=this.$list[0].offsetHeight;if(this.$list[0].scrollHeight<=t)return!1;const e=this.$list.children(".option-e").find(`.${this.config.selectedClass}`)[0];e&&e.scrollIntoView()}collapse(){clearTimeout(this.blurTimeOut),this.active=!1,this.$listWrapper.removeClass("active rise"),this.$listWrapper.detach(),"function"==typeof this.opts.onCollapse&&this.opts.onCollapse()}activate(t){if(this.active)return!1;this.active=!0,this.createList();const e=this.config.padding||0,i={...flexbe_cli.helpers.dom.getElOffset(this.$customSelect[0]),width:this.$customSelect.width(),height:this.$customSelect.height()};"under"===this.config.position&&(i.top=i.top+i.height+e),this.$listWrapper.off("click.closeSelect").on("click.closeSelect",".overlay",(t=>{this.collapse();const e=document.elementFromPoint(t.clientX,t.clientY);e&&e.focus()})),this.$listWrapper.off("click.selectLi").on("click.selectLi",".dropdown-select-ul li",(t=>{const e=$(t.currentTarget);this.select(e,!0),"function"==typeof this.opts.onSelect&&this.opts.onSelect(t)})),this.$listWrapper.off("mousewheel.selectUl").on("mousewheel.selectUl",".dropdown-select-ul",(t=>{const e=t.currentTarget.scrollHeight,i=t.currentTarget.clientHeight;return!(t.currentTarget.scrollTop===e-i&&t.deltaY>0||0===t.currentTarget.scrollTop&&t.deltaY<0)})),$("body").append(this.$listWrapper),clearTimeout(this.blurTimeOut),this.$list.css({left:`${i.left}px`,top:`${i.top}px`,width:`${i.width}px`}),this.$listWrapper.outerWidth(),this.$listWrapper.toggleClass("rise",!!this.$select.closest(".m_modal, .w_widget").length),this.$listWrapper.addClass("active"),this.scrollToSelected(),"function"==typeof this.opts.onActivate&&this.opts.onActivate(t)}}const Pe=t=>{try{return me(t)||(t=fe(t)),t}catch(e){return t}},Me=({selectBlock:t,selectOption:e,optionsSize:i})=>{if(t.current){const o={optionSelector:".zone-products-option__select-item",attrValue:"data-option-id",dropdownClass:`products-select products-select__${i}`,position:"under",title:!0},n=$(t.current).find(".zone-products-option__select-block"),s=t=>{$(t.target).attr("disabled")||e(t.target.dataset.optionId)},a=()=>{n.removeClass("active")},r=t=>{t.preventDefault(),t.stopPropagation(),n.addClass("active"),n.siblings(".zone-products-option__select-content").removeClass("active")};$(t.current).find(".dropdown-container").remove(),Te.create({element:n[0],config:o,onSelect:s,onActivate:r,onCollapse:a})}},Le=(t,e)=>{t.filter("[data-tooltipstered]").each(((t,e)=>{flexbe_cli.tip.destroy(e)})),t.each(((t,i)=>{const o=$(i),n=o.attr("data-option-id"),s=e.find((t=>t.optionId===n)),a=s.tipText;if(o.removeClass("disabled locked"),o.addClass(s.exceptionClass),o.is("[data-tip-content]")){const t=o.attr("data-tip-content"),e=o.attr("data-radio"),n=t&&a?e?`<div class="zone-products-option-tip__title">${t}</div><div class="zone-products-option-tip__status">${a}</div>`:a:e?t:"";n&&flexbe_cli.tip.init(i,{interactive:!1,content:n,triggerOpen:{click:!0,touchstart:!1,mouseenter:!0}})}else{o.find(".option-state")[0].innerHTML=a}}))};function De({style:t,option:e,activeOption:i,selectOption:o,combinationOptionsList:n,cardStylesAdaptive:s}){var a,r,l,c,d,u,h,p,m,f,g,_,v,b,y;const w=React.useRef(null),A=React.useRef(null),x=null!=(a=t.size)?a:"medium",k=null!=(r=t.style)?r:"filled",C=null==(l=null!=(c=null==(d=t.label)?void 0:d.show)?c:t.show_title)||l,S=null!=(u=null==s?void 0:s.elementsStyles)?u:{},R=null!=(h=null!=(p=null==(m=null!=(f=t.adaptive)?f:{})||null==(m=m.label)?void 0:m.show)?p:null==S||null==(g=S.options)||null==(g=g.label)?void 0:g.show)?h:C,E=null!=(_=null==(v=e.data)?void 0:v.widget_type)?_:"vertical_list",z=i.map((t=>`${t.option_id}_${t.value_id}`)),I=null!=(b=t.label.color)?b:"contrast",O=null!=(y=t.color)?y:"contrast",T=I.includes("#")?"custom":I,P=O.includes("#")?"custom":O;React.useLayoutEffect((()=>{const t=$(A.current).find(".element-option");Le(t,n)}),[n]),React.useLayoutEffect((()=>{Me({selectBlock:w,selectOption:o,optionsSize:x})}),[o]);const M=t=>{const e=t.target;$(e).hasClass("disabled")||$(e).hasClass("active")||o(e.dataset.optionId)},L=React.useMemo((()=>"vertical_list"!==E?e.values.map((t=>{var i,o;const n=`option-style--${k}`,s=null!=(i=null!=(o=t.data.contrastFixed)?o:t.data.contrast)?i:"dark",a={background:t.data.color};return React.h("div",{className:`element-option zone-products-option ${z.includes(`${e.id}_${t.id}`)?"active selected":""} zone-products-option--${E} ${"radio"!==E&&n}`,"data-option-id":`${e.id}_${t.id}`,"data-tip-content":"radio"===E||"vertical_block"===E?Pe(t.name):null,"data-tooltipstered":"radio"===E||"vertical_block"===E||null,"data-radio":"radio"===E||null,onClick:M},"color"===e.data.type&&"radio"===E?React.h("span",{className:"option-color-item__substrate"}):"","color"===e.data.type?React.h("span",{className:"option-color-item",style:a}):"","radio"===E?React.h("i",{className:"","data-contrast":s}):"","radio"!==E?React.h("span",{className:"option-name-item"},Pe(t.name)):"","radio"!==E&&"horizon_block"===E?React.h("span",{className:"option-state"}):"")})):React.h("div",{ref:w,className:`zone-products-option__select-content option-style--${k}`},React.h("div",{className:"form-field-select"},React.h("div",{className:"select-outer"},React.h("div",{"data-type":"select",className:"zone-products-option__select-block"},e.values.map((t=>{const i={background:t.data.color};return React.h("div",{className:"element-option zone-products-option__select-item "+(z.includes(`${e.id}_${t.id}`)?"active selected":""),"data-title":Pe(t.name),"data-option-id":`${e.id}_${t.id}`},"color"===e.data.type?React.h("span",{className:"option-color-item",style:i}):"",React.h("div",{className:"option-text-block text-block"},React.h("span",{className:"option-name"},Pe(t.name)),React.h("span",{className:"option-state"})))}))))))),[M,E]);return React.h(React.Fragment,null,React.h("div",{className:`zone-products-option__title ${C?"":"hidden-desktop"} ${R?"":"hidden-mobile"}`,"data-color":T},e.name),React.h("div",{ref:A,className:`zone-products-option__content ${"vertical_list"!==E?"zone-products-option__content-radio":""} option-size--${x}`,"data-color":P},L))}function Ne({options:t,activeOption:e,combinationOptionsList:i,style:o,padding:n,cardStylesAdaptive:s,selectOption:a}){return React.h("div",{className:"zone-products__element zone-products__options",style:null!=n?n:null},t.map((t=>React.h(De,{option:t,combinationOptionsList:i,activeOption:e,style:o,cardStylesAdaptive:s,selectOption:a}))))}function qe({style:t,fixToBottom:e,padding:i}){var o;const n=t.color||"contrast",s=null!=(o=t.opacity)?o:100,a=e||!1,r=t.no_gutter||!1,l={...i,"--colorOpacity":`${s}%`};return React.h("div",{className:`zone-products__element products-hr ${r?"no-gutter":""} ${a?"zone-products__button-to-bottom":""}`,style:l,"data-color":n})}function Ve({article:t,style:e,padding:i}){var o,n,s;const a=fe(t),r=null!=(o=e.show_article_value_only)&&o?a:flexbe_cli.locale.tr("ecommerce.article",{article:a}),l=null!=(n=e.style)?n:"content",c=null!=(s=e.tag)?s:"div",d=e.color||"contrast",u=d.includes("#")?"custom":d;return React.h(c,{className:`zone-products__element zone-products__article active font-family-${l}`,style:null!=i?i:null,"data-color":`${u}`},r)}const Fe=t=>{try{me(t)||(t=fe(t))}catch(t){}return t=t.replace(/\n/g,"<br>")};function je({description:t,style:e,padding:i}){var o,n;const s=e.color||"contrast",a=s.includes("#")?"custom":s,r=null!=(o=e.style)?o:"content",l=null!=(n=e.tag)?n:"div";return React.h(l,{className:`zone-products__element zone-products__desc font-family-${r}`,style:null!=i?i:null,"data-color":`${a}`,dangerouslySetInnerHTML:{__html:Fe(t)}},"")}function Be({style:t,variant:e,padding:i}){var o,n;const s=t.color.includes("#")?"custom":t.color||"contrast",a=t.colored_statuses||!1,r=null!=(o=t.style)?o:"content",l=null!=(n=t.tag)?n:"div",c=e.quantityInfo();return c.text?React.h(l,{className:`zone-products__element zone-products__available active font-family-${r} ${a?"colored-status":""} ${c.status}`,style:null!=i?i:null,"data-color":`${s}`},c.text):React.h(React.Fragment,null)}function He({variant:t,style:e,styleAdaptive:i,usePriceOld:o,padding:n,classes:s}){var a,r,l,c,d,u,h,p,m;const f=o&&(t.oldPrice?t.getPrice(t.oldPrice):null),g=e.old_price||{},_=null==(null==i||null==(a=i.old_price)?void 0:a.hide)||"inherit"===(null==i||null==(r=i.old_price)?void 0:r.hide)?null==(l=null==g?void 0:g.hide)||l:null==i||null==(c=i.old_price)?void 0:c.hide,v=o&&!_,b=o&&!(null==(d=null==g?void 0:g.hide)||d),y=React.useMemo((()=>React.h(React.Fragment,null,f?React.h("span",{className:`ecommerce-old-price ${b?"":"hidden-desktop"} ${v?"":"hidden-mobile"}`},f):"",React.h("span",{className:"ecommerce-price price"},t.getPrice(t.price)))),[f,t.price]);return React.h(null!=(u=null==(h=e.price)?void 0:h.tag)?u:"div",{className:`zone-products__element zone-products__price-container font-family-${null!=(p=null==(m=e.price)?void 0:m.style)?p:"content"} ${s||""}`,style:null!=n?n:null},y)}function We({isLazyLoading:t,fillData:e,borderData:i,glareData:o}){var n,s,a;const r=flexbe_cli.vars._project.images,l="image"===e.type&&e.image?{id:e.image.id,ext:e.image.ext,width:e.image.width,animated:null!=(n=e.image.animated)?n:0,transparent:null!=(s=e.image.transparent)?s:0,proportion:null!=(a=e.image.proportion)?a:0,url:k(e.image,1400,r)}:{},c=t?{}:{"background-image":`url(${l.url})`};return React.h(React.Fragment,null,"color"===e.type?React.h("span",{className:"bg-fill-hover"}):"","image"===e.type&&l.id?React.h("span",{className:"bg-fill-hover","data-type":"image","data-img-id":l.id,"data-img-ext":l.ext,"data-img-width":l.width,"data-img-animated":l.animated,"data-img-transparent":l.transparent,"data-img-proportion":l.proportion,"data-hover-type":e.type,style:c}):"",o.enabled?React.h("span",{className:"bg-glare-hover"}):"",i.color?React.h("span",{className:`bg-border-hover is-${ue(i.color)}`}):"")}const Ue=t=>{const e=["bg-element"],i=!(!t.hover||!t.hover.enabled)&&t.hover;var o;i&&((i.text&&i.text.enabled||i.fill&&i.fill.enabled)&&e.push("hover-trigger-text"),i.border&&i.border.enabled&&e.push("hover-trigger-border"),i.fill&&i.fill.enabled&&("circle"===i.fill.style?e.push("hover-trigger-fill_circle"):"rectangle"===i.fill.style?e.push("hover-trigger-fill_rectangle"):e.push("hover-trigger-fill_fade")),i.scale&&i.scale.enabled&&e.push("hover-trigger-scale"),i.shift&&i.shift.enabled&&e.push("hover-trigger-shift"),i.fadein&&i.fadein.enabled&&e.push("hover-trigger-fadein"),i.shadow&&i.shadow.enabled&&e.push("hover-trigger-shadow"),i.opacity&&i.opacity.enabled&&e.push("hover-trigger-opacity"),i.underline&&i.underline.enabled&&e.push("hover-underline"),e.some((t=>t.includes("hover")))&&(e.push("hover-trigger","js-hover"),null==(o=i.mobile_disabled)||o||e.push("hover-trigger-am")));return e.join(" ")};function Ge({background:t,transitions:e}){var i,o,n,s,a,r,l,c,d,u;const h=flexbe_cli.vars._globals.isMobile,m=flexbe_cli.vars._globals.isEditor,f=flexbe_cli.vars._project.optimization.critical_css&&!m,g=e.hover.enabled?e.hover:{},_={type:"none",...g.fill||{}},v=null!=(i=g.border)?i:{},b=null!=(o=g.glare)?o:{},y=flexbe_cli.vars._project.images,w=y.effect,A=y.lazy&&!f,x={type:t.type||"none",shadowEnabled:t.shadow_enabled||(null==(n=t.shadow)?void 0:n.enabled)||(null==(s=g.shadow)?void 0:s.enabled),borderEnabled:t.border_enabled||t.border>0||(null==(a=g.border)?void 0:a.enabled),borderColorType:ue(null!=(r=t.border_color)?r:null==(l=g.border)?void 0:l.color),image:A?t.image:k(t.image)},$="image"===x.type&&x.image.id?{id:x.image.id,ext:x.image.ext,width:x.image.width,animated:null!=(c=x.image.animated)?c:0,transparent:null!=(d=x.image.transparent)?d:0,proportion:null!=(u=x.image.proportion)?u:0,preview:x.image.preview}:{},C=k(x.image,h?800:1400,y),S=p(x.image,A,w),R=A?{}:{"background-image":C},E="blur"===w?{"background-image":`url(data:image/webp;base64, ${$.preview})`}:{};return React.h(React.Fragment,null,x.shadowEnabled?React.h("div",{className:"bg-shadow"}):"","image"===x.type&&x.image.id&&S?React.h("span",{className:"bg-preview",style:E}):"","color"===x.type?React.h("span",{className:"bg-fill","data-type":"color"}):"","image"===x.type&&x.image.id?React.h("span",{className:"bg-fill","data-type":"image","data-img-id":$.id,"data-img-ext":$.ext,"data-img-width":$.width,"data-img-animated":$.animated,"data-img-transparent":$.transparent,"data-img-proportion":$.proportion,"data-img-has-placeholder":S,"data-img-lazy":A,"data-img-loaded":!A,style:R}):"",x.borderEnabled?React.h("span",{className:`bg-border is-${x.borderColorType}`}):"","none"!==_.type||v.enabled||b.enabled?React.h(We,{isLazyLoading:A,fillData:_,borderData:v,glareData:b}):"")}function Ke({icon:t,className:e=""}){var i;const o=String(t.url).includes("/_s/images/svg/")||t.is_flexbe||t.is_noun,n=o?`${t.url}#icon`:t.url;return React.h("div",{className:`component-icon component-ico size--${null!=(i=t.size)?i:"medium"} style--none color--contrast border--none shape--none scale--contain ${e||""}`,"data-component":"icon","data-img-url":n},React.h("div",{className:"icon-wrap"},o?React.h("svg",{className:"icon vector-icon",viewBox:"0 0 50 50"},React.h("use",{href:n})):React.h("div",{className:"icon custom-icon",style:{"background-image":`url(${t.url})`}})))}const Je=t=>{try{return me(t)||(t=fe(t)),flexbe_cli.run.is_ios&&(t+="&#8205;"),t}catch(e){return t}};function Ye({buttonStyle:t,action:e,link:i,padding:o,disabled:n,price:s,productData:a,productKey:r,positionType:l,onClick:c}){var d;const u=React.useRef(null),h=React.useMemo((()=>{var e,i,o,n,s,a,r,c,d,u,h,p,m;return{fillEnabled:!!t.fill.enabled,borderEnabled:!!t.border.enabled,shadowEnabled:!!t.shadow.enabled,wide:"free"===l||!!t.wide,high:"free"===l||!!t.high,transitions:null!=(e=t.transitions)?e:{},fillContrast:null!=(i=t.fill.contrast)?i:"dark",fillOpacity:null!=(o=t.fill.opacity)?o:100,borderColor:null!=(n=t.border.color)?n:"#ffffff",textColor:null!=(s=t.text.color)?s:"#ffffff",hoverTextColor:null!=(a=null==(r=t.transitions)||null==(r=r.hover)||null==(r=r.text)?void 0:r.color)?a:"#ffffff",underlineEnabled:null==(c=t.underline)?void 0:c.enabled,hoverUnderlineEnabled:null==(d=t.transitions)||null==(d=d.hover)||null==(d=d.underline)?void 0:d.enabled,underlineType:null==(u=t.transitions)||null==(u=u.hover)||null==(u=u.underline)?void 0:u.type,showIcon:null!=(h=t.icon.enabled)&&h,icon:t.icon,iconOrder:null!=(p=t.icon.position)?p:"left",lang:t.lang,actionLinkBlank:null!=(m=t.action_link_blank)&&m}}),[t,l]),p=React.useMemo((()=>{const e=(t.submit.replace(/{\s?price\s?}/,s)||"").trim();return e.length?e:flexbe_cli.locale.tr("modal.options.button.text")}),[s,t]),m=[ue(h.borderEnabled&&!(h.fillEnabled||0===h.fillOpacity)&&"auto"===h.textColor?h.borderColor:h.textColor),ue(h.hoverTextColor)].includes("gradient"),f={type:"color",border_enabled:h.borderEnabled,shadow_enabled:h.shadowEnabled,border_color:h.borderColor,underline_type:h.underlineType},g=["component-button","scale-only-bg",""+(h.wide?"wide":""),""+(h.high?"high":""),""+(n?"disabled":""),Ue(h.transitions)].join(" ");return React.useEffect((()=>{if(null!==u.current){const t=$(u.current),e=t.attr("data-product");e&&(t.removeAttr("data-product"),t.data("product",JSON.parse(e)))}})),React.h("button",{style:null!=o?o:null,className:g,"data-action-target":!0,"data-component":"button"},React.h(Ge,{background:f,transitions:h.transitions}),"cart"===e?React.h("a",{ref:u,"data-action":"cart",className:"cart-options-actions","data-product":JSON.stringify(a)}):"","modal"===e?React.h("a",{"data-action":"modalOptions",className:"cart-options-actions",id:r}):"",["product-page","pages"].includes(e)&&i?React.h("a",{href:decodeURI(i),target:h.actionLinkBlank?"_blank":null}):"","click"===e?React.h("a",{onClick:c,className:"click-actions"}):"",h.showIcon&&null!=(d=h.icon)&&d.url?React.h(Ke,{className:`btn-icon icon-${h.iconOrder}`,icon:h.icon}):"",React.h("span",{className:"btn-text "+(m?"text-gradient":"")},h.underlineEnabled||h.hoverUnderlineEnabled?React.h("div",{className:`text-underline is-${h.underlineType}`}):"",React.h("span",{dangerouslySetInnerHTML:{__html:Je(p)}})))}function Qe(t){var e,i,o,n,s,a,r,l;const c=React.useRef(null),d=["button","price_in_button","more_details"].includes(t.type),u=null!=(e=t.settings)?e:{},h=null!=(i=t.positionType)?i:"static",p="button_with_available"===t.type||(u.available||{}).show,m="button_with_price"===t.type||(u.price||{}).show,f="free"===h&&!(p&&m)||"free"!==h&&(null!=(o=t.style)?o:{}).wide||0,g=t.variant.getPrice(t.variant.price),_={locked:!["product-page","pages"].includes(t.cartAction)&&t.variant.getStatusCart(t.isModal||t.isNotDefault).locked,disabled:!["product-page","pages"].includes(t.cartAction)&&t.variant.getStatusCart(t.isModal||t.isNotDefault).disabled};return React.useLayoutEffect((()=>{if(!flexbe_cli.is_admin&&!["product-page","pages"].includes(t.cartAction)){const t=$(c.current).find(".button-toltipster_container");t.attr("data-tip")?flexbe_cli.tip.init(t[0],{interactive:!1,triggerOpen:{click:!0,touchstart:!0,mouseenter:!0}}):t.hasClass("tooltipstered")&&flexbe_cli.tip.destroy(t[0])}}),[t]),React.h(React.Fragment,null,React.h("div",{ref:c,className:`zone-products__button active ${"more_details"===t.type?"zone-products__type-more-details":"zone-products__type-button"} ${d?"zone-products__element":""} ${null!=(n=null==(s=u.options)?void 0:s.fix_to_bottom)&&n?"zone-products__button-to-bottom":""} ${!f||p||m?"":"zone-products__button-stretch"} ${_.disabled||_.locked?"disabled":""}`,style:null!=(a=t.padding)?a:null},React.h("div",{className:"button-toltipster_container "+(f?"button-toltipster_stretch":""),"data-tip":_.disabled&&flexbe_cli.locale.tr("ecommerce.option.disabled")||_.locked&&flexbe_cli.locale.tr("ecommerce.option.locked")||null,"data-tooltipstered":_.disabled},React.h(Ye,{disabled:_.disabled||_.locked,buttonStyle:null!=(r=t.style)?r:{},price:g,action:t.cartAction,productData:t.productData,productKey:t.productKey,positionType:h,link:t.link}))),p||m?React.h("div",{className:"zone-products__other-container"},p?React.h(Be,{variant:t.variant,style:u.available||{}}):"",m?React.h(He,{usePriceOld:t.product.isOldPrice,variant:t.variant,style:u,styleAdaptive:null!=(l=t.buttonAdaptive)?l:{},classes:"button-with-price"}):""):React.h(React.Fragment,null))}function Xe(t){var e,i,o,n,s,a,r,l,c,d;const u=null!=(e=t.settings)?e:{},h=null!=(i=t.buttonAdaptive)?i:{},p=null!=(o=t.positionType)?o:"static",m=null!=(n=null!=(s=null==u||null==(a=u.options)?void 0:a.reverse)?s:"right"===(null==u?void 0:u.style.position))?n:0,f=(null==(r=u.options)?void 0:r.fix_to_bottom)||0,g=["button_with_available","button_with_price"].includes(t.type)||(null==(l=t.settings)||null==(l=l.price)?void 0:l.show)||(null==(c=t.settings)||null==(c=c.available)?void 0:c.show),_={buttonAdaptive:h,positionType:p,isModal:t.isModal,product:t.product,variant:t.variant,isNotDefault:t.isNotDefault,type:t.type,link:t.link,style:t.style,settings:t.settings,cartAction:t.cartAction,productData:t.productData,productKey:t.productKey};return g?React.h("div",{className:`zone-products__element zone-products__button-container ${f?"zone-products__button-container-to-bottom":""} ${m?"revert-block":""}`,style:null!=(d=t.padding)?d:null},React.h(Qe,{..._})):React.h(Qe,{..._,padding:t.padding})}function Ze({product:t,styleCard:e,typeCard:i,params:o,variant:n,option:s,cartAction:a,isModal:r}){var l,c,d;const u=React.useMemo((()=>{var t,i;return{transitions:null!=(t=e.transitions)?t:{},elementsStyles:null!=(i=e.elements_styles)?i:{},justifyCard:e.justify,elementsList:e.elements_list}}),[e]),h=React.useMemo((()=>{var t,i;return{elementsStyles:null!=(t=null==(i=e.adaptive)?void 0:i.elements_styles)?t:{}}}),[e]),p=React.useMemo((()=>{var t,e;const i=null!=(t=null==(e=o.products_proportions)?void 0:e.split("|"))?t:[12,12];return{colImage:o.products_swap?i[1]:i[0],colContent:o.products_swap?i[0]:i[1]}}),[o]),m=u.elementsStyles,f=null!=(l=null==h?void 0:h.elementsStyles)?l:{},g=null!=(c=m.media)?c:{},_=null!=(d=m.options)?d:{},v=u.elementsList.some((t=>"options"===t.key)),b=React.useMemo((()=>{var t,e;return!n.getStatusCart(r).disabled&&!n.getStatusCart(r).locked||"cart"!==(null==(t=g.image)?void 0:t.action)&&"cart"!==(null==(e=g.slider)?void 0:e.action)?g:{...g,image:{action:"none"},slider:{...g.slider,action:"none"}}}),[n]),y=React.useMemo((()=>t.combinationOptionsList(_)),[t,s,_]),w=e=>{t.selectOption(e)};v&&!r&&t.setOptionElement();const A=e=>{var o;return React.h(Ee,{displayImage:t.displayImage,defaultImg:null!=(o=n.defaultImageId)?o:0,images:n.getImages(g.type),style:b,proportion:p.colImage,typeCard:i,productData:n.getCartData(),productKey:n.productKey,action:a,padding:0,link:t.link,...e})},x=({className:e})=>React.h("div",{className:e,"data-cols":"double"===i&&p.colContent,"data-justify":u.justifyCard},u.elementsList.map((e=>{var o,l,c;const d=null!=(o=e.padding_top)?o:10,u={"--elementPadding":`${d}px`,"--elementPaddingAdaptive":`${null!=(l=null==(c=e.adaptive)?void 0:c.padding_top)?l:d}px`};if("media"===e.key&&"single"===i)return React.h(A,{padding:u});if("name"===e.key){var p;const e=null!=(p=m.name)?p:{},i={style:React.useMemo((()=>(n.getStatusCart(r).disabled||n.getStatusCart(r).locked)&&"cart"===e.action?{...e,action:"none"}:e),[n]),padding:u,name:t.title,link:t.link,productData:n.getCartData(),productKey:n.productKey,action:a};return React.h(Ie,{...i})}if("options"===e.key&&t.hasOptions){const e={padding:u,selectOption:w,cardStylesAdaptive:h,combinationOptionsList:y,options:t.options,activeOption:s,style:_};return React.h(Ne,{...e})}var v,b,x,$;if("divider"===e.key)return React.h(qe,{style:null!=(v=m.divider)?v:{},fixToBottom:e.fix_to_bottom,padding:u});if("article"===e.key&&n.article.length)return React.h(Ve,{article:n.article,style:null!=(b=m.article)?b:{},padding:u});if("description"===e.key&&t.description.length)return React.h(je,{description:t.description,style:null!=(x=m.description)?x:{},padding:u});if("available"===e.key)return React.h(Be,{variant:n,style:null!=($=m.available)?$:{},padding:u});if("price"===e.key)return React.h(He,{usePriceOld:t.isOldPrice,variant:n,style:m,padding:u,styleAdaptive:f});if("button"===e.key||"more_details"===e.key&&(t.link||flexbe_cli.is_admin)){var k,C,S;const i=null!=(k=m[e.key])?k:{},o=null!=(C=null==f?void 0:f[e.key])?C:{},s=null!=(S=i.style)?S:{},l={padding:u,variant:n,product:t,type:e.id,style:s,buttonAdaptive:o,cartAction:"more_details"===e.key?s.action:a,settings:i,productData:n.getCartData(),productKey:n.productKey,images:n.getImages(g.type),link:t.link,isModal:r};return React.h(Xe,{...l})}return React.h(React.Fragment,null)})));return"double"===i?React.h("div",{className:"zone-products__card"},React.h(A,null),React.h(x,{className:"zone-products__content"})):React.h(x,{className:"zone-products__card zone-products__content"})}const ti=({text:t,contrast:e})=>["light","dark"].includes(t)?t:e;function ei({product:t,styleCard:e,params:i,isModal:o}){var n,s,a,r,l,c,d,u,h,p,m,f,g,_,v,b,y;const w=React.useRef(null),[A,x]=React.useState(t.currentOptions()),[k,C]=React.useState(t.currentVariant("default")),[S,R]=React.useState(o?"cart":t.getAction(!1)),E=null!=(n=e.transitions)?n:{},z=null!=(s=e.background)?s:{},I=null!=(a=e.actions)?a:{},O=E.hover.enabled?E.hover:null,T=O&&O.enabled,P=null!=(r=I.action)?r:"none",M=(k.getStatusCart(o).disabled||k.getStatusCart(o).locked)&&"cart"===P?"none":P,L=!!I.action_link_blank,D=!(!T||null==(l=O.fill)||!l.enabled)&&O.fill,N=D&&("color"===D.type||"image"===D.type&&D.image.id),q=null!=(c=z.border_enabled)?c:z.border>0,V=z.shadow.enabled,F=N||q||V||T,j=null!=(d=z.type)?d:"none",B=ti({text:z.text,contrast:z.contrast}),H=null!=(p=(null!=(u=(null!=(h=null==e?void 0:e.elements_styles)?h:{}).media)?u:{}).no_gutter)&&p,W=function(...t){let e;for(;t.length;)if(e=t.shift(),null!=e&&"default"!==e&&"inherit"!==e)return e;return e}(null==(m=e.adaptive)||null==(m=m.elements_styles)||null==(m=m.media)?void 0:m.no_gutter,H),U=flexbe_cli.locale.tr("ecommerce.card.empty")||"ecommerce::card::empty",G=null!=(f=i.products_swap)?f:0,K=null!=(g=z.text)?g:"contrast",J=K.includes("#")?"custom":K,Y=null!=(_=i.adaptive)?_:{},Q=null!=(v=i.products_type)?v:"single",X=null!=(b=Y.double_direction)?b:"column",Z=Y.swap_columns||0,tt="product"===(t.hasOptions&&i.display_image||"product")&&t.images.length>1;return flexbe_cli.events.on(`update_${t.id}`,(t=>{x(t.currentOptions()),C(t.currentVariant("default")),R(o?"cart":t.getAction(!1))})),React.useEffect((()=>{if(null!==w.current){const t=$(w.current),e=t.attr("data-product");e&&(t.removeAttr("data-product"),t.data("product",JSON.parse(e)))}})),React.h("div",{className:["flexbe-card","zone-products",`zone-products--${Q}`,`zone-products--adaptive-${X}`,Z&&"column"===X?"zone-products--adaptive-swap":"","gap-item","lightbox-container",H?"no-gutter":"",W?"no-gutter-mobile":"gutter-mobile","double"===Q?"fill-space":"",G?"revert-card":"","none"!==M?"has-action":"",Ue(E)].join(" "),"data-product-item":"true","data-hover-contrast":"custom"!==J&&(N?ti({text:O.fill.text,contrast:O.fill.contrast}):B),"data-color":"none"!==j?J:null,"data-contrast":"none"!==j?B:null,"data-component":F?"backgroundElement":null,"data-image-slider":tt||null,"data-action-target":"none"!==M||null},React.h(Ge,{background:z,transitions:E}),["none","cart"].includes(M)||!t.link||o?"":React.h("a",{"data-action":M,href:["product-page","pages"].includes(M)&&decodeURI(t.link),target:["product-page","pages"].includes(M)&&L?"_blank":null,tabindex:"-1"}),"cart"!==M||"cart"!==S||o?"":React.h("a",{ref:w,"data-action":"cart",className:"cart-options-actions","data-product":JSON.stringify(k.getCartData()),tabindex:"-1"}),"cart"!==M||"modal"!==S||o?"":React.h("a",{id:k.productKey,"data-action":"modalOptions",className:"cart-options-actions",tabindex:"-1"}),(null!=(y=e.elements_list)?y:[]).length?React.h(Ze,{typeCard:Q,styleCard:e,params:i,product:t,option:A,variant:k,cartAction:S,isModal:o}):React.h("div",{className:"card-empty"},U))}let ii;class oi{constructor(){this.styleCard=void 0,this.styleCard={transitions:{hover:[]},background:{color:"#FFFFFF",shading:50,shading_color:"#1d1d1d",contrast:"dark",text:"contrast",image:{position:{x:"50%",y:"50%"}},opacity:100,type:"color",shadow:{enabled:0,preset:"small",x:0,y:7,blur:32,color:"rgba(0, 0, 0, 0.07)"},border:0,border_enabled:!1,border_color:"#CCCCCC",enable:1,radius:0,position:{x:"50%",y:"50%"}},justify:"flex-start",elements_list:[{id:"name",key:"name",padding_top:40},{id:"options",key:"options",padding_top:20},{id:"divider_7021066",key:"divider",padding_top:20,fix_to_bottom:!1},{id:"button_with_price",key:"button",padding_top:20}],elements_styles:{button:{style:{type:"button",action:"cart",border:{enabled:!1,width:2,color:"#4773ff"},fill:{type:"color",enabled:!0,color:"#1B1B1C",opacity:100,contrast:"light",color_type:"color"},gap:{x:22,y:12},icon:{enabled:!1},is_new:!0,modal_id:"",product:[],product_enabled:0,rounding:{size:5,real_size:5,enabled:!0},shadow:{enabled:!1,preset:"small",x:0,y:7,blur:7,color:"rgba(0, 0, 0, 0.07)"},submit:flexbe_cli.locale.tr("modal.options.button.text"),text:{color:"auto",contrast:"auto",opacity:100,color_type:"color",size:15,line_height:147,letter_spacing:0,weight:500},transitions:{hover:{fill:{enabled:!0,color:"auto",contrast:"light",opacity:100,style:"fade",text:"contrast",type:"color"},duration:.2,enabled:!0}},wide:!1},old_price:{hide:!1,color:"contrast",line_height:137,opacity:70,size:14,weight:400},available:{color:"contrast",line_height:137,opacity:100,size:14,weight:400,colored_statuses:!0},price:{color:"contrast",line_height:137,opacity:100,size:14,weight:400},options:{fix_to_bottom:!0,justify:"flex-start",reverse:!0},padding_default:0},divider:{color:"contrast",height:1,no_gutter:!1,opacity:10},name:{color:"contrast",line_height:137,opacity:100,size:22,weight:500},options:{color:"contrast",padding_default:20,size:100,style:"transparent",label:{color:"contrast",opacity:100},show_available:!0,show_in_stock_statuses:!0}}}}show(t){const e={styleCard:this.styleCard,params:{products_type:"single"},isModal:!0,product:t};if(!ii){const t=$('\n                <div class="m_modal m_OPTIONS_modal" data-is="modal" data-id="OPTIONS_modal" data-m-id="OPTIONS">\n                    <div class="modal-data" data-overlay="true">\n                        <div class="component-bg"><div class="layer overlay"></div></div>\n\n                        <div class="modal-content" data-contrast="dark" data-v="1" data-as="1"> \n                            <div class="close close-times"></div>                        \n                            <div class="product-options-modal-content"></div>                   \n                        </div>\n                    </div>\n                </div>\n            ');flexbe_cli.modal.$list.append(t),ii=flexbe_cli.entity.bind(t[0])}const i=ii.$area.find(".product-options-modal-content");flexbe_cli.events.trigger("ui_modal_open",{id:"OPTIONS_modal",options:{hash:!1,rise:!0}}),React.render(null,i[0]),React.render(React.h(ei,{...e}),i[0])}}const ni=[{id:25280736,unq_id:"25280736",ext:"png",animated:!1,average:"#EEEEEE",border:"#EEEEEE",preview:"UklGRjQAAABXRUJQVlA4ICgAAADQAgCdASoeABYAPyWKvFeuKSWjqAgBwCSJaQAAPaOgAP7t6e+boAAA",proportion:71,transparent:0,original_resolution:1,width:700,height:500}];class si extends l{constructor(t,e){super(),this.variant=void 0,this.parent=void 0,this.variant=t,this.parent=e}get id(){return this.variant.id}get article(){var t;return null!=(t=this.variant.vendor_code)?t:""}get name(){var t;return(null!=(t=this.variant.name)?t:[]).join(" - ")}get images(){var t;return null!=(t=this.variant.images)?t:[]}get oldPrice(){var t;return null!=(t=this.variant.price_old)&&t}get hasOldPrice(){return Boolean(this.parent.isOldPrice&&this.oldPrice)}get visible(){var t;return null!=(t=this.variant.visible)&&t}get optionValues(){return this.variant.option_values}get optionsInfo(){return this.variant.optionsInfo}get quantity(){var t;return null!=(t=this.variant.quantity)?t:0}get price(){var t;return null!=(t=this.variant.price)?t:null}get defaultImageId(){var t;return null!=(t=this.variant.default_image_id)?t:0}get productKey(){return this.parent.id?`${this.parent.id}_${this.id}`:""}isDefault(){return Boolean(this.variant.is_default&&this.variant.visible)}quantityInfo(){const t=flexbe_cli.ecommerce.settings.inStockStatus,e=flexbe_cli.ecommerce.settings.outOfStockStatus,i=!this.quantity&&-1!==this.quantity&&"none"!==e;return"dummy"===this.quantity?{text:"ru"===flexbe_cli.vars._project.language?"Наличие товара":"Availability",status:"in_stock"}:i||"none"===t?i&&flexbe_cli.ecommerce.settings.allowPreorder?{text:"in_stock"===e?flexbe_cli.locale.tr("cart.quantity_status.in_stock"):flexbe_cli.locale.tr("cart.quantity_status.preorder"),status:"in_stock"===e?"in_stock":"preorder"}:i&&"out_of_stock"===e?{text:flexbe_cli.locale.tr("cart.quantity_status.out_of_stock"),status:"not-available"}:flexbe_cli.is_admin?{text:flexbe_cli.locale.tr("cart.quantity_status.in_stock"),status:"in_stock"}:{text:"",status:"hide"}:{text:-1===this.quantity||"in_stock"===t?flexbe_cli.locale.tr("cart.quantity_status.in_stock"):flexbe_cli.locale.tr("cart.quantity_status.items_in_stock",{count:this.quantity}),status:"in_stock"}}getPrice(t){return"string"==typeof t?flexbe_cli.locale.currency_format.str.replace(":value",t).replace(":symbol",flexbe_cli.locale.currency.symbol):null==t?!flexbe_cli.ecommerce.settings.noPriceLabel&&flexbe_cli.is_admin?"ru"===flexbe_cli.vars._project.language?"цена скрыта":"price hidden":flexbe_cli.ecommerce.settings.noPriceLabel:flexbe_cli.locale.formatMoney(t,{freeLabel:flexbe_cli.ecommerce.settings.zeroPrice})}getImages(t){if("variant"===this.parent.displayImage&&this.parent.options.length){const t=this.variant.images;return t.length?t:ni}if("product"===this.parent.displayImage||!this.parent.options.length){const e=this.parent.images;return"image"===t&&e.length>1?[e.find((t=>t.unq_id===this.defaultImageId))||e[0]]:e.length?e:ni}return ni}getCartData(t){return{price:this.variant.price,title:this.parent.title,productId:this.parent.id,variantId:this.variant.id,vendorCode:this.variant.vendor_code,quantity:this.variant.quantity,img:this.getImages(t),optionsInfo:this.variant.optionsInfo,count:1,strict:1}}getStatusCart(t){const e=this.parent.hasOptionsElement||t;return{locked:!flexbe_cli.ecommerce.settings.allowPreorder&&!this.quantity&&-1!==this.quantity&&e,disabled:(!this.visible||null==this.price&&!flexbe_cli.ecommerce.settings.allowPriceless||0===this.parent.id)&&e}}}const ai=(t,e)=>{if(!t.visible)return{exceptionClass:"disabled",tipText:e.needTipsOptions?flexbe_cli.locale.tr("ecommerce.option.disabled"):""};if(!t.quantity){const t=flexbe_cli.ecommerce.settings.outOfStockStatus,i=e.needAvailableOptions?flexbe_cli.locale.tr("cart.quantity_status.in_stock"):"",o=flexbe_cli.ecommerce.settings.allowPreorder,n=o?"":"locked";let s=e.needTipsOptions?flexbe_cli.locale.tr("ecommerce.option.locked"):"";return o&&e.needTipsOptions&&(s="in_stock"===t?i:flexbe_cli.locale.tr("cart.quantity_status.preorder")),o&&"none"===t&&(s=""),{exceptionClass:n,tipText:s}}return"none"!==e.inStock?"items_in_stock"===e.inStock&&-1!==t.quantity?{exceptionClass:"",tipText:e.needAvailableOptions&&e.needTipsOptions?flexbe_cli.locale.tr("cart.quantity_status.items_in_stock",{count:t.quantity}):""}:{exceptionClass:"",tipText:e.needAvailableOptions&&e.needTipsOptions?flexbe_cli.locale.tr("cart.quantity_status.in_stock"):""}:{exceptionClass:"",tipText:""}};class ri extends l{constructor(t){super(),this.product=void 0,this.variantItems=void 0,this.activeVariant=void 0,this.activeOptions=void 0,this.oldPayload=void 0,this.hasOptionsElement=void 0,this.product=t,this.variantItems=t.variants.map((t=>new si(t,this))),this.init()}get id(){return this.product.id}get settings(){var t;return null!=(t=this.product.settings)?t:{}}get link(){var t;return this.useCustomUri&&null!=(t=this.settings.uri)?t:""}get useCustomUri(){var t;return null!=(t=this.settings.use_custom_uri)&&t}get variants(){return this.variantItems}get title(){var t;return null!=(t=this.product.name)?t:""}get description(){var t;return null!=(t=this.product.description)?t:""}get options(){var t;return null!=(t=this.product.options)?t:[]}get hasVariants(){return this.variants.length>1}get displayImage(){var t;return null!=(t=this.product.display_image)?t:"product"}get images(){var t;return null!=(t=this.product.images)?t:[]}get isOldPrice(){var t;return null!=(t=this.product.use_price_old)&&t}get hasOptions(){return Boolean(this.product.options.length)}init(){const t=(e=this.variantItems).find((t=>t.isDefault()))||e.find((t=>t.visible))||e[0];var e;const i=t.optionValues;this.setOption(i),this.setVariant(t)}getAction(t){return this.hasVariants&&!t&&!this.hasOptionsElement?"modal":"cart"}getVariant(t){var e;return null!=(e=this.variantItems.filter((e=>String(e.id)===String(t)))[0])?e:this.variantItems[0]}currentVariant(t){return"default"===t?this.activeVariant:this.getVariant(t)}currentOptions(t){if(t&&"default"!==t){return this.getVariant(t).optionValues}return this.activeOptions}selectOption(t){const[e,i]=t.split("_"),o=this.currentOptions().map((t=>String(t.option_id)===String(e)?{option_id:+e,value_id:+i}:t)),n=this.variantItems.find((t=>((t,e)=>{let i=!1;return t.length===e.length&&(i=t.every((t=>e.some((e=>t.option_id===e.option_id&&t.value_id===e.value_id)))),i)})(t.optionValues,o)));this.setOption(o),this.setVariant(n),t!==this.oldPayload&&(flexbe_cli.events.trigger(`update_${this.product.id}`,this),this.oldPayload=t)}setOption(t){this.activeOptions=t}setVariant(t){this.activeVariant=t}setOptionElement(){this.hasOptionsElement||(this.hasOptionsElement=!0,flexbe_cli.events.trigger(`update_${this.product.id}`,this))}combinationOptionsList(t){return(({product:t,currentOptions:e,optionsStyle:i})=>{var o,n;const s=null==(o=i.show_available)||o,a=null==(n=i.show_in_stock_statuses)||n,r=flexbe_cli.ecommerce.settings.inStockStatus;let l=[];return 1===e.length?l=t.variants.reduce(((t,e)=>[...t,{optionId:`${e.option_values[0].option_id}_${e.option_values[0].value_id}`,...ai(e,{needTipsOptions:s,needAvailableOptions:a,inStock:r})}]),[]):t.variants.forEach((t=>{for(let i=0;i<e.length;i++){const o=e.filter(((t,e)=>i!==e)),n=t.option_values.filter(((t,e)=>i!==e));JSON.stringify(o)===JSON.stringify(n)&&l.push({optionId:`${t.option_values[i].option_id}_${t.option_values[i].value_id}`,...ai(t,{needTipsOptions:s,needAvailableOptions:a,inStock:r})})}})),l})({product:this.product,currentOptions:this.activeOptions,optionsStyle:t})}}class li extends l{constructor(){super(),this.products=void 0,this.modalOptions=void 0,this.products=new Map,this.init()}init(){const t=document.getElementById("flexbe-products-store");if(t){try{const e=JSON.parse(t.getAttribute("data-store"));this.addToStore(e)}catch(t){}t.parentNode.removeChild(t)}}addToStore(t){t.forEach((t=>this.products.set(String(t.id),new ri(t))))}getProducts(t){return t.map((t=>this.products.get(String(t)))).filter((t=>t))}getDummyProduct(){const t="ru"===flexbe_cli.vars._project.language;return new ri({id:0,name:t?"Название товара":"Product name",description:t?"Описание товара должно отражать основные свойства и параметры, важные при покупке.":"The product description should convey the key features and qualities that help customers make a purchasing decision.",images:t?[{id:39821031,ext:"jpg",animated:!1,average:"#EEEEEE",border:"#EEEEEE",height:2480,preview:"UklGRkYAAABXRUJQVlA4IDoAAAAQBACdASoeACMAPxV8r1GxKKQitVv4AiAiiWkAAHdYxpA7nUpHNdVoAAD+7mmMq9LCAW+j7lgJyYAA",proportion:114.81,transparent:!1,width:2160}]:[{animated:!1,average:"#EEEEEE",border:"#EEEEEE",ext:"jpg",height:1080,id:39909534,preview:"UklGRkwAAABXRUJQVlA4IEAAAADwAwCdASoeAB4APyVyyWSuJKkpFAHAJIlpAAA9ZIprB9gU3U+hJ/oAAP7tQ+5GIEcJuzeAREpLgMJmahfgAAAA",proportion:100,transparent:!1,width:1080}],variants:[{id:6468,name:t?["Вариант 1"]:["Variant 1"],option_values:[{option_id:893,value_id:2338}],vendor_code:t?"Значение артикула":"SKU number",quantity:"dummy",price:t?"Цена":"Price",price_old:t?"Старая цена":"Old price",images:[],default_image_id:null,visible:1,is_default:1},{id:6480,name:t?["Вариант 2"]:["Variant 2"],option_values:[{option_id:893,value_id:2339}],vendor_code:t?"значение артикула":"SKU number",quantity:"dummy",price:t?"Цена":"Price",price_old:t?"Старая цена":"Old price",images:[],default_image_id:null,visible:1,is_default:0},{id:6481,name:t?["Вариант 3"]:["Variant 3"],option_values:[{option_id:893,value_id:2340}],vendor_code:t?"значение артикула":"SKU number",quantity:"dummy",price:t?"Цена":"Price",price_old:t?"Старая цена":"Old price",images:[],default_image_id:null,visible:1,is_default:0}],options:[{id:893,name:t?"Название опции":"Option name",sort_index:0,values:[{id:2338,name:t?"Вариант 1":"Variant 1",data:{color:"#ffffff",contrast:"dark",contrastFixed:"dark"}},{id:2339,name:t?"Вариант 2":"Variant 2",data:{color:"#000000",contrast:"light",contrastFixed:"light"}},{id:2340,name:t?"Вариант 3":"Variant 3",data:{color:"#7666F6",contrast:"dark",contrastFixed:"dark"}}],data:{type:"color",widget_type:"radio"}}],visible:!0,use_price_old:!0,display_image:"product",available:!0})}async createOptionsModal(){this.modalOptions||(await flexbe_cli.require(["/_s/lib/preact/preact.min.js?1016",`/_s/build/theme/4/_ecommerce_modal.css?${flexbe_cli.version_id}`]),this.modalOptions=new oi)}async showOptionsModal(t){await this.createOptionsModal();const[e]=t.split("_"),[i]=this.getProducts([Number(e)]);i&&this.modalOptions.show(i)}async loadProducts({showType:t,productIds:e,categoryIds:i,limit:o,hideEndedProducts:n}){const s={project_id:flexbe_cli.vars._project.id,showType:t,limit:o,hideEndedProducts:n,productIds:void 0,categoryIds:void 0};"select_products"===t&&(s.productIds=null!=e?e:[]),"select_category"===t&&(s.categoryIds=null!=i?i:[]);const{products:a,categories:r}=await new Promise(((t,e)=>$.ajax({url:"/api/ecommerce/products/",type:"GET",dataType:"json",data:s}).done((e=>{t(e)})).fail((t=>{e(t)}))));return this.addToStore(a),{categories:r,products:a}}}var ci=new class{constructor(){this.cartStore=null,this.deliveryStore=null,this.promotionStore=null,this.productsStore=null,this.getProductInfo=ge}get settings(){return E._project.ecommerce}init({enableDelivery:t=!1,enablePromotions:e=!1,enableProducts:i=!1}){this.cartStore=new ye,e&&(this.promotionStore=new Ae({getTotal:this.cartStore.getTotal,needUpdateWithLS:!flexbe_cli.is_admin})),t&&(this.deliveryStore=new we),i&&(this.productsStore=new li)}};void 0===window.flexbe_cli&&(window.flexbe_cli={}),flexbe_cli.helpers=ot,flexbe_cli.vars=E,flexbe_cli.run=L,flexbe_cli.utm=gt,flexbe_cli.stat=vt,flexbe_cli.events=d,flexbe_cli.locale=yt,flexbe_cli.adaptive=At,flexbe_cli.scroll=j,flexbe_cli.resize=N,flexbe_cli.tip=$t,flexbe_cli.transitions=at,flexbe_cli.require=F,flexbe_cli.fixed=Mt,flexbe_cli.entity=ie,flexbe_cli.block=oe,flexbe_cli.modal=Ft,flexbe_cli.ecommerce=ci,function(t=(()=>{})){let e=!1;function i(){e||("undefined"!=typeof $&&$.debounce?(e=!0,requestAnimationFrame((async()=>{$("body").removeClass("noanimate").addClass("DOMContentLoaded"),await t(),flexbe_cli.vars._globals.isService||(G(),setTimeout((()=>G()),1e3),window.addEventListener("popstate",G)),flexbe_cli.isInited=!0}))):setTimeout(i,10))}["complete","loaded"].includes(document.readyState)?i():document.addEventListener("DOMContentLoaded",(()=>i()))}((async()=>{E.init(),await L.init(),j.init(),N.init(),At.init(),flexbe_cli.components&&flexbe_cli.components.init(),Nt((()=>vt.init())),Nt((()=>ci.init({enableDelivery:!0,enablePromotions:!0,enableProducts:!0}))),Nt((()=>{ie.init(),oe.init(),Ft.init()})),Nt((()=>St.init())),Nt((()=>Mt.init()),200)}))}();
